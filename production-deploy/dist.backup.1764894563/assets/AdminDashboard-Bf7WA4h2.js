import{T as D,U as b,s as u,j as e,a as Q,b as v}from"./index-CC3WzsEc.js";import{R as hs,Z as R,U as Re,d as M,M as _,H as f,S as us,P as ps,B as Me,e as L,L as bs,f as fs,g as Le,E as ee,h as se,T as w,i as Oe,j as gs,k as te,D as Fe,X as W,m as js,n as Ns,o as Pe,I as vs,p as ws,q as le,s as ae,t as re,u as ys,A as ks,v as Cs}from"./libs-CBAR_Xud.js";import{u as Es}from"./react-egvKCuRq.js";import{R as zs,B as Ss,C as As,X as Us,Y as Ts,T as Is,a as Ds}from"./charts-wSLNUq2w.js";import"./vendor-BSeQcPOp.js";import"./auth-BXl3LOEh.js";import"./utils-D9li4S3w.js";const{useState:i,useEffect:y}=hs,$s=({users:m,events:k,onDeleteUser:Be,onDeleteEvent:$e,onDeleteMedia:qe,onUpdateEvent:Ge,onUpdateUser:ie,onNewEvent:He,onDownloadEvent:ne,onClose:_e,onLogout:We,t:l})=>{const[c,Y]=i("users"),{updateServiceWorker:Ye}=Es(),[p,C]=i(null),[O,V]=i(null),[x,E]=i(null),[g,z]=i(null),[d,de]=i(null),[Ve,oe]=i(!1),[S,K]=i([]),[A,Z]=i(!1),[o,F]=i(null),[Ke,P]=i(!1),[X,ce]=i([]),[U,Ze]=i(null),[B,xe]=i(""),[J,me]=i(!1),[j,$]=i(null),[he,ue]=i(""),[N,T]=i("custom"),[pe,be]=i(30),[q,fe]=i("minutes"),[I,G]=i(null),[ge,je]=i(""),[Ne,ve]=i(""),[we,ye]=i(""),[H,ke]=i(D.FREE),[Ce,Ee]=i(b.USER),Xe=m.map(s=>({name:s.name.split(" ")[0],used:s.storageUsedMb,limit:s.storageLimitMb}));y(()=>{c==="system"&&!d&&(async()=>{oe(!0);try{const t=await v.getSystemStorage();de(t)}catch(t){console.error("Failed to fetch system storage data:",t)}finally{oe(!1)}})()},[c,d]),y(()=>{const s=t=>{t.key==="Escape"&&(x?E(null):j?$(null):I&&G(null))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[x,j,I]),y(()=>{u.connect();const s=t=>{K(r=>[t,...r]),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Upgrade Request",{body:`${t.userInfo?.name||"Anonymous user"} requested upgrade to ${t.tier}`,icon:"/icon-192x192.png"})};return u.on("upgrade_request",s),()=>{u.off("upgrade_request",s)}},[]),y(()=>{const s=t=>{A&&!t.target.closest(".notification-container")&&Z(!1)};return A&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[A]),y(()=>{c==="support"&&X.length===0&&(async()=>{try{const t=await v.getSupportMessages();ce(t)}catch{}})()},[c,X.length]),y(()=>{u.connect();const s=t=>{ce(r=>r.find(n=>n.id===t.id)?r:[...r,t])};return u.on("new_support_message",s),()=>{u.off("new_support_message",s)}},[]);const ze=s=>m.find(t=>t.id===s)?.name||l("unknownUser"),Se=s=>s?new Date>new Date(s):!1,Je=s=>k.filter(t=>t.hostId===s),Ae=s=>k.filter(t=>t.hostId===s).length,Ue=s=>{let t="bg-green-50 text-green-700 border-green-200",r=null;return s===D.STUDIO?(t="bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-900 border-amber-300",r=e.jsx(L,{size:10,className:"mr-1 fill-amber-700"})):s===D.PRO?(t="bg-purple-50 text-purple-700 border-purple-200",r=e.jsx(R,{size:10,className:"mr-1 fill-purple-500"})):s===D.BASIC?(t="bg-blue-50 text-blue-700 border-blue-200",r=e.jsx(Cs,{size:10,className:"mr-1 fill-blue-500"})):t="bg-slate-100 text-slate-600 border-slate-200",e.jsxs("span",{className:`px-2.5 py-1 inline-flex items-center text-xs leading-5 font-bold rounded-full border ${t}`,children:[r,s]})},Qe=s=>{z({isOpen:!0,type:"user",id:s.id,title:"Delete User Account",message:`Are you sure you want to delete ${s.name}? This will permanently remove their account AND all ${Ae(s.id)} events associated with them.`})},Te=s=>{z({isOpen:!0,type:"event",id:s.id,title:"Delete Event",message:`Are you sure you want to delete "${s.title}"? This will permanently delete the event gallery and all ${s.media.length} media items inside it.`})},es=(s,t)=>{z({isOpen:!0,type:"media",id:t,parentId:s,title:"Delete Media Item",message:"Are you sure you want to delete this photo/video? It will be permanently removed from the gallery."})},ss=async()=>{if(!g)return;const{type:s,id:t,parentId:r}=g;s==="user"?Be(t):s==="event"?($e(t),p?.id===t&&C(null)):s==="media"&&r&&(qe(r,t),C(a=>a?{...a,media:a.media.filter(n=>n.id!==t)}:null),x?.id===t&&E(null)),z(null)},Ie=s=>{$(s),ue(s.title),s.expiresAt?(T("custom"),be(30),fe("minutes")):T("unlimited")},ts=()=>{if(!j)return;let s=j.expiresAt;if(N==="unlimited")s=null;else if(N==="immediate")s=new Date().toISOString();else{const r=new Date().getTime();let a=1e3;q==="minutes"&&(a=60*1e3),q==="hours"&&(a=3600*1e3),q==="days"&&(a=1440*60*1e3),s=new Date(r+pe*a).toISOString()}const t={...j,title:he,expiresAt:s};Ge(t),$(null)},ls=s=>{G(s),je(s.name),ve(s.email),ye(Q[s.tier].allowBranding&&s.studioName||""),ke(s.tier),Ee(s.role)},as=()=>{if(!I)return;const s=Q[H],t={...I,name:ge,email:Ne,studioName:s.allowBranding?we:void 0,role:Ce,tier:H};ie(t),G(null)},rs=s=>{V(s),Y("userEvents")},is=()=>{V(null),Y("users")},ns=async()=>{if(confirm("Force update app to latest version? This will unregister all service workers and reload the page.")){try{await Ye(!0)}catch(s){console.error(s)}if("serviceWorker"in navigator){const s=await navigator.serviceWorker.getRegistrations();for(const t of s)await t.unregister()}window.location.reload()}},ds=()=>{if(confirm(`âš ï¸ FORCE RELOAD ALL CLIENTS?

This will cause every user currently on the site to refresh their page immediately. Use this only after pushing a critical update.`)){const s=localStorage.getItem("snapify_token");s&&(u.socket?(u.socket.emit("admin_trigger_reload",s),alert("Signal sent. Clients should reload momentarily.")):alert("Socket not connected."))}},De=async()=>{if(!(!B.trim()||!U||J)){me(!0);try{await v.sendAdminReply(U,B.trim()),xe("")}catch{}finally{me(!1)}}},os=()=>{if(!O)return null;const s=Je(O.id);return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center gap-4 bg-slate-50",children:[e.jsxs("button",{onClick:is,className:"flex items-center gap-2 text-slate-600 hover:text-slate-800 transition-colors bg-white border border-slate-300 px-3 py-1.5 rounded-lg text-sm font-medium",children:[e.jsx(ks,{size:16}),"Back to Users"]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[O.name,"'s Events"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.length," events found"]})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Media"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[t.title,t.pin&&e.jsx(Oe,{size:12,className:"text-amber-500"})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[e.jsx(M,{size:12})," ",t.date||l("noDate")]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Se(t.expiresAt)?e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-700 flex items-center w-fit border border-red-200",children:[e.jsx(te,{size:12,className:"mr-1"})," ",l("expired")]}):e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-700 flex items-center w-fit border border-green-200",children:[e.jsx(R,{size:12,className:"mr-1"})," ",l("active")]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 font-medium",children:[t.media.length," ",l("items")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>ne(t),className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition-colors",title:l("downloadAll"),children:e.jsx(Fe,{size:18})}),e.jsx("button",{onClick:()=>Ie(t),className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition-colors",title:"Edit Event",children:e.jsx(se,{size:18})}),e.jsx("button",{onClick:()=>C(t),className:"text-indigo-600 hover:bg-indigo-50 p-2 rounded-lg transition-colors",title:"View Media",children:e.jsx(ee,{size:18})}),e.jsx("button",{onClick:()=>Te(t),className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",title:"Delete Event",children:e.jsx(w,{size:18})})]})]},t.id))})]}),s.length===0&&e.jsxs("div",{className:"p-12 text-center text-slate-500",children:[e.jsx(M,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium",children:"No events found for this user"})]})]})]})},cs=()=>{const s=X.reduce((a,n)=>{const h=n.userId||"anonymous";return a[h]||(a[h]={userId:h,userName:n.userName,userEmail:n.userEmail,messages:[],lastMessage:n.createdAt,unreadCount:0}),a[h].messages.push(n),a[h].lastMessage=n.createdAt,!n.isFromAdmin&&!n.isRead&&a[h].unreadCount++,a},{}),t=Object.values(s).sort((a,n)=>new Date(n.lastMessage).getTime()-new Date(a.lastMessage).getTime()),r=U?s[U]:null;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:e.jsx(_,{className:"text-indigo-600",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Support Chat Management"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Manage customer support conversations"})]})]}),e.jsxs("div",{className:"flex h-[600px]",children:[e.jsxs("div",{className:"w-1/3 border-r border-slate-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-slate-100",children:e.jsxs("h4",{className:"font-bold text-slate-900",children:["Conversations (",t.length,")"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-500",children:[e.jsx(_,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium",children:"No conversations yet"}),e.jsx("p",{className:"text-sm",children:"Support messages will appear here"})]}):t.map(a=>{const n=m.find(h=>h.id===a.userId);return e.jsx("div",{onClick:()=>Ze(a.userId),className:`p-4 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors ${U===a.userId?"bg-indigo-50 border-l-4 border-l-indigo-500":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold",children:a.userName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-bold text-slate-900 truncate",children:a.userName}),a.unreadCount>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:a.unreadCount})]}),e.jsx("p",{className:"text-sm text-slate-500 truncate",children:a.userEmail||"No email"}),n&&e.jsx("div",{className:"flex items-center gap-2 mt-1",children:Ue(n.tier)}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(a.lastMessage).toLocaleString()})]})]})},a.userId)})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold",children:r.userName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900",children:r.userName}),e.jsx("p",{className:"text-sm text-slate-500",children:r.userEmail||"No email provided"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:r.messages.map(a=>e.jsx("div",{className:`flex ${a.isFromAdmin?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${a.isFromAdmin?"bg-indigo-600 text-white":"bg-slate-100 text-slate-900"}`,children:[e.jsx("p",{className:"text-sm",children:a.message}),e.jsx("p",{className:`text-xs mt-1 ${a.isFromAdmin?"text-indigo-200":"text-slate-500"}`,children:new Date(a.createdAt).toLocaleTimeString()})]})},a.id))}),e.jsx("div",{className:"p-4 border-t border-slate-100 bg-white",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"admin-reply-input",name:"admin-reply",type:"text",value:B,onChange:a=>xe(a.target.value),onKeyPress:a=>a.key==="Enter"&&De(),placeholder:"Type your reply...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none",autoComplete:"off"}),e.jsxs("button",{onClick:De,disabled:!B.trim()||J,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[J?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(ys,{size:16}),"Send"]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(_,{size:64,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium",children:"Select a conversation to start chatting"}),e.jsx("p",{className:"text-sm",children:"Choose a user from the list to view their messages"})]})})})]})]})},xs=()=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden p-8 animate-in fade-in duration-300",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-100",children:e.jsx(le,{className:"text-red-600",size:40})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-2",children:"System Settings"}),e.jsx("p",{className:"text-slate-500",children:"Manage global configurations and perform critical maintenance tasks."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-indigo-200 rounded-2xl p-6 bg-indigo-50/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-indigo-900 mb-1 flex items-center gap-2",children:[e.jsx(re,{size:18})," App Updates"]}),e.jsx("p",{className:"text-sm text-indigo-700",children:"Force this browser to fetch the latest version of the application immediately."})]}),e.jsxs("button",{onClick:ns,className:"py-2.5 px-5 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-md flex items-center gap-2",children:[e.jsx(re,{size:16}),"Force Reload App"]})]}),e.jsxs("div",{className:"border border-amber-200 rounded-2xl p-6 bg-amber-50/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-amber-900 mb-1 flex items-center gap-2",children:[e.jsx(R,{size:18})," Global Client Refresh"]}),e.jsxs("p",{className:"text-sm text-amber-700 max-w-md",children:["Send a signal to ",e.jsx("strong",{children:"ALL connected users"})," to unregister their service worker and reload the page. Use this after deploying a new version to ensure everyone gets it immediately."]})]}),e.jsxs("button",{onClick:ds,className:"py-2.5 px-5 bg-amber-600 text-white font-bold rounded-xl hover:bg-amber-700 transition-all shadow-md flex items-center gap-2",children:[e.jsx(re,{size:16}),"Reload All Clients"]})]})]})]})}),ms=()=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden p-8 animate-in fade-in duration-300",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-green-100",children:e.jsx(f,{className:"text-green-600",size:40})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-2",children:"System Storage"}),e.jsx("p",{className:"text-slate-500",children:"Real-time monitoring of system and storage capacity."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-slate-200 rounded-2xl p-6 bg-slate-50/50",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(f,{size:18})," System Disk Usage"]}),Ve?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin border-2 border-slate-300 border-t-slate-600 rounded-full w-8 h-8"}),e.jsx("span",{className:"ml-3 text-slate-600",children:"Loading storage info..."})]}):d?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Filesystem"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.system.filesystem})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Total Size"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.system.size})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Used"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.system.used})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Available"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.system.available})]})]}):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(f,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{children:"Unable to load storage information"})]})]}),e.jsxs("div",{className:"border border-slate-200 rounded-2xl p-6 bg-slate-50/50",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(f,{size:18})," MinIO Storage Usage"]}),d?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Filesystem"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.minio.filesystem})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Total Size"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.minio.size})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Used"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.minio.used})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Available"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.minio.available})]})]}):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(f,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{children:"Unable to load MinIO information"})]})]}),e.jsxs("div",{className:"border border-red-200 rounded-2xl p-6 bg-red-50/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center border border-red-200",children:e.jsx(le,{className:"text-red-600",size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-black text-red-900",children:"System Lab"}),e.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Danger Zone - Administrative Operations"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-xl border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-slate-900",children:"Clean MinIO Storage Bucket"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Permanently delete all files and objects from the MinIO storage bucket. This action cannot be undone."})]}),e.jsxs("button",{onClick:async()=>{if(confirm(`ðŸš¨ CRITICAL WARNING ðŸš¨

This will PERMANENTLY DELETE ALL FILES from the MinIO storage bucket!

â€¢ All user uploaded media will be lost
â€¢ Event galleries will become empty
â€¢ This action CANNOT be undone

Type "YES" to confirm:`)&&prompt('Type "YES" to confirm permanent deletion:')==="YES")try{const r=await v.cleanMinIOBucket();alert(`âœ… Bucket cleaned successfully!

ðŸ“ Deleted: ${r.deletedCount} objects
ðŸ’¾ Freed: ${r.totalSize}

âš ï¸  All media files have been permanently removed.`),de(null)}catch(r){console.error("Failed to clean bucket:",r),alert("âŒ Failed to clean bucket. Check console for details.")}},className:"px-4 py-2 bg-red-600 text-white text-sm font-bold rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2 shadow-lg shadow-red-500/20",children:[e.jsx(w,{size:16}),"Clean Bucket"]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-slate-900",children:"Clear Users Database"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Reset the webapp by removing all users, events, media, and related data. Admin account will be preserved."})]}),e.jsxs("button",{onClick:async()=>{if(confirm(`ðŸš¨ CRITICAL WARNING ðŸš¨

This will RESET THE ENTIRE WEBAPP!

â€¢ All user accounts will be deleted (except admin)
â€¢ All events and galleries will be removed
â€¢ All media files will be lost
â€¢ Support messages will be cleared

The webapp will return to a fresh state.

Type "RESET" to confirm:`)&&prompt('Type "RESET" to confirm complete webapp reset:')==="RESET")try{const r=await v.clearUsersDatabase();alert(`âœ… Database cleared successfully!

ðŸ‘¤ Admin preserved: ${r.adminPreserved}
ðŸ—‘ï¸  Total records deleted: ${r.totalDeleted}

âš ï¸  Webapp has been reset to fresh state.`),window.location.reload()}catch(r){console.error("Failed to clear database:",r),alert("âŒ Failed to clear database. Check console for details.")}},className:"px-4 py-2 bg-red-700 text-white text-sm font-bold rounded-lg hover:bg-red-800 transition-colors flex items-center gap-2 shadow-lg shadow-red-500/30",children:[e.jsx(ae,{size:16}),"Clear Database"]})]})})]}),e.jsx("div",{className:"mt-4 p-3 bg-red-100 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-red-800 font-medium flex items-center gap-2",children:[e.jsx(ae,{size:14}),"These operations are irreversible. Use only when necessary for system maintenance or testing."]})})]}),d&&e.jsxs("div",{className:"text-center text-xs text-slate-400",children:["Last updated: ",new Date(d.timestamp).toLocaleString()]})]})]})});return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[e.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40 px-4 md:px-8 py-4 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg shadow-indigo-200 shadow-md",children:e.jsx(R,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-black text-slate-900 tracking-tight",children:"SnapifY Admin"}),e.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wide",children:"Master Control"})]})]}),e.jsx("div",{className:"flex items-center gap-2 bg-slate-100 p-1.5 rounded-xl border border-slate-200",children:[{id:"users",icon:Re,label:"Users"},{id:"events",icon:M,label:"Events"},{id:"support",icon:_,label:"Support"},{id:"system",icon:f,label:"System"},{id:"settings",icon:us,label:"Settings"}].map(s=>e.jsxs("button",{onClick:()=>{Y(s.id),V(null)},className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${c===s.id?"bg-white text-indigo-600 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[e.jsx(s.icon,{size:16}),s.label]},s.id))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:He,className:"flex items-center gap-2 bg-slate-900 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-slate-800 transition-colors shadow-lg shadow-slate-500/20 text-sm",children:[e.jsx(ps,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:l("newEvent")})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 mx-1"}),e.jsxs("div",{className:"relative notification-container",children:[e.jsxs("button",{onClick:()=>Z(!A),className:"p-2.5 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-colors relative",title:"Notifications",children:[e.jsx(Me,{size:20}),S.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:S.length>9?"9+":S.length})]}),A&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-xl shadow-xl border border-slate-200 z-50 max-h-96 overflow-y-auto notification-container",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold text-slate-900",children:"Notifications"}),e.jsx("button",{onClick:()=>K([]),className:"text-xs text-slate-500 hover:text-slate-700",children:"Clear All"})]}),S.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-500",children:[e.jsx(Me,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}):e.jsx("div",{className:"divide-y divide-slate-100",children:S.map((s,t)=>e.jsx("div",{onClick:()=>{F(s),P(!0),Z(!1)},className:"p-4 hover:bg-slate-50 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(L,{size:16,className:"text-indigo-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Upgrade Request"}),e.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[s.userInfo?.name||"Anonymous user"," â†’ ",s.tier]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(s.timestamp).toLocaleString()})]}),e.jsx("div",{className:"text-slate-400",children:e.jsx(L,{size:14})})]})},s.id||t))})]})]}),e.jsx("button",{onClick:_e,className:"p-2.5 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-colors",title:l("backToApp"),children:e.jsx(bs,{size:20})}),e.jsx("button",{onClick:We,className:"p-2.5 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-xl transition-colors",title:l("logOut"),children:e.jsx(fs,{size:20})})]})]})}),e.jsxs("div",{className:"flex-1 p-4 md:p-8 max-w-7xl mx-auto w-full",children:[c!=="settings"&&!O&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:l("totalUsers")}),e.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg text-indigo-600",children:e.jsx(Re,{size:20})})]}),e.jsx("span",{className:"text-4xl font-black text-slate-900",children:m.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:l("totalEvents")}),e.jsx("div",{className:"p-2 bg-pink-50 rounded-lg text-pink-600",children:e.jsx(M,{size:20})})]}),e.jsx("span",{className:"text-4xl font-black text-slate-900",children:k.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:l("storage")}),e.jsx("div",{className:"p-2 bg-green-50 rounded-lg text-green-600",children:e.jsx(f,{size:20})})]}),e.jsxs("span",{className:"text-4xl font-black text-slate-900",children:[m.reduce((s,t)=>s+t.storageUsedMb,0).toFixed(1)," ",e.jsx("span",{className:"text-lg font-medium text-slate-400",children:"MB"})]})]})]}),c==="settings"?xs():c==="system"?ms():c==="support"?cs():c==="userEvents"?os():c==="users"?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:l("registeredUsers")}),e.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs font-bold px-2.5 py-1 rounded-full",children:m.length})]}),e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider pl-8",children:l("users")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Stats"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:l("tier")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase tracking-wider pr-8",children:l("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:m.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 pl-8 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center text-white font-bold shadow-sm ${s.role===b.PHOTOGRAPHER?"bg-slate-900 border-2 border-amber-400":"bg-gradient-to-br from-indigo-500 to-purple-600"}`,children:s.role===b.PHOTOGRAPHER?e.jsx(Le,{size:16,className:"text-amber-400"}):s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-bold text-slate-900 flex flex-wrap items-center gap-2",children:[s.name,s.role===b.ADMIN&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 border border-red-200 uppercase tracking-wide",children:"ADMIN"})]}),e.jsx("div",{className:"text-xs text-slate-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-xs font-medium text-slate-700",children:[Ae(s.id)," Events"]}),e.jsx("div",{className:"w-24 bg-slate-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-indigo-500 h-1.5 rounded-full",style:{width:`${Math.min(s.storageUsedMb/s.storageLimitMb*100,100)}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue(s.tier)}),e.jsx("td",{className:"px-6 py-4 pr-8 whitespace-nowrap text-right text-sm font-medium",children:s.role!==b.ADMIN&&e.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>rs(s),className:"text-slate-500 hover:text-indigo-600 p-2 hover:bg-indigo-50 rounded-lg transition-colors",title:"View Events",children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>ls(s),className:"text-slate-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit User",children:e.jsx(se,{size:16})}),e.jsx("button",{onClick:()=>Qe(s),className:"text-slate-500 hover:text-red-600 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",children:e.jsx(w,{size:16})})]})})]},s.id))})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:l("storageUsage")}),e.jsx("div",{className:"flex-1 min-h-[300px]",children:e.jsx(zs,{width:"100%",height:"100%",children:e.jsxs(Ss,{data:Xe,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(As,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0"}),e.jsx(Us,{type:"number",hide:!0}),e.jsx(Ts,{dataKey:"name",type:"category",width:80,tick:{fontSize:12}}),e.jsx(Is,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"}}),e.jsx(Ds,{dataKey:"used",fill:"#6366f1",radius:[0,4,4,0],barSize:20,name:"Used (MB)"})]})})})]})]}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:l("systemEvents")}),e.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs font-bold px-2.5 py-1 rounded-full",children:k.length})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider pl-8",children:l("event")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:l("host")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:l("status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:l("mediaCount")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase tracking-wider pr-8",children:l("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:k.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 pl-8 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[s.title,s.pin&&e.jsx(Oe,{size:12,className:"text-amber-500"})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[e.jsx(M,{size:12})," ",s.date||l("noDate")]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-slate-700 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600",children:ze(s.hostId).charAt(0)}),ze(s.hostId),m.find(t=>t.id===s.hostId)?.role===b.PHOTOGRAPHER&&e.jsx(gs,{size:12,className:"text-amber-500"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Se(s.expiresAt)?e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-700 flex items-center w-fit border border-red-200",children:[e.jsx(te,{size:12,className:"mr-1"})," ",l("expired")]}):e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-700 flex items-center w-fit border border-green-200",children:[e.jsx(R,{size:12,className:"mr-1"})," ",l("active")]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 font-bold",children:s.media.length}),e.jsx("td",{className:"px-6 py-4 pr-8 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>ne(s),className:"text-slate-500 hover:text-green-600 p-2 hover:bg-green-50 rounded-lg transition-colors",title:l("downloadAll"),children:e.jsx(Fe,{size:16})}),e.jsx("button",{onClick:()=>Ie(s),className:"text-slate-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Event",children:e.jsx(se,{size:16})}),e.jsx("button",{onClick:()=>C(s),className:"text-slate-500 hover:text-indigo-600 p-2 hover:bg-indigo-50 rounded-lg transition-colors",title:"View Media",children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>Te(s),className:"text-slate-500 hover:text-red-600 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Event",children:e.jsx(w,{size:16})})]})})]},s.id))})]})})]})]}),I&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden scale-100",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Edit User Profile"}),e.jsx("button",{onClick:()=>G(null),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(W,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Display Name"}),e.jsx("input",{id:"edit-user-name-input",name:"edit-user-name",type:"text",value:ge,onChange:s=>je(s.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-900 focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none transition-all font-medium",autoComplete:"name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Email Address"}),e.jsxs("div",{className:"flex items-center px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-500",children:[e.jsx(js,{size:18,className:"mr-3 text-slate-400"}),e.jsx("input",{id:"edit-user-email-input",name:"edit-user-email",type:"text",value:Ne,onChange:s=>ve(s.target.value),className:"bg-transparent w-full focus:outline-none font-medium",autoComplete:"email"})]})]}),Q[H].allowBranding&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Studio / Business"}),e.jsxs("div",{className:"flex items-center px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-900",children:[e.jsx(Ns,{size:18,className:"mr-3 text-slate-400"}),e.jsx("input",{id:"edit-user-studio-input",name:"edit-user-studio",type:"text",value:we,onChange:s=>ye(s.target.value),className:"bg-transparent w-full focus:outline-none font-medium",placeholder:"No studio name",autoComplete:"organization"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"System Role"}),e.jsx("select",{value:Ce,onChange:s=>Ee(s.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white text-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none font-medium cursor-pointer",children:Object.values(b).map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Tier Plan"}),e.jsx("select",{value:H,onChange:s=>ke(s.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white text-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none font-medium cursor-pointer",children:Object.values(D).map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("button",{onClick:as,className:"w-full py-4 bg-black text-white rounded-xl font-bold hover:bg-slate-800 transition-all shadow-lg shadow-slate-200 flex items-center justify-center gap-2 mt-4",children:[e.jsx(Pe,{size:18}),"Save Changes"]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900",children:l("editEvent")}),e.jsx("button",{onClick:()=>$(null),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(W,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:l("eventTitle")}),e.jsx("input",{id:"edit-event-title-input",name:"edit-event-title",type:"text",value:he,onChange:s=>ue(s.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-900 focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none transition-all font-medium",autoComplete:"off"})]}),e.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-100",children:[e.jsxs("label",{className:"block text-xs font-bold text-amber-800 uppercase tracking-wider mb-3 flex items-center",children:[e.jsx(te,{size:16,className:"mr-2"})," ",l("modifyExpiration")]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("label",{className:"flex items-center p-3 bg-white rounded-xl border border-amber-100 cursor-pointer hover:border-amber-300 transition-all",children:[e.jsx("input",{type:"radio",name:"expiryType",checked:N==="unlimited",onChange:()=>T("unlimited"),className:"w-4 h-4 text-amber-600 border-slate-300 focus:ring-amber-500"}),e.jsx("span",{className:"ml-3 text-sm font-bold text-slate-900",children:l("unlimited")}),e.jsx("span",{className:"ml-auto text-xs text-amber-600 font-medium",children:l("neverExpires")})]}),e.jsxs("label",{className:"flex items-center p-3 bg-white rounded-xl border border-amber-100 cursor-pointer hover:border-amber-300 transition-all",children:[e.jsx("input",{type:"radio",name:"expiryType",checked:N==="immediate",onChange:()=>T("immediate"),className:"w-4 h-4 text-amber-600 border-slate-300 focus:ring-amber-500"}),e.jsx("span",{className:"ml-3 text-sm font-bold text-slate-900",children:l("expireImmediately")})]}),e.jsxs("label",{className:"flex items-center p-3 bg-white rounded-xl border border-amber-100 cursor-pointer hover:border-amber-300 transition-all",children:[e.jsx("input",{type:"radio",name:"expiryType",checked:N==="custom",onChange:()=>T("custom"),className:"w-4 h-4 text-amber-600 border-slate-300 focus:ring-amber-500"}),e.jsx("span",{className:"ml-3 text-sm font-bold text-slate-900",children:l("setNewDuration")})]})]}),N==="custom"&&e.jsxs("div",{className:"flex gap-2 animate-in fade-in slide-in-from-top-2",children:[e.jsx("input",{id:"edit-duration-value-input",name:"edit-duration-value",type:"number",min:"1",value:pe,onChange:s=>be(parseInt(s.target.value)||0),className:"w-1/3 px-4 py-3 border border-amber-200 rounded-xl text-sm font-bold text-slate-900 focus:ring-2 focus:ring-amber-500 outline-none",autoComplete:"off"}),e.jsxs("select",{value:q,onChange:s=>fe(s.target.value),className:"flex-1 px-4 py-3 border border-amber-200 rounded-xl text-sm font-bold text-slate-900 focus:ring-2 focus:ring-amber-500 outline-none bg-white cursor-pointer",children:[e.jsx("option",{value:"seconds",children:l("seconds")}),e.jsx("option",{value:"minutes",children:l("minutes")}),e.jsx("option",{value:"hours",children:l("hours")}),e.jsx("option",{value:"days",children:l("days")})]})]})]}),e.jsxs("button",{onClick:ts,className:"w-full py-4 bg-black text-white rounded-xl font-bold hover:bg-slate-800 transition-all flex items-center justify-center gap-2",children:[e.jsx(Pe,{size:18}),l("saveChanges")]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-6xl h-[90vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900",children:[l("managing"),": ",p.title]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-1",children:[p.media.length," ",l("mediaItems")," â€¢ ",l("totalMedia")]})]}),e.jsx("button",{onClick:()=>C(null),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:e.jsx(W,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:p.media.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(vs,{size:64,className:"mb-4 opacity-50"}),e.jsx("p",{className:"font-bold text-lg",children:l("noMedia")})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:p.media.map(s=>e.jsxs("div",{className:"relative group aspect-square bg-slate-200 rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all cursor-pointer border border-slate-200",onClick:()=>E(s),children:[s.type==="video"?e.jsx("video",{src:s.previewUrl||s.url,className:"w-full h-full object-cover",muted:!0}):e.jsx("img",{src:s.url,alt:"content",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2 backdrop-blur-[2px]",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-full backdrop-blur-md text-white hover:bg-white/40 transition-colors",children:e.jsx(ws,{size:20})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),es(p.id,s.id)},className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transform hover:scale-110 transition-all shadow-lg",children:e.jsx(w,{size:20})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/80 via-black/50 to-transparent",children:e.jsx("p",{className:"text-white text-xs font-medium truncate",children:s.uploaderName})})]},s.id))})})]})}),x&&e.jsxs("div",{className:"fixed inset-0 z-[70] bg-black/95 backdrop-blur-xl flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>E(null),children:[e.jsx("button",{className:"absolute top-6 right-6 text-white/70 hover:text-white p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all z-50",onClick:()=>E(null),children:e.jsx(W,{size:32})}),e.jsx("div",{className:"max-w-full max-h-full overflow-hidden flex items-center justify-center relative w-full h-full",onClick:s=>s.stopPropagation(),children:x.type==="video"?e.jsx("video",{src:x.url,controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-2xl shadow-2xl ring-1 ring-white/10"}):e.jsx("img",{src:x.url,alt:"preview",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl ring-1 ring-white/10"})}),e.jsxs("div",{className:"absolute bottom-10 left-0 right-0 text-center text-white pointer-events-none",children:[e.jsx("p",{className:"font-black text-xl drop-shadow-lg mb-1",children:x.caption||"No caption"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-white/60 font-medium",children:[e.jsx(Le,{size:14}),e.jsxs("span",{children:["Uploaded by ",x.uploaderName]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(x.uploadedAt).toLocaleDateString()})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden p-8 animate-in zoom-in-95",children:[e.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mb-6 mx-auto border border-red-100",children:g.type==="system"?e.jsx(le,{className:"text-red-600",size:32}):e.jsx(ae,{className:"text-red-600",size:32})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 text-center mb-3",children:g.title}),e.jsx("p",{className:"text-slate-500 text-center mb-8 text-sm leading-relaxed font-medium",children:g.message}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>z(null),className:"flex-1 py-3.5 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:ss,className:"flex-1 py-3.5 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-red-500/20",children:[e.jsx(w,{size:18}),"Delete"]})]})]})}),Ke&&o&&e.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden p-6 animate-in zoom-in-95",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(L,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Upgrade User"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Confirm upgrade for this user"})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsx("div",{className:"bg-slate-50 p-4 rounded-xl",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Full Name"}),e.jsx("p",{className:"text-slate-900 font-medium",children:o.userInfo?.name||"Anonymous User"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Email Address"}),e.jsx("p",{className:"text-slate-900 font-medium",children:o.userInfo?.email||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Requested Tier"}),e.jsx("p",{className:"text-slate-900 font-medium",children:o.tier})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Current Tier"}),e.jsx("p",{className:"text-slate-900 font-medium",children:o.userInfo?.currentTier||"FREE"})]}),!o.userInfo?.id&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"âš ï¸ Anonymous Request"}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"This user is not registered. You cannot upgrade anonymous users."})]})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{P(!1),F(null)},className:"flex-1 py-3 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:o.userInfo?.id?"Cancel":"Close"}),o.userInfo?.id?e.jsxs("button",{onClick:async()=>{try{await v.upgradeUser(o.userInfo.id,o.tier);const s=m.find(t=>t.id===o.userInfo.id);s&&ie({...s,tier:o.tier}),K(t=>t.filter(r=>r.id!==o.id)),P(!1),F(null),alert("User upgraded successfully!")}catch{alert("Failed to upgrade user. Please try again.")}},className:"flex-1 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(L,{size:16}),"Confirm Upgrade"]}):e.jsx("button",{onClick:()=>{P(!1),F(null)},className:"flex-1 py-3 bg-slate-500 text-white font-bold rounded-xl cursor-not-allowed flex items-center justify-center gap-2",disabled:!0,children:"Cannot Upgrade Anonymous User"})]})]})})]})};export{$s as AdminDashboard};
