import{_ as R}from"./auth-BXl3LOEh.js";import{r as u}from"./libs-CBAR_Xud.js";function g(o={}){const{immediate:a=!1,onNeedRefresh:l,onOfflineReady:d,onRegistered:f,onRegisteredSW:s,onRegisterError:n}=o;let t,r;const c=async(e=!0)=>{await r};async function i(){if("serviceWorker"in navigator){if(t=await R(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/sw.js",{scope:"/",type:"classic"})).catch(e=>{n?.(e)}),!t)return;t.addEventListener("activated",e=>{(e.isUpdate||e.isExternal)&&window.location.reload()}),t.addEventListener("installed",e=>{e.isUpdate||d?.()}),t.register({immediate:a}).then(e=>{s?s("/sw.js",e):f?.(e)}).catch(e=>{n?.(e)})}}return r=i(),c}function m(o={}){const{immediate:a=!0,onNeedRefresh:l,onOfflineReady:d,onRegistered:f,onRegisteredSW:s,onRegisterError:n}=o,[t,r]=u.useState(!1),[c,i]=u.useState(!1),[e]=u.useState(()=>g({immediate:a,onOfflineReady(){i(!0),d?.()},onNeedRefresh(){r(!0),l?.()},onRegistered:f,onRegisteredSW:s,onRegisterError:n}));return{needRefresh:[t,r],offlineReady:[c,i],updateServiceWorker:e}}export{m as u};
