import{B as c,j as e}from"./index-CC3WzsEc.js";import{R as k}from"./libs-CBAR_Xud.js";import"./vendor-BSeQcPOp.js";import"./auth-BXl3LOEh.js";import"./utils-D9li4S3w.js";const f={theme:"system",notifications:!0,language:"en",density:"comfortable",fontSize:"medium",colorScheme:"default",animations:!0,sidebarCollapsed:!1,betaNotifications:!0,betaFeaturePreviews:!0,betaFeedbackReminders:!0},b=class b{static getPreferences(){if(typeof window>"u")return f;const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):{...f}}static setPreferences(t){if(typeof window>"u")return f;const n={...this.getPreferences(),...t};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),n}static resetPreferences(){return typeof window<"u"&&localStorage.removeItem(this.STORAGE_KEY),{...f}}static applyThemePreferences(){if(typeof window>"u")return;const t=this.getPreferences();if(t.theme==="system"){const a=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",a)}else document.documentElement.classList.toggle("dark",t.theme==="dark");document.documentElement.classList.remove("density-comfortable","density-compact","density-cozy"),document.documentElement.classList.add(`density-${t.density}`),document.documentElement.classList.remove("font-small","font-medium","font-large"),document.documentElement.classList.add(`font-${t.fontSize}`)}static initialize(){this.applyThemePreferences(),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{this.getPreferences().theme==="system"&&document.documentElement.classList.toggle("dark",t.matches)})}};b.STORAGE_KEY="user_preferences";let l=b;const{useState:h,useEffect:B}=k,R=({currentUser:j,t,isAdmin:a=!1})=>{const[n,m]=h(c.getBetaConfig()),[u,g]=h(l.getPreferences()),[i,y]=h(!1);B(()=>{m(c.getBetaConfig()),g(l.getPreferences())},[]);const d=async s=>{if(a){y(!0);try{const r=c.updateBetaConfig(s);m(r)}catch(r){console.error("Failed to update beta config:",r)}finally{y(!1)}}},x=s=>{const r=l.setPreferences(s);g(r)},v=(s,r)=>{if(!a)return;const w=n.features.map(p=>p.id===s?{...p,enabled:r}:p);d({features:w})},N=()=>{!a||!confirm(t("confirmResetBeta")||"Are you sure you want to reset all beta testing data?")||(c.resetBetaTesting(),m(c.getBetaConfig()))},o=c.getBetaStats();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t("betaTestingStatus")||"Beta Testing Status"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.totalBetaUsers}),e.jsx("div",{className:"text-sm text-gray-600",children:t("betaUsers")||"Beta Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.activeFeatures}),e.jsx("div",{className:"text-sm text-gray-600",children:t("activeFeatures")||"Active Features"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.feedbackSubmitted}),e.jsx("div",{className:"text-sm text-gray-600",children:t("feedbackSubmitted")||"Feedback Submitted"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:o.version}),e.jsx("div",{className:"text-sm text-gray-600",children:t("currentVersion")||"Current Version"})]})]})]}),j&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t("betaPreferences")||"Beta Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:t("betaNotifications")||"Beta Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:t("betaNotificationsDesc")||"Receive notifications about new beta features"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.betaNotifications,onChange:s=>x({betaNotifications:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:t("betaFeaturePreviews")||"Feature Previews"}),e.jsx("p",{className:"text-xs text-gray-500",children:t("betaFeaturePreviewsDesc")||"Show previews of upcoming beta features"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.betaFeaturePreviews,onChange:s=>x({betaFeaturePreviews:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:t("betaFeedbackReminders")||"Feedback Reminders"}),e.jsx("p",{className:"text-xs text-gray-500",children:t("betaFeedbackRemindersDesc")||"Remind me to submit feedback on beta features"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.betaFeedbackReminders,onChange:s=>x({betaFeedbackReminders:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]}),a&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t("betaConfiguration")||"Beta Configuration"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:t("enableBetaTesting")||"Enable Beta Testing"}),e.jsx("p",{className:"text-xs text-gray-500",children:t("enableBetaTestingDesc")||"Allow users to access beta features"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n.enabled,onChange:s=>d({enabled:s.target.checked}),disabled:i,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("betaAccessCode")||"Beta Access Code"," (",t("optional")||"Optional",")"]}),e.jsx("input",{type:"text",value:n.betaAccessCode||"",onChange:s=>d({betaAccessCode:s.target.value||void 0}),disabled:i,placeholder:t("enterAccessCode")||"Enter access code",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("betaAccessCodeDesc")||"Leave empty to allow open beta access"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("maxBetaUsers")||"Maximum Beta Users"}),e.jsx("input",{type:"number",value:n.maxBetaUsers,onChange:s=>d({maxBetaUsers:parseInt(s.target.value)||1e3}),disabled:i,min:"1",max:"10000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:t("betaFeatures")||"Beta Features"}),e.jsx("div",{className:"space-y-3",children:n.features.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t("version")||"Version",": ",s.version," | ",t("roles")||"Roles",": ",s.userRoles.join(", ")]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:r=>v(s.id,r.target.checked),disabled:i,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]},s.id))})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:N,disabled:i,className:"px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors disabled:opacity-50",children:t("resetBetaData")||"Reset Beta Data"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:t("resetBetaDataDesc")||"This will clear all beta user access and feedback data"})]})]})]})]})};export{R as BetaSettings};
