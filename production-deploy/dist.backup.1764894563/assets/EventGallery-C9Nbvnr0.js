import{j as n,U as Ae,g as Vt,s as Fe,T as vs,b as yt}from"./index-CC3WzsEc.js";import{a as F,r as hn,X as ht,a4 as gn,a5 as pn,a6 as ws,a7 as ys,M as js,D as xn,c as bn,a8 as vn,a9 as Is,R as Ns,P as ks,aa as Wo,ab as Ts,i as mo,ac as Cs,ad as Ss,v as zs,ae as gt,af as Vo,x as $o,d as Ms,L as Rs,ag as Hs,ah as _o,a3 as qo,T as Es,ai as Ps,aj as wo,s as Ls,g as fo,u as Uo,a1 as wn,ak as Xo,al as Bs,am as Ds,an as As}from"./libs-CBAR_Xud.js";import{b as Fs}from"./charts-wSLNUq2w.js";import{Q as yn}from"./qrcode-DzOCcD1X.js";import{i as Yt,a as Os,b as Gs}from"./deviceDetection-DQJIv-ne.js";import"./vendor-BSeQcPOp.js";import"./auth-BXl3LOEh.js";import"./utils-D9li4S3w.js";const eo=0,Qe=1,xt=2,jn=4;function Yo(e){return()=>e}function Ws(e){e()}function Vs(e,t){return o=>e(t(o))}function Ko(e,t){return()=>e(t)}function $s(e,t){return o=>e(t,o)}function Co(e){return e!==void 0}function _s(...e){return()=>{e.map(Ws)}}function Mt(){}function to(e,t){return t(e),e}function qs(e,t){return t(e)}function ne(...e){return e}function Q(e,t){return e(Qe,t)}function W(e,t){e(eo,t)}function So(e){e(xt)}function le(e){return e(jn)}function E(e,t){return Q(e,$s(t,eo))}function Pe(e,t){const o=e(Qe,s=>{o(),t(s)});return o}function Qo(e){let t,o;return s=>r=>{t=r,o&&clearTimeout(o),o=setTimeout(()=>{s(t)},e)}}function In(e,t){return e===t}function oe(e=In){let t;return o=>s=>{e(t,s)||(t=s,o(s))}}function A(e){return t=>o=>{e(o)&&t(o)}}function R(e){return t=>Vs(t,e)}function Oe(e){return t=>()=>{t(e)}}function v(e,...t){const o=Us(...t);return(s,r)=>{switch(s){case xt:So(e);return;case Qe:return Q(e,o(r))}}}function Ge(e,t){return o=>s=>{o(t=e(t,s))}}function it(e){return t=>o=>{e>0?e--:t(o)}}function Xe(e){let t=null,o;return s=>r=>{t=r,!o&&(o=setTimeout(()=>{o=void 0,s(t)},e))}}function V(...e){const t=new Array(e.length);let o=0,s=null;const r=Math.pow(2,e.length)-1;return e.forEach((l,i)=>{const c=Math.pow(2,i);Q(l,d=>{const u=o;o=o|c,t[i]=d,u!==r&&o===r&&s&&(s(),s=null)})}),l=>i=>{const c=()=>{l([i].concat(t))};o===r?c():s=c}}function Us(...e){return t=>e.reduceRight(qs,t)}function Xs(e){let t,o;const s=()=>t?.();return function(r,l){switch(r){case Qe:return l?o===l?void 0:(s(),o=l,t=Q(e,l),t):(s(),Mt);case xt:s(),o=null;return}}}function I(e){let t=e;const o=q();return(s,r)=>{switch(s){case eo:t=r;break;case Qe:{r(t);break}case jn:return t}return o(s,r)}}function xe(e,t){return to(I(t),o=>E(e,o))}function q(){const e=[];return(t,o)=>{switch(t){case eo:e.slice().forEach(s=>{s(o)});return;case xt:e.splice(0,e.length);return;case Qe:return e.push(o),()=>{const s=e.indexOf(o);s>-1&&e.splice(s,1)}}}}function Te(e){return to(q(),t=>E(e,t))}function Y(e,t=[],{singleton:o}={singleton:!0}){return{constructor:e,dependencies:t,id:Ys(),singleton:o}}const Ys=()=>Symbol();function Ks(e){const t=new Map,o=({constructor:s,dependencies:r,id:l,singleton:i})=>{if(i&&t.has(l))return t.get(l);const c=s(r.map(d=>o(d)));return i&&t.set(l,c),c};return o(e)}function de(...e){const t=q(),o=new Array(e.length);let s=0;const r=Math.pow(2,e.length)-1;return e.forEach((l,i)=>{const c=Math.pow(2,i);Q(l,d=>{o[i]=d,s=s|c,s===r&&W(t,o)})}),function(l,i){switch(l){case xt:{So(t);return}case Qe:return s===r&&i(o),Q(t,i)}}}function D(e,t=In){return v(e,oe(t))}function yo(...e){return function(t,o){switch(t){case xt:return;case Qe:return _s(...e.map(s=>Q(s,o)))}}}var Me=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(Me||{});const Qs={0:"debug",3:"error",1:"log",2:"warn"},Js=()=>typeof globalThis>"u"?window:globalThis,Je=Y(()=>{const e=I(3);return{log:I((t,o,s=1)=>{var r;const l=(r=Js().VIRTUOSO_LOG_LEVEL)!=null?r:le(e);s>=l&&console[Qs[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,o)}),logLevel:e}},[],{singleton:!0});function oo(e,t,o){return Nn(e,t,o).callbackRef}function Nn(e,t,o){const s=F.useRef(null);let r=i=>{};const l=F.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(i=>{requestAnimationFrame(()=>{const d=i[0].target;d.offsetParent!==null&&e(d)})}):null,[e,o]);return r=i=>{i&&t?(l?.observe(i),s.current=i):(s.current&&l?.unobserve(s.current),s.current=null)},{callbackRef:r,ref:s}}function Zs(e,t,o){const s=F.useRef(null),r=F.useCallback(d=>{if(!(d!=null&&d.offsetParent))return;const u=d.getBoundingClientRect(),x=u.width;let j,w;if(t){const N=t.getBoundingClientRect(),C=u.top-N.top;w=N.height-Math.max(0,C),j=C+t.scrollTop}else{const N=i.current.ownerDocument.defaultView;w=N.innerHeight-Math.max(0,u.top),j=u.top+N.scrollY}s.current={offsetTop:j,visibleHeight:w,visibleWidth:x},e(s.current)},[e,t]),{callbackRef:l,ref:i}=Nn(r,!0,o),c=F.useCallback(()=>{r(i.current)},[r,i]);return F.useEffect(()=>{var d;if(t){t.addEventListener("scroll",c);const u=new ResizeObserver(()=>{requestAnimationFrame(c)});return u.observe(t),()=>{t.removeEventListener("scroll",c),u.unobserve(t)}}else{const u=(d=i.current)==null?void 0:d.ownerDocument.defaultView;return u?.addEventListener("scroll",c),u?.addEventListener("resize",c),()=>{u?.removeEventListener("scroll",c),u?.removeEventListener("resize",c)}}},[c,t,i]),l}const we=Y(()=>{const e=q(),t=q(),o=I(0),s=q(),r=I(0),l=q(),i=q(),c=I(0),d=I(0),u=I(0),x=I(0),j=q(),w=q(),N=I(!1),C=I(!1),b=I(!1);return E(v(e,R(({scrollTop:h})=>h)),t),E(v(e,R(({scrollHeight:h})=>h)),i),E(t,r),{deviation:o,fixedFooterHeight:u,fixedHeaderHeight:d,footerHeight:x,headerHeight:c,horizontalDirection:C,scrollBy:w,scrollContainerState:e,scrollHeight:i,scrollingInProgress:N,scrollTo:j,scrollTop:t,skipAnimationFrameInResizeObserver:b,smoothScrollTargetReached:s,statefulScrollTop:r,viewportHeight:l}},[],{singleton:!0}),Nt={lvl:0};function kn(e,t){const o=e.length;if(o===0)return[];let{index:s,value:r}=t(e[0]);const l=[];for(let i=1;i<o;i++){const{index:c,value:d}=t(e[i]);l.push({end:c-1,start:s,value:r}),s=c,r=d}return l.push({end:1/0,start:s,value:r}),l}function te(e){return e===Nt}function kt(e,t){if(!te(e))return t===e.k?e.v:t<e.k?kt(e.l,t):kt(e.r,t)}function Le(e,t,o="k"){if(te(e))return[-1/0,void 0];if(Number(e[o])===t)return[e.k,e.v];if(Number(e[o])<t){const s=Le(e.r,t,o);return s[0]===-1/0?[e.k,e.v]:s}return Le(e.l,t,o)}function ke(e,t,o){return te(e)?Sn(t,o,1):t===e.k?fe(e,{k:t,v:o}):t<e.k?Jo(fe(e,{l:ke(e.l,t,o)})):Jo(fe(e,{r:ke(e.r,t,o)}))}function pt(){return Nt}function no(e,t,o){if(te(e))return[];const s=Le(e,t)[0];return er(Io(e,s,o))}function jo(e,t){if(te(e))return Nt;const{k:o,l:s,r}=e;if(t===o){if(te(s))return r;if(te(r))return s;{const[l,i]=Cn(s);return qt(fe(e,{k:l,l:Tn(s),v:i}))}}else return t<o?qt(fe(e,{l:jo(s,t)})):qt(fe(e,{r:jo(r,t)}))}function lt(e){return te(e)?[]:[...lt(e.l),{k:e.k,v:e.v},...lt(e.r)]}function Io(e,t,o){if(te(e))return[];const{k:s,l:r,r:l,v:i}=e;let c=[];return s>t&&(c=c.concat(Io(r,t,o))),s>=t&&s<=o&&c.push({k:s,v:i}),s<=o&&(c=c.concat(Io(l,t,o))),c}function qt(e){const{l:t,lvl:o,r:s}=e;if(s.lvl>=o-1&&t.lvl>=o-1)return e;if(o>s.lvl+1){if(ho(t))return zn(fe(e,{lvl:o-1}));if(!te(t)&&!te(t.r))return fe(t.r,{l:fe(t,{r:t.r.l}),lvl:o,r:fe(e,{l:t.r.r,lvl:o-1})});throw new Error("Unexpected empty nodes")}else{if(ho(e))return No(fe(e,{lvl:o-1}));if(!te(s)&&!te(s.l)){const r=s.l,l=ho(r)?s.lvl-1:s.lvl;return fe(r,{l:fe(e,{lvl:o-1,r:r.l}),lvl:r.lvl+1,r:No(fe(s,{l:r.r,lvl:l}))})}else throw new Error("Unexpected empty nodes")}}function fe(e,t){return Sn(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function Tn(e){return te(e.r)?e.l:qt(fe(e,{r:Tn(e.r)}))}function ho(e){return te(e)||e.lvl>e.r.lvl}function Cn(e){return te(e.r)?[e.k,e.v]:Cn(e.r)}function Sn(e,t,o,s=Nt,r=Nt){return{k:e,l:s,lvl:o,r,v:t}}function Jo(e){return No(zn(e))}function zn(e){const{l:t}=e;return!te(t)&&t.lvl===e.lvl?fe(t,{r:fe(e,{l:t.r})}):e}function No(e){const{lvl:t,r:o}=e;return!te(o)&&!te(o.r)&&o.lvl===t&&o.r.lvl===t?fe(o,{l:fe(e,{r:o.l}),lvl:t+1}):e}function er(e){return kn(e,({k:t,v:o})=>({index:t,value:o}))}function Mn(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function Tt(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const zo=Y(()=>({recalcInProgress:I(!1)}),[],{singleton:!0});function Rn(e,t,o){return e[Kt(e,t,o)]}function Kt(e,t,o,s=0){let r=e.length-1;for(;s<=r;){const l=Math.floor((s+r)/2),i=e[l],c=o(i,t);if(c===0)return l;if(c===-1){if(r-s<2)return l-1;r=l-1}else{if(r===s)return l;s=l+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function tr(e,t,o,s){const r=Kt(e,t,s),l=Kt(e,o,s,r);return e.slice(r,l+1)}function Ct(e,t){return Math.round(e.getBoundingClientRect()[t])}function so(e){return!te(e.groupOffsetTree)}function Mo({index:e},t){return t===e?0:t<e?-1:1}function or(){return{groupIndices:[],groupOffsetTree:pt(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:pt()}}function nr(e,t){let o=te(e)?0:1/0;for(const s of t){const{endIndex:r,size:l,startIndex:i}=s;if(o=Math.min(o,i),te(e)){e=ke(e,0,l);continue}const c=no(e,i-1,r+1);if(c.some(dr(s)))continue;let d=!1,u=!1;for(const{end:x,start:j,value:w}of c)d?(r>=j||l===w)&&(e=jo(e,j)):(u=w!==l,d=!0),x>r&&r>=j&&w!==l&&(e=ke(e,r+1,w));u&&(e=ke(e,i,l))}return[e,o]}function sr(e){return typeof e.groupIndex<"u"}function rr({offset:e},t){return t===e?0:t<e?-1:1}function St(e,t,o){if(t.length===0)return 0;const{index:s,offset:r,size:l}=Rn(t,e,Mo),i=e-s,c=l*i+(i-1)*o+r;return c>0?c+o:c}function Hn(e,t){if(!so(t))return e;let o=0;for(;t.groupIndices[o]<=e+o;)o++;return e+o}function En(e,t,o){if(sr(e))return t.groupIndices[e.groupIndex]+1;{const s=e.index==="LAST"?o:e.index;let r=Hn(s,t);return r=Math.max(0,r,Math.min(o,r)),r}}function lr(e,t,o,s=0){return s>0&&(t=Math.max(t,Rn(e,s,Mo).offset)),kn(tr(e,t,o,rr),cr)}function ir(e,[t,o,s,r]){t.length>0&&s("received item sizes",t,Me.DEBUG);const l=e.sizeTree;let i=l,c=0;if(o.length>0&&te(l)&&t.length===2){const w=t[0].size,N=t[1].size;i=o.reduce((C,b)=>ke(ke(C,b,w),b+1,N),i)}else[i,c]=nr(i,t);if(i===l)return e;const{lastIndex:d,lastOffset:u,lastSize:x,offsetTree:j}=ko(e.offsetTree,c,i,r);return{groupIndices:o,groupOffsetTree:o.reduce((w,N)=>ke(w,N,St(N,j,r)),pt()),lastIndex:d,lastOffset:u,lastSize:x,offsetTree:j,sizeTree:i}}function ar(e){return lt(e).map(({k:t,v:o},s,r)=>{const l=r[s+1];return{endIndex:l?l.k-1:1/0,size:o,startIndex:t}})}function Zo(e,t){let o=0,s=0;for(;o<e;)o+=t[s+1]-t[s]-1,s++;return s-(o===e?0:1)}function ko(e,t,o,s){let r=e,l=0,i=0,c=0,d=0;if(t!==0){d=Kt(r,t-1,Mo),c=r[d].offset;const u=Le(o,t-1);l=u[0],i=u[1],r.length&&r[d].size===Le(o,t)[1]&&(d-=1),r=r.slice(0,d+1)}else r=[];for(const{start:u,value:x}of no(o,t,1/0)){const j=u-l,w=j*i+c+j*s;r.push({index:u,offset:w,size:x}),l=u,c=w,i=x}return{lastIndex:l,lastOffset:c,lastSize:i,offsetTree:r}}function cr(e){return{index:e.index,value:e}}function dr(e){const{endIndex:t,size:o,startIndex:s}=e;return r=>r.start===s&&(r.end===t||r.end===1/0)&&r.value===o}const ur={offsetHeight:"height",offsetWidth:"width"},We=Y(([{log:e},{recalcInProgress:t}])=>{const o=q(),s=q(),r=xe(s,0),l=q(),i=q(),c=I(0),d=I([]),u=I(void 0),x=I(void 0),j=I(void 0),w=I((a,g)=>Ct(a,ur[g])),N=I(void 0),C=I(0),b=or(),h=xe(v(o,V(d,e,C),Ge(ir,b),oe()),b),f=xe(v(d,oe(),Ge((a,g)=>({current:g,prev:a.current}),{current:[],prev:[]}),R(({prev:a})=>a)),[]);E(v(d,A(a=>a.length>0),V(h,C),R(([a,g,S])=>{const M=a.reduce((P,B,O)=>ke(P,B,St(B,g.offsetTree,S)||O),pt());return{...g,groupIndices:a,groupOffsetTree:M}})),h),E(v(s,V(h),A(([a,{lastIndex:g}])=>a<g),R(([a,{lastIndex:g,lastSize:S}])=>[{endIndex:g,size:S,startIndex:a}])),o),E(u,x);const m=xe(v(u,R(a=>a===void 0)),!0);E(v(x,A(a=>a!==void 0&&te(le(h).sizeTree)),R(a=>{const g=le(j),S=le(d).length>0;return g?S?[{endIndex:0,size:g,startIndex:0},{endIndex:1,size:a,startIndex:1}]:[]:[{endIndex:0,size:a,startIndex:0}]})),o),E(v(d,V(j,x),A(([,a,g])=>a!==void 0&&g!==void 0),R(([a,g,S])=>{const M=[];for(let P=0;P<a.length;P++){const B=a[P],O=a[P+1];M.push({startIndex:B,endIndex:B,size:g}),O!==void 0&&M.push({startIndex:B+1,endIndex:O-1,size:S})}return M})),o);const T=Te(v(o,V(h),Ge(({sizes:a},[g,S])=>({changed:S!==a,sizes:S}),{changed:!1,sizes:b}),R(a=>a.changed)));Q(v(c,Ge((a,g)=>({diff:a.prev-g,prev:g}),{diff:0,prev:0}),R(a=>a.diff)),a=>{const{groupIndices:g}=le(h);if(a>0)W(t,!0),W(l,a+Zo(a,g));else if(a<0){const S=le(f);S.length>0&&(a-=Zo(-a,S)),W(i,a)}}),Q(v(c,V(e)),([a,g])=>{a<0&&g("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:c},Me.ERROR)});const H=Te(l);E(v(l,V(h),R(([a,g])=>{const S=g.groupIndices.length>0,M=[],P=g.lastSize;if(S){const B=kt(g.sizeTree,0);let O=0,J=0;for(;O<a;){const $=g.groupIndices[J],ie=g.groupIndices.length===J+1?1/0:g.groupIndices[J+1]-$-1;M.push({endIndex:$,size:B,startIndex:$}),M.push({endIndex:$+1+ie-1,size:P,startIndex:$+1}),J++,O+=ie+1}const K=lt(g.sizeTree);return O!==a&&K.shift(),K.reduce(($,{k:ie,v:ye})=>{let ae=$.ranges;return $.prevSize!==0&&(ae=[...$.ranges,{endIndex:ie+a-1,size:$.prevSize,startIndex:$.prevIndex}]),{prevIndex:ie+a,prevSize:ye,ranges:ae}},{prevIndex:a,prevSize:0,ranges:M}).ranges}return lt(g.sizeTree).reduce((B,{k:O,v:J})=>({prevIndex:O+a,prevSize:J,ranges:[...B.ranges,{endIndex:O+a-1,size:B.prevSize,startIndex:B.prevIndex}]}),{prevIndex:0,prevSize:P,ranges:[]}).ranges})),o);const z=Te(v(i,V(h,C),R(([a,{offsetTree:g},S])=>{const M=-a;return St(M,g,S)})));return E(v(i,V(h,C),R(([a,g,S])=>{if(g.groupIndices.length>0){if(te(g.sizeTree))return g;let M=pt();const P=le(f);let B=0,O=0,J=0;for(;B<-a;){J=P[O];const K=P[O+1]-J-1;O++,B+=K+1}if(M=lt(g.sizeTree).reduce((K,{k:$,v:ie})=>ke(K,Math.max(0,$+a),ie),M),B!==-a){const K=kt(g.sizeTree,J);M=ke(M,0,K);const $=Le(g.sizeTree,-a+1)[1];M=ke(M,1,$)}return{...g,sizeTree:M,...ko(g.offsetTree,0,M,S)}}else{const M=lt(g.sizeTree).reduce((P,{k:B,v:O})=>ke(P,Math.max(0,B+a),O),pt());return{...g,sizeTree:M,...ko(g.offsetTree,0,M,S)}}})),h),{beforeUnshiftWith:H,data:N,defaultItemSize:x,firstItemIndex:c,fixedItemSize:u,fixedGroupSize:j,gap:C,groupIndices:d,itemSize:w,listRefresh:T,shiftWith:i,shiftWithOffset:z,sizeRanges:o,sizes:h,statefulTotalCount:r,totalCount:s,trackItemSizes:m,unshiftWith:l}},ne(Je,zo),{singleton:!0});function mr(e){return e.reduce((t,o)=>(t.groupIndices.push(t.totalCount),t.totalCount+=o+1,t),{groupIndices:[],totalCount:0})}const Pn=Y(([{groupIndices:e,sizes:t,totalCount:o},{headerHeight:s,scrollTop:r}])=>{const l=q(),i=q(),c=Te(v(l,R(mr)));return E(v(c,R(d=>d.totalCount)),o),E(v(c,R(d=>d.groupIndices)),e),E(v(de(r,t,s),A(([d,u])=>so(u)),R(([d,u,x])=>Le(u.groupOffsetTree,Math.max(d-x,0),"v")[0]),oe(),R(d=>[d])),i),{groupCounts:l,topItemsIndexes:i}},ne(We,we)),Ze=Y(([{log:e}])=>{const t=I(!1),o=Te(v(t,A(s=>s),oe()));return Q(t,s=>{s&&le(e)("props updated",{},Me.DEBUG)}),{didMount:o,propsReady:t}},ne(Je),{singleton:!0}),fr=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function Ln(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!fr)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const Rt=Y(([{gap:e,listRefresh:t,sizes:o,totalCount:s},{fixedFooterHeight:r,fixedHeaderHeight:l,footerHeight:i,headerHeight:c,scrollingInProgress:d,scrollTo:u,smoothScrollTargetReached:x,viewportHeight:j},{log:w}])=>{const N=q(),C=q(),b=I(0);let h=null,f=null,m=null;function T(){h&&(h(),h=null),m&&(m(),m=null),f&&(clearTimeout(f),f=null),W(d,!1)}return E(v(N,V(o,j,s,b,c,i,w),V(e,l,r),R(([[H,z,a,g,S,M,P,B],O,J,K])=>{const $=Ln(H),{align:ie,behavior:ye,offset:ae}=$,be=g-1,ue=En($,z,be);let ce=St(ue,z.offsetTree,O)+M;ie==="end"?(ce+=J+Le(z.sizeTree,ue)[1]-a+K,ue===be&&(ce+=P)):ie==="center"?ce+=(J+Le(z.sizeTree,ue)[1]-a+K)/2:ce-=S,ae&&(ce+=ae);const Ve=je=>{T(),je?(B("retrying to scroll to",{location:H},Me.DEBUG),W(N,H)):(W(C,!0),B("list did not change, scroll successful",{},Me.DEBUG))};if(T(),ye==="smooth"){let je=!1;m=Q(t,et=>{je=je||et}),h=Pe(x,()=>{Ve(je)})}else h=Pe(v(t,hr(150)),Ve);return f=setTimeout(()=>{T()},1200),W(d,!0),B("scrolling from index to",{behavior:ye,index:ue,top:ce},Me.DEBUG),{behavior:ye,top:ce}})),u),{scrollTargetReached:C,scrollToIndex:N,topListHeight:b}},ne(We,we,Je),{singleton:!0});function hr(e){return t=>{const o=setTimeout(()=>{t(!1)},e);return s=>{s&&(t(!0),clearTimeout(o))}}}function Ro(e,t){e==0?t():requestAnimationFrame(()=>{Ro(e-1,t)})}function Ho(e,t){const o=t-1;return typeof e=="number"?e:e.index==="LAST"?o:e.index}const Ht=Y(([{defaultItemSize:e,listRefresh:t,sizes:o},{scrollTop:s},{scrollTargetReached:r,scrollToIndex:l},{didMount:i}])=>{const c=I(!0),d=I(0),u=I(!0);return E(v(i,V(d),A(([x,j])=>!!j),Oe(!1)),c),E(v(i,V(d),A(([x,j])=>!!j),Oe(!1)),u),Q(v(de(t,i),V(c,o,e,u),A(([[,x],j,{sizeTree:w},N,C])=>x&&(!te(w)||Co(N))&&!j&&!C),V(d)),([,x])=>{Pe(r,()=>{W(u,!0)}),Ro(4,()=>{Pe(s,()=>{W(c,!0)}),W(l,x)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:d,scrolledToInitialItem:c}},ne(We,we,Rt,Ze),{singleton:!0});function Bn(e,t){return Math.abs(e-t)<1.01}const zt="up",jt="down",gr="none",pr={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},xr=0,Et=Y(([{footerHeight:e,headerHeight:t,scrollBy:o,scrollContainerState:s,scrollTop:r,viewportHeight:l}])=>{const i=I(!1),c=I(!0),d=q(),u=q(),x=I(4),j=I(xr),w=xe(v(yo(v(D(r),it(1),Oe(!0)),v(D(r),it(1),Oe(!1),Qo(100))),oe()),!1),N=xe(v(yo(v(o,Oe(!0)),v(o,Oe(!1),Qo(200))),oe()),!1);E(v(de(D(r),D(j)),R(([m,T])=>m<=T),oe()),c),E(v(c,Xe(50)),u);const C=Te(v(de(s,D(l),D(t),D(e),D(x)),Ge((m,[{scrollHeight:T,scrollTop:H},z,a,g,S])=>{const M=H+z-T>-S,P={scrollHeight:T,scrollTop:H,viewportHeight:z};if(M){let O,J;return H>m.state.scrollTop?(O="SCROLLED_DOWN",J=m.state.scrollTop-H):(O="SIZE_DECREASED",J=m.state.scrollTop-H||m.scrollTopDelta),{atBottom:!0,atBottomBecause:O,scrollTopDelta:J,state:P}}let B;return P.scrollHeight>m.state.scrollHeight?B="SIZE_INCREASED":z<m.state.viewportHeight?B="VIEWPORT_HEIGHT_DECREASING":H<m.state.scrollTop?B="SCROLLING_UPWARDS":B="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:B,state:P}},pr),oe((m,T)=>m&&m.atBottom===T.atBottom))),b=xe(v(s,Ge((m,{scrollHeight:T,scrollTop:H,viewportHeight:z})=>{if(Bn(m.scrollHeight,T))return{changed:!1,jump:0,scrollHeight:T,scrollTop:H};{const a=T-(H+z)<1;return m.scrollTop!==H&&a?{changed:!0,jump:m.scrollTop-H,scrollHeight:T,scrollTop:H}:{changed:!0,jump:0,scrollHeight:T,scrollTop:H}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),A(m=>m.changed),R(m=>m.jump)),0);E(v(C,R(m=>m.atBottom)),i),E(v(i,Xe(50)),d);const h=I(jt);E(v(s,R(({scrollTop:m})=>m),oe(),Ge((m,T)=>le(N)?{direction:m.direction,prevScrollTop:T}:{direction:T<m.prevScrollTop?zt:jt,prevScrollTop:T},{direction:jt,prevScrollTop:0}),R(m=>m.direction)),h),E(v(s,Xe(50),Oe(gr)),h);const f=I(0);return E(v(w,A(m=>!m),Oe(0)),f),E(v(r,Xe(100),V(w),A(([m,T])=>!!T),Ge(([m,T],[H])=>[T,H],[0,0]),R(([m,T])=>T-m)),f),{atBottomState:C,atBottomStateChange:d,atBottomThreshold:x,atTopStateChange:u,atTopThreshold:j,isAtBottom:i,isAtTop:c,isScrolling:w,lastJumpDueToItemResize:b,scrollDirection:h,scrollVelocity:f}},ne(we)),Qt="top",Jt="bottom",en="none";function tn(e,t,o){return typeof e=="number"?o===zt&&t===Qt||o===jt&&t===Jt?e:0:o===zt?t===Qt?e.main:e.reverse:t===Jt?e.main:e.reverse}function on(e,t){var o;return typeof e=="number"?e:(o=e[t])!=null?o:0}const Eo=Y(([{deviation:e,fixedHeaderHeight:t,headerHeight:o,scrollTop:s,viewportHeight:r}])=>{const l=q(),i=I(0),c=I(0),d=I(0),u=xe(v(de(D(s),D(r),D(o),D(l,Tt),D(d),D(i),D(t),D(e),D(c)),R(([x,j,w,[N,C],b,h,f,m,T])=>{const H=x-m,z=h+f,a=Math.max(w-H,0);let g=en;const S=on(T,Qt),M=on(T,Jt);return N-=m,N+=w+f,C+=w+f,C-=m,N>x+z-S&&(g=zt),C<x-a+j+M&&(g=jt),g!==en?[Math.max(H-w-tn(b,Qt,g)-S,0),H-a-f+j+tn(b,Jt,g)+M]:null}),A(x=>x!=null),oe(Tt)),[0,0]);return{increaseViewportBy:c,listBoundary:l,overscan:d,topListHeight:i,visibleRange:u}},ne(we),{singleton:!0});function br(e,t,o){if(so(t)){const s=Hn(e,t);return[{index:Le(t.groupOffsetTree,s)[0],offset:0,size:0},{data:o?.[0],index:s,offset:0,size:0}]}return[{data:o?.[0],index:e,offset:0,size:0}]}const go={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function Ut(e,t,o,s,r,l){const{lastIndex:i,lastOffset:c,lastSize:d}=r;let u=0,x=0;if(e.length>0){u=e[0].offset;const b=e[e.length-1];x=b.offset+b.size}const j=o-i,w=c+j*d+(j-1)*s,N=u,C=w-x;return{bottom:x,firstItemIndex:l,items:nn(e,r,l),offsetBottom:C,offsetTop:u,top:N,topItems:nn(t,r,l),topListHeight:t.reduce((b,h)=>h.size+b,0),totalCount:o}}function Dn(e,t,o,s,r,l){let i=0;if(o.groupIndices.length>0)for(const x of o.groupIndices){if(x-i>=e)break;i++}const c=e+i,d=Ho(t,c),u=Array.from({length:c}).map((x,j)=>({data:l[j+d],index:j+d,offset:0,size:0}));return Ut(u,[],c,r,o,s)}function nn(e,t,o){if(e.length===0)return[];if(!so(t))return e.map(u=>({...u,index:u.index+o,originalIndex:u.index}));const s=e[0].index,r=e[e.length-1].index,l=[],i=no(t.groupOffsetTree,s,r);let c,d=0;for(const u of e){(!c||c.end<u.index)&&(c=i.shift(),d=t.groupIndices.indexOf(c.start));let x;u.index===c.start?x={index:d,type:"group"}:x={groupIndex:d,index:u.index-(d+1)+o},l.push({...x,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return l}const at=Y(([{data:e,firstItemIndex:t,gap:o,sizes:s,totalCount:r},l,{listBoundary:i,topListHeight:c,visibleRange:d},{initialTopMostItemIndex:u,scrolledToInitialItem:x},{topListHeight:j},w,{didMount:N},{recalcInProgress:C}])=>{const b=I([]),h=I(0),f=q();E(l.topItemsIndexes,b);const m=xe(v(de(N,C,D(d,Tt),D(r),D(s),D(u),x,D(b),D(t),D(o),e),A(([a,g,,S,,,,,,,M])=>{const P=M&&M.length!==S;return a&&!g&&!P}),R(([,,[a,g],S,M,P,B,O,J,K,$])=>{const ie=M,{offsetTree:ye,sizeTree:ae}=ie,be=le(h);if(S===0)return{...go,totalCount:S};if(a===0&&g===0)return be===0?{...go,totalCount:S}:Dn(be,P,M,J,K,$||[]);if(te(ae))return be>0?null:Ut(br(Ho(P,S),ie,$),[],S,K,ie,J);const ue=[];if(O.length>0){const Be=O[0],pe=O[O.length-1];let Ie=0;for(const k of no(ae,Be,pe)){const G=k.value,Z=Math.max(k.start,Be),me=Math.min(k.end,pe);for(let se=Z;se<=me;se++)ue.push({data:$?.[se],index:se,offset:Ie,size:G}),Ie+=G}}if(!B)return Ut([],ue,S,K,ie,J);const ce=O.length>0?O[O.length-1]+1:0,Ve=lr(ye,a,g,ce);if(Ve.length===0)return null;const je=S-1,et=to([],Be=>{for(const pe of Ve){const Ie=pe.value;let k=Ie.offset,G=pe.start;const Z=Ie.size;if(Ie.offset<a){G+=Math.floor((a-Ie.offset+K)/(Z+K));const se=G-pe.start;k+=se*Z+se*K}G<ce&&(k+=(ce-G)*Z,G=ce);const me=Math.min(pe.end,je);for(let se=G;se<=me&&!(k>=g);se++)Be.push({data:$?.[se],index:se,offset:k,size:Z}),k+=Z+K}});return Ut(et,ue,S,K,ie,J)}),A(a=>a!==null),oe()),go);E(v(e,A(Co),R(a=>a?.length)),r),E(v(m,R(a=>a.topListHeight)),j),E(j,c),E(v(m,R(a=>[a.top,a.bottom])),i),E(v(m,R(a=>a.items)),f);const T=Te(v(m,A(({items:a})=>a.length>0),V(r,e),A(([{items:a},g])=>a[a.length-1].originalIndex===g-1),R(([,a,g])=>[a-1,g]),oe(Tt),R(([a])=>a))),H=Te(v(m,Xe(200),A(({items:a,topItems:g})=>a.length>0&&a[0].originalIndex===g.length),R(({items:a})=>a[0].index),oe())),z=Te(v(m,A(({items:a})=>a.length>0),R(({items:a})=>{let g=0,S=a.length-1;for(;a[g].type==="group"&&g<S;)g++;for(;a[S].type==="group"&&S>g;)S--;return{endIndex:a[S].index,startIndex:a[g].index}}),oe(Mn)));return{endReached:T,initialItemCount:h,itemsRendered:f,listState:m,rangeChanged:z,startReached:H,topItemsIndexes:b,...w}},ne(We,Pn,Eo,Ht,Rt,Et,Ze,zo),{singleton:!0}),An=Y(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:o,headerHeight:s},{listState:r}])=>{const l=q(),i=xe(v(de(o,e,s,t,r),R(([c,d,u,x,j])=>c+d+u+x+j.offsetBottom+j.bottom)),0);return E(D(i),l),{totalListHeight:i,totalListHeightChanged:l}},ne(we,at),{singleton:!0}),vr=Y(([{viewportHeight:e},{totalListHeight:t}])=>{const o=I(!1),s=xe(v(de(o,e,t),A(([r])=>r),R(([,r,l])=>Math.max(0,r-l)),Xe(0),oe()),0);return{alignToBottom:o,paddingTopAddition:s}},ne(we,An),{singleton:!0}),Fn=Y(()=>({context:I(null)})),wr=({itemBottom:e,itemTop:t,locationParams:{align:o,behavior:s,...r},viewportBottom:l,viewportTop:i})=>t<i?{...r,align:o??"start",behavior:s}:e>l?{...r,align:o??"end",behavior:s}:null,On=Y(([{gap:e,sizes:t,totalCount:o},{fixedFooterHeight:s,fixedHeaderHeight:r,headerHeight:l,scrollingInProgress:i,scrollTop:c,viewportHeight:d},{scrollToIndex:u}])=>{const x=q();return E(v(x,V(t,d,o,l,r,s,c),V(e),R(([[j,w,N,C,b,h,f,m],T])=>{const{align:H,behavior:z,calculateViewLocation:a=wr,done:g,...S}=j,M=En(j,w,C-1),P=St(M,w.offsetTree,T)+b+h,B=P+Le(w.sizeTree,M)[1],O=m+h,J=m+N-f,K=a({itemBottom:B,itemTop:P,locationParams:{align:H,behavior:z,...S},viewportBottom:J,viewportTop:O});return K?g&&Pe(v(i,A($=>!$),it(le(i)?1:2)),g):g&&g(),K}),A(j=>j!==null)),u),{scrollIntoView:x}},ne(We,we,Rt,at,Je),{singleton:!0});function sn(e){return e?e==="smooth"?"smooth":"auto":!1}const yr=(e,t)=>typeof e=="function"?sn(e(t)):t&&sn(e),jr=Y(([{listRefresh:e,totalCount:t,fixedItemSize:o,data:s},{atBottomState:r,isAtBottom:l},{scrollToIndex:i},{scrolledToInitialItem:c},{didMount:d,propsReady:u},{log:x},{scrollingInProgress:j},{context:w},{scrollIntoView:N}])=>{const C=I(!1),b=q();let h=null;function f(z){W(i,{align:"end",behavior:z,index:"LAST"})}Q(v(de(v(D(t),it(1)),d),V(D(C),l,c,j),R(([[z,a],g,S,M,P])=>{let B=a&&M,O="auto";return B&&(O=yr(g,S||P),B=B&&!!O),{followOutputBehavior:O,shouldFollow:B,totalCount:z}}),A(({shouldFollow:z})=>z)),({followOutputBehavior:z,totalCount:a})=>{h&&(h(),h=null),le(o)?requestAnimationFrame(()=>{le(x)("following output to ",{totalCount:a},Me.DEBUG),f(z)}):h=Pe(e,()=>{le(x)("following output to ",{totalCount:a},Me.DEBUG),f(z),h=null})});function m(z){const a=Pe(r,g=>{z&&!g.atBottom&&g.notAtBottomBecause==="SIZE_INCREASED"&&!h&&(le(x)("scrolling to bottom due to increased size",{},Me.DEBUG),f("auto"))});setTimeout(a,100)}Q(v(de(D(C),t,u),A(([z,,a])=>z&&a),Ge(({value:z},[,a])=>({refreshed:z===a,value:a}),{refreshed:!1,value:0}),A(({refreshed:z})=>z),V(C,t)),([,z])=>{le(c)&&m(z!==!1)}),Q(b,()=>{m(le(C)!==!1)}),Q(de(D(C),r),([z,a])=>{z&&!a.atBottom&&a.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&f("auto")});const T=I(null),H=q();return E(yo(v(D(s),R(z=>{var a;return(a=z?.length)!=null?a:0})),v(D(t))),H),Q(v(de(v(H,it(1)),d),V(D(T),c,j,w),R(([[z,a],g,S,M,P])=>a&&S&&g?.({context:P,totalCount:z,scrollingInProgress:M})),A(z=>!!z),Xe(0)),z=>{h&&(h(),h=null),le(o)?requestAnimationFrame(()=>{le(x)("scrolling into view",{}),W(N,z)}):h=Pe(e,()=>{le(x)("scrolling into view",{}),W(N,z),h=null})}),{autoscrollToBottom:b,followOutput:C,scrollIntoViewOnChange:T}},ne(We,Et,Rt,Ht,Ze,Je,we,Fn,On)),Ir=Y(([{data:e,firstItemIndex:t,gap:o,sizes:s},{initialTopMostItemIndex:r},{initialItemCount:l,listState:i},{didMount:c}])=>(E(v(c,V(l),A(([,d])=>d!==0),V(r,s,t,o,e),R(([[,d],u,x,j,w,N=[]])=>Dn(d,u,x,j,w,N))),i),{}),ne(We,Ht,at,Ze),{singleton:!0}),Nr=Y(([{didMount:e},{scrollTo:t},{listState:o}])=>{const s=I(0);return Q(v(e,V(s),A(([,r])=>r!==0),R(([,r])=>({top:r}))),r=>{Pe(v(o,it(1),A(l=>l.items.length>1)),()=>{requestAnimationFrame(()=>{W(t,r)})})}),{initialScrollTop:s}},ne(Ze,we,at),{singleton:!0}),Gn=Y(([{scrollVelocity:e}])=>{const t=I(!1),o=q(),s=I(!1);return E(v(e,V(s,t,o),A(([r,l])=>!!l),R(([r,l,i,c])=>{const{enter:d,exit:u}=l;if(i){if(u(r,c))return!1}else if(d(r,c))return!0;return i}),oe()),t),Q(v(de(t,e,o),V(s)),([[r,l,i],c])=>{r&&c&&c.change&&c.change(l,i)}),{isSeeking:t,scrollSeekConfiguration:s,scrollSeekRangeChanged:o,scrollVelocity:e}},ne(Et),{singleton:!0}),Po=Y(([{scrollContainerState:e,scrollTo:t}])=>{const o=q(),s=q(),r=q(),l=I(!1),i=I(void 0);return E(v(de(o,s),R(([{scrollHeight:c,scrollTop:d,viewportHeight:u},{offsetTop:x}])=>({scrollHeight:c,scrollTop:Math.max(0,d-x),viewportHeight:u}))),e),E(v(t,V(s),R(([c,{offsetTop:d}])=>({...c,top:c.top+d}))),r),{customScrollParent:i,useWindowScroll:l,windowScrollContainerState:o,windowScrollTo:r,windowViewportRect:s}},ne(we)),kr=Y(([{sizeRanges:e,sizes:t},{headerHeight:o,scrollTop:s},{initialTopMostItemIndex:r},{didMount:l},{useWindowScroll:i,windowScrollContainerState:c,windowViewportRect:d}])=>{const u=q(),x=I(void 0),j=I(null),w=I(null);return E(c,j),E(d,w),Q(v(u,V(t,s,i,j,w,o)),([N,C,b,h,f,m,T])=>{const H=ar(C.sizeTree);h&&f!==null&&m!==null&&(b=f.scrollTop-m.offsetTop),b-=T,N({ranges:H,scrollTop:b})}),E(v(x,A(Co),R(Tr)),r),E(v(l,V(x),A(([,N])=>N!==void 0),oe(),R(([,N])=>N.ranges)),e),{getState:u,restoreStateFrom:x}},ne(We,we,Ht,Ze,Po));function Tr(e){return{align:"start",index:0,offset:e.scrollTop}}const Cr=Y(([{topItemsIndexes:e}])=>{const t=I(0);return E(v(t,A(o=>o>=0),R(o=>Array.from({length:o}).map((s,r)=>r))),e),{topItemCount:t}},ne(at));function Wn(e){let t=!1,o;return()=>(t||(t=!0,o=e()),o)}const Sr=Wn(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),zr=Y(([{deviation:e,scrollBy:t,scrollingInProgress:o,scrollTop:s},{isAtBottom:r,isScrolling:l,lastJumpDueToItemResize:i,scrollDirection:c},{listState:d},{beforeUnshiftWith:u,gap:x,shiftWithOffset:j,sizes:w},{log:N},{recalcInProgress:C}])=>{const b=Te(v(d,V(i),Ge(([,f,m,T],[{bottom:H,items:z,offsetBottom:a,totalCount:g},S])=>{const M=H+a;let P=0;return m===g&&f.length>0&&z.length>0&&(z[0].originalIndex===0&&f[0].originalIndex===0||(P=M-T,P!==0&&(P+=S))),[P,z,g,M]},[0,[],0,0]),A(([f])=>f!==0),V(s,c,o,r,N,C),A(([,f,m,T,,,H])=>!H&&!T&&f!==0&&m===zt),R(([[f],,,,,m])=>(m("Upward scrolling compensation",{amount:f},Me.DEBUG),f))));function h(f){f>0?(W(t,{behavior:"auto",top:-f}),W(e,0)):(W(e,0),W(t,{behavior:"auto",top:-f}))}return Q(v(b,V(e,l)),([f,m,T])=>{T&&Sr()?W(e,m-f):h(-f)}),Q(v(de(xe(l,!1),e,C),A(([f,m,T])=>!f&&!T&&m!==0),R(([f,m])=>m),Xe(1)),h),E(v(j,R(f=>({top:-f}))),t),Q(v(u,V(w,x),R(([f,{groupIndices:m,lastSize:T,sizeTree:H},z])=>{function a(g){return g*(T+z)}if(m.length===0)return a(f);{let g=0;const S=kt(H,0);let M=0,P=0;for(;M<f;){M++,g+=S;let B=m.length===P+1?1/0:m[P+1]-m[P]-1;M+B>f&&(g-=S,B=f-M+1),M+=B,g+=a(B),P++}return g}})),f=>{W(e,f),requestAnimationFrame(()=>{W(t,{top:f}),requestAnimationFrame(()=>{W(e,0),W(C,!1)})})}),{deviation:e}},ne(we,Et,at,We,Je,zo)),Mr=Y(([e,t,o,s,r,l,i,c,d,u,x])=>({...e,...t,...o,...s,...r,...l,...i,...c,...d,...u,...x}),ne(Eo,Ir,Ze,Gn,An,Nr,vr,Po,On,Je,Fn)),Vn=Y(([{data:e,defaultItemSize:t,firstItemIndex:o,fixedItemSize:s,fixedGroupSize:r,gap:l,groupIndices:i,itemSize:c,sizeRanges:d,sizes:u,statefulTotalCount:x,totalCount:j,trackItemSizes:w},{initialItemFinalLocationReached:N,initialTopMostItemIndex:C,scrolledToInitialItem:b},h,f,m,{listState:T,topItemsIndexes:H,...z},{scrollToIndex:a},g,{topItemCount:S},{groupCounts:M},P])=>(E(z.rangeChanged,P.scrollSeekRangeChanged),E(v(P.windowViewportRect,R(B=>B.visibleHeight)),h.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:o,fixedItemHeight:s,fixedGroupHeight:r,gap:l,groupCounts:M,initialItemFinalLocationReached:N,initialTopMostItemIndex:C,scrolledToInitialItem:b,sizeRanges:d,topItemCount:S,topItemsIndexes:H,totalCount:j,...m,groupIndices:i,itemSize:c,listState:T,scrollToIndex:a,statefulTotalCount:x,trackItemSizes:w,...z,...P,...h,sizes:u,...f}),ne(We,Ht,we,kr,jr,at,Rt,zr,Cr,Pn,Mr));function Rr(e,t){const o={},s={};let r=0;const l=e.length;for(;r<l;)s[e[r]]=1,r+=1;for(const i in t)Object.hasOwn(s,i)||(o[i]=t[i]);return o}const $t=typeof document<"u"?F.useLayoutEffect:F.useEffect;function Hr(e,t,o){const s=Object.keys(t.required||{}),r=Object.keys(t.optional||{}),l=Object.keys(t.methods||{}),i=Object.keys(t.events||{}),c=F.createContext({});function d(h,f){h.propsReady&&W(h.propsReady,!1);for(const m of s){const T=h[t.required[m]];W(T,f[m])}for(const m of r)if(m in f){const T=h[t.optional[m]];W(T,f[m])}h.propsReady&&W(h.propsReady,!0)}function u(h){return l.reduce((f,m)=>(f[m]=T=>{const H=h[t.methods[m]];W(H,T)},f),{})}function x(h){return i.reduce((f,m)=>(f[m]=Xs(h[t.events[m]]),f),{})}const j=F.forwardRef((h,f)=>{const{children:m,...T}=h,[H]=F.useState(()=>to(Ks(e),g=>{d(g,T)})),[z]=F.useState(Ko(x,H));$t(()=>{for(const g of i)g in T&&Q(z[g],T[g]);return()=>{Object.values(z).map(So)}},[T,z,H]),$t(()=>{d(H,T)}),F.useImperativeHandle(f,Yo(u(H)));const a=o;return n.jsx(c.Provider,{value:H,children:o?n.jsx(a,{...Rr([...s,...r,...i],T),children:m}):m})}),w=h=>{const f=F.useContext(c);return F.useCallback(m=>{W(f[h],m)},[f,h])},N=h=>{const f=F.useContext(c)[h],m=F.useCallback(T=>Q(f,T),[f]);return F.useSyncExternalStore(m,()=>le(f),()=>le(f))},C=h=>{const f=F.useContext(c)[h],[m,T]=F.useState(Ko(le,f));return $t(()=>Q(f,H=>{H!==m&&T(Yo(H))}),[f,m]),m},b=F.version.startsWith("18")?N:C;return{Component:j,useEmitter:(h,f)=>{const m=F.useContext(c)[h];$t(()=>Q(m,f),[f,m])},useEmitterValue:b,usePublisher:w}}F.createContext(void 0);const $n=F.createContext(void 0),_n=typeof document<"u"?F.useLayoutEffect:F.useEffect;function po(e){return"self"in e}function Er(e){return"body"in e}function qn(e,t,o,s=Mt,r,l){const i=F.useRef(null),c=F.useRef(null),d=F.useRef(null),u=F.useCallback(w=>{let N,C,b;const h=w.target;if(Er(h)||po(h)){const m=po(h)?h:h.defaultView;b=l?m.scrollX:m.scrollY,N=l?m.document.documentElement.scrollWidth:m.document.documentElement.scrollHeight,C=l?m.innerWidth:m.innerHeight}else b=l?h.scrollLeft:h.scrollTop,N=l?h.scrollWidth:h.scrollHeight,C=l?h.offsetWidth:h.offsetHeight;const f=()=>{e({scrollHeight:N,scrollTop:Math.max(b,0),viewportHeight:C})};w.suppressFlushSync?f():Fs.flushSync(f),c.current!==null&&(b===c.current||b<=0||b===N-C)&&(c.current=null,t(!0),d.current&&(clearTimeout(d.current),d.current=null))},[e,t,l]);F.useEffect(()=>{const w=r||i.current;return s(r||i.current),u({suppressFlushSync:!0,target:w}),w.addEventListener("scroll",u,{passive:!0}),()=>{s(null),w.removeEventListener("scroll",u)}},[i,u,o,s,r]);function x(w){const N=i.current;if(!N||(l?"offsetWidth"in N&&N.offsetWidth===0:"offsetHeight"in N&&N.offsetHeight===0))return;const C=w.behavior==="smooth";let b,h,f;po(N)?(h=Math.max(Ct(N.document.documentElement,l?"width":"height"),l?N.document.documentElement.scrollWidth:N.document.documentElement.scrollHeight),b=l?N.innerWidth:N.innerHeight,f=l?window.scrollX:window.scrollY):(h=N[l?"scrollWidth":"scrollHeight"],b=Ct(N,l?"width":"height"),f=N[l?"scrollLeft":"scrollTop"]);const m=h-b;if(w.top=Math.ceil(Math.max(Math.min(m,w.top),0)),Bn(b,h)||w.top===f){e({scrollHeight:h,scrollTop:f,viewportHeight:b}),C&&t(!0);return}C?(c.current=w.top,d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{d.current=null,c.current=null,t(!0)},1e3)):c.current=null,l&&(w={behavior:w.behavior,left:w.top}),N.scrollTo(w)}function j(w){l&&(w={behavior:w.behavior,left:w.top}),i.current.scrollBy(w)}return{scrollByCallback:j,scrollerRef:i,scrollToCallback:x}}const xo="-webkit-sticky",rn="sticky",Lo=Wn(()=>{if(typeof document>"u")return rn;const e=document.createElement("div");return e.style.position=xo,e.style.position===xo?xo:rn});function Bo(e){return e}const Pr=Y(()=>{const e=I(c=>`Item ${c}`),t=I(c=>`Group ${c}`),o=I({}),s=I(Bo),r=I("div"),l=I(Mt),i=(c,d=null)=>xe(v(o,R(u=>u[c]),oe()),d);return{components:o,computeItemKey:s,EmptyPlaceholder:i("EmptyPlaceholder"),FooterComponent:i("Footer"),GroupComponent:i("Group","div"),groupContent:t,HeaderComponent:i("Header"),HeaderFooterTag:r,ItemComponent:i("Item","div"),itemContent:e,ListComponent:i("List","div"),ScrollerComponent:i("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:i("ScrollSeekPlaceholder"),TopItemListComponent:i("TopItemList")}});ne(Vn,Pr);Lo();const Lr={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Br={outline:"none",overflowX:"auto",position:"relative"},Un=e=>({height:"100%",position:"absolute",top:0,width:"100%"});Lo();function Ke(e,t){if(typeof e!="string")return{context:t}}function Dr({useEmitter:e,useEmitterValue:t,usePublisher:o}){return F.memo(function({children:s,style:r,context:l,...i}){const c=o("scrollContainerState"),d=t("ScrollerComponent"),u=o("smoothScrollTargetReached"),x=t("scrollerRef"),j=t("horizontalDirection")||!1,{scrollByCallback:w,scrollerRef:N,scrollToCallback:C}=qn(c,u,d,x,void 0,j);return e("scrollTo",C),e("scrollBy",w),n.jsx(d,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:N,style:{...j?Br:Lr,...r},tabIndex:0,...i,...Ke(d,l),children:s})})}function Ar({useEmitter:e,useEmitterValue:t,usePublisher:o}){return F.memo(function({children:s,style:r,context:l,...i}){const c=o("windowScrollContainerState"),d=t("ScrollerComponent"),u=o("smoothScrollTargetReached"),x=t("totalListHeight"),j=t("deviation"),w=t("customScrollParent"),N=F.useRef(null),C=t("scrollerRef"),{scrollByCallback:b,scrollerRef:h,scrollToCallback:f}=qn(c,u,d,C,w);return _n(()=>{var m;return h.current=w||((m=N.current)==null?void 0:m.ownerDocument.defaultView),()=>{h.current=null}},[h,w]),e("windowScrollTo",f),e("scrollBy",b),n.jsx(d,{ref:N,"data-virtuoso-scroller":!0,style:{position:"relative",...r,...x!==0?{height:x+j}:{}},...i,...Ke(d,l),children:s})})}const Fr=Y(()=>{const e=I(u=>n.jsxs("td",{children:["Item $",u]})),t=I(null),o=I(u=>n.jsxs("td",{colSpan:1e3,children:["Group ",u]})),s=I(null),r=I(null),l=I({}),i=I(Bo),c=I(Mt),d=(u,x=null)=>xe(v(l,R(j=>j[u]),oe()),x);return{components:l,computeItemKey:i,context:t,EmptyPlaceholder:d("EmptyPlaceholder"),FillerRow:d("FillerRow"),fixedFooterContent:r,fixedHeaderContent:s,itemContent:e,groupContent:o,ScrollerComponent:d("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:d("ScrollSeekPlaceholder"),TableBodyComponent:d("TableBody","tbody"),TableComponent:d("Table","table"),TableFooterComponent:d("TableFoot","tfoot"),TableHeadComponent:d("TableHead","thead"),TableRowComponent:d("TableRow","tr"),GroupComponent:d("Group","tr")}});ne(Vn,Fr);Lo();const ln={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},Or={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:an,floor:Zt,max:It,min:bo,round:cn}=Math;function dn(e,t,o){return Array.from({length:t-e+1}).map((s,r)=>({data:o===null?null:o[r+e],index:r+e}))}function Gr(e){return{...Or,items:e}}function _t(e,t){return e&&e.width===t.width&&e.height===t.height}function Wr(e,t){return e&&e.column===t.column&&e.row===t.row}const Vr=Y(([{increaseViewportBy:e,listBoundary:t,overscan:o,visibleRange:s},{footerHeight:r,headerHeight:l,scrollBy:i,scrollContainerState:c,scrollTo:d,scrollTop:u,smoothScrollTargetReached:x,viewportHeight:j},w,N,{didMount:C,propsReady:b},{customScrollParent:h,useWindowScroll:f,windowScrollContainerState:m,windowScrollTo:T,windowViewportRect:H},z])=>{const a=I(0),g=I(0),S=I(ln),M=I({height:0,width:0}),P=I({height:0,width:0}),B=q(),O=q(),J=I(0),K=I(null),$=I({column:0,row:0}),ie=q(),ye=q(),ae=I(!1),be=I(0),ue=I(!0),ce=I(!1),Ve=I(!1);Q(v(C,V(be),A(([k,G])=>!!G)),()=>{W(ue,!1)}),Q(v(de(C,ue,P,M,be,ce),A(([k,G,Z,me,,se])=>k&&!G&&Z.height!==0&&me.height!==0&&!se)),([,,,,k])=>{W(ce,!0),Ro(1,()=>{W(B,k)}),Pe(v(u),()=>{W(t,[0,0]),W(ue,!0)})}),E(v(ye,A(k=>k!=null&&k.scrollTop>0),Oe(0)),g),Q(v(C,V(ye),A(([,k])=>k!=null)),([,k])=>{k&&(W(M,k.viewport),W(P,k.item),W($,k.gap),k.scrollTop>0&&(W(ae,!0),Pe(v(u,it(1)),G=>{W(ae,!1)}),W(d,{top:k.scrollTop})))}),E(v(M,R(({height:k})=>k)),j),E(v(de(D(M,_t),D(P,_t),D($,(k,G)=>k&&k.column===G.column&&k.row===G.row),D(u)),R(([k,G,Z,me])=>({gap:Z,item:G,scrollTop:me,viewport:k}))),ie),E(v(de(D(a),s,D($,Wr),D(P,_t),D(M,_t),D(K),D(g),D(ae),D(ue),D(be)),A(([,,,,,,,k])=>!k),R(([k,[G,Z],me,se,Ne,$e,_e,,Ye,De])=>{const{column:Re,row:tt}=me,{height:ot,width:ct}=se,{width:Pt}=Ne;if(_e===0&&(k===0||Pt===0))return ln;if(ct===0){const ve=Ho(De,k),vt=ve+Math.max(_e-1,0);return Gr(dn(ve,vt,$e))}const nt=Xn(Pt,ct,Re);let qe,He;Ye?G===0&&Z===0&&_e>0?(qe=0,He=_e-1):(qe=nt*Zt((G+tt)/(ot+tt)),He=nt*an((Z+tt)/(ot+tt))-1,He=bo(k-1,It(He,nt-1)),qe=bo(He,It(0,qe))):(qe=0,He=-1);const Lt=dn(qe,He,$e),{bottom:bt,top:dt}=un(Ne,me,se,Lt),st=an(k/nt),Bt=st*ot+(st-1)*tt-bt;return{bottom:bt,itemHeight:ot,items:Lt,itemWidth:ct,offsetBottom:Bt,offsetTop:dt,top:dt}})),S),E(v(K,A(k=>k!==null),R(k=>k.length)),a),E(v(de(M,P,S,$),A(([k,G,{items:Z}])=>Z.length>0&&G.height!==0&&k.height!==0),R(([k,G,{items:Z},me])=>{const{bottom:se,top:Ne}=un(k,me,G,Z);return[Ne,se]}),oe(Tt)),t);const je=I(!1);E(v(u,V(je),R(([k,G])=>G||k!==0)),je);const et=Te(v(de(S,a),A(([{items:k}])=>k.length>0),V(je),A(([[k,G],Z])=>{const me=k.items[k.items.length-1].index===G-1;return(Z||k.bottom>0&&k.itemHeight>0&&k.offsetBottom===0&&k.items.length===G)&&me}),R(([[,k]])=>k-1),oe())),Be=Te(v(D(S),A(({items:k})=>k.length>0&&k[0].index===0),Oe(0),oe())),pe=Te(v(D(S),V(ae),A(([{items:k},G])=>k.length>0&&!G),R(([{items:k}])=>({endIndex:k[k.length-1].index,startIndex:k[0].index})),oe(Mn),Xe(0)));E(pe,N.scrollSeekRangeChanged),E(v(B,V(M,P,a,$),R(([k,G,Z,me,se])=>{const Ne=Ln(k),{align:$e,behavior:_e,offset:Ye}=Ne;let De=Ne.index;De==="LAST"&&(De=me-1),De=It(0,De,bo(me-1,De));let Re=To(G,se,Z,De);return $e==="end"?Re=cn(Re-G.height+Z.height):$e==="center"&&(Re=cn(Re-G.height/2+Z.height/2)),Ye&&(Re+=Ye),{behavior:_e,top:Re}})),d);const Ie=xe(v(S,R(k=>k.offsetBottom+k.bottom)),0);return E(v(H,R(k=>({height:k.visibleHeight,width:k.visibleWidth}))),M),{customScrollParent:h,data:K,deviation:J,footerHeight:r,gap:$,headerHeight:l,increaseViewportBy:e,initialItemCount:g,itemDimensions:P,overscan:o,restoreStateFrom:ye,scrollBy:i,scrollContainerState:c,scrollHeight:O,scrollTo:d,scrollToIndex:B,scrollTop:u,smoothScrollTargetReached:x,totalCount:a,useWindowScroll:f,viewportDimensions:M,windowScrollContainerState:m,windowScrollTo:T,windowViewportRect:H,...N,gridState:S,horizontalDirection:Ve,initialTopMostItemIndex:be,totalListHeight:Ie,...w,endReached:et,propsReady:b,rangeChanged:pe,startReached:Be,stateChanged:ie,stateRestoreInProgress:ae,...z}},ne(Eo,we,Et,Gn,Ze,Po,Je));function Xn(e,t,o){return It(1,Zt((e+o)/(Zt(t)+o)))}function un(e,t,o,s){const{height:r}=o;if(r===void 0||s.length===0)return{bottom:0,top:0};const l=To(e,t,o,s[0].index);return{bottom:To(e,t,o,s[s.length-1].index)+r,top:l}}function To(e,t,o,s){const r=Xn(e.width,o.width,t.column),l=Zt(s/r),i=l*o.height+It(0,l-1)*t.row;return i>0?i+t.row:i}const $r=Y(()=>{const e=I(j=>`Item ${j}`),t=I({}),o=I(null),s=I("virtuoso-grid-item"),r=I("virtuoso-grid-list"),l=I(Bo),i=I("div"),c=I(Mt),d=(j,w=null)=>xe(v(t,R(N=>N[j]),oe()),w),u=I(!1),x=I(!1);return E(D(x),u),{components:t,computeItemKey:l,context:o,FooterComponent:d("Footer"),HeaderComponent:d("Header"),headerFooterTag:i,itemClassName:s,ItemComponent:d("Item","div"),itemContent:e,listClassName:r,ListComponent:d("List","div"),readyStateChanged:u,reportReadyState:x,ScrollerComponent:d("Scroller","div"),scrollerRef:c,ScrollSeekPlaceholder:d("ScrollSeekPlaceholder","div")}}),_r=Y(([e,t])=>({...e,...t}),ne(Vr,$r)),qr=F.memo(function(){const e=re("gridState"),t=re("listClassName"),o=re("itemClassName"),s=re("itemContent"),r=re("computeItemKey"),l=re("isSeeking"),i=ze("scrollHeight"),c=re("ItemComponent"),d=re("ListComponent"),u=re("ScrollSeekPlaceholder"),x=re("context"),j=ze("itemDimensions"),w=ze("gap"),N=re("log"),C=re("stateRestoreInProgress"),b=ze("reportReadyState"),h=oo(F.useMemo(()=>f=>{const m=f.parentElement.parentElement.scrollHeight;i(m);const T=f.firstChild;if(T){const{height:H,width:z}=T.getBoundingClientRect();j({height:H,width:z})}w({column:mn("column-gap",getComputedStyle(f).columnGap,N),row:mn("row-gap",getComputedStyle(f).rowGap,N)})},[i,j,w,N]),!0,!1);return _n(()=>{e.itemHeight>0&&e.itemWidth>0&&b(!0)},[e]),C?null:n.jsx(d,{className:t,ref:h,...Ke(d,x),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(f=>{const m=r(f.index,f.data,x);return l?n.jsx(u,{...Ke(u,x),height:e.itemHeight,index:f.index,width:e.itemWidth},m):hn.createElement(c,{...Ke(c,x),className:o,"data-index":f.index,key:m},s(f.index,f.data,x))})})}),Ur=F.memo(function(){const e=re("HeaderComponent"),t=ze("headerHeight"),o=re("headerFooterTag"),s=oo(F.useMemo(()=>l=>{t(Ct(l,"height"))},[t]),!0,!1),r=re("context");return e?n.jsx(o,{ref:s,children:n.jsx(e,{...Ke(e,r)})}):null}),Xr=F.memo(function(){const e=re("FooterComponent"),t=ze("footerHeight"),o=re("headerFooterTag"),s=oo(F.useMemo(()=>l=>{t(Ct(l,"height"))},[t]),!0,!1),r=re("context");return e?n.jsx(o,{ref:s,children:n.jsx(e,{...Ke(e,r)})}):null}),Yr=({children:e})=>{const t=F.useContext($n),o=ze("itemDimensions"),s=ze("viewportDimensions"),r=oo(F.useMemo(()=>l=>{s(l.getBoundingClientRect())},[s]),!0,!1);return F.useEffect(()=>{t&&(s({height:t.viewportHeight,width:t.viewportWidth}),o({height:t.itemHeight,width:t.itemWidth}))},[t,s,o]),n.jsx("div",{ref:r,style:Un(),children:e})},Kr=({children:e})=>{const t=F.useContext($n),o=ze("windowViewportRect"),s=ze("itemDimensions"),r=re("customScrollParent"),l=Zs(o,r,!1);return F.useEffect(()=>{t&&(s({height:t.itemHeight,width:t.itemWidth}),o({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,o,s]),n.jsx("div",{ref:l,style:Un(),children:e})},Qr=F.memo(function({...e}){const t=re("useWindowScroll"),o=re("customScrollParent"),s=o||t?el:Zr,r=o||t?Kr:Yr,l=re("context");return n.jsx(s,{...e,...Ke(s,l),children:n.jsxs(r,{children:[n.jsx(Ur,{}),n.jsx(qr,{}),n.jsx(Xr,{})]})})}),{Component:Jr,useEmitter:Yn,useEmitterValue:re,usePublisher:ze}=Hr(_r,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},Qr),Zr=Dr({useEmitter:Yn,useEmitterValue:re,usePublisher:ze}),el=Ar({useEmitter:Yn,useEmitterValue:re,usePublisher:ze});function mn(e,t,o){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&o(`${e} was not resolved to pixel value correctly`,t,Me.WARN),t==="normal"?0:parseInt(t??"0",10)}const tl=Jr;function ol(){return typeof navigator<"u"&&"share"in navigator&&"canShare"in navigator}function nl(){return typeof window<"u"&&"showSaveFilePicker"in window}async function sl(e,t){if(!ol())return{success:!1,method:"none",message:"Web Share API not supported"};try{const o=await fetch(e);if(!o.ok)throw new Error(`Failed to fetch media: ${o.status}`);const s=await o.blob(),r=new File([s],t,{type:s.type});return navigator.canShare({files:[r]})?(await navigator.share({files:[r],title:"Save to Gallery"}),{success:!0,method:"webshare",message:"Media shared successfully"}):{success:!1,method:"webshare",message:"File type not supported for sharing"}}catch(o){return console.warn("Web Share API failed:",o),{success:!1,method:"webshare",message:o instanceof Error?o.message:"Unknown error"}}}async function rl(e,t){if(!nl())return{success:!1,method:"none",message:"PWA file handling not supported"};try{const o=await fetch(e);if(!o.ok)throw new Error(`Failed to fetch media: ${o.status}`);const s=await o.blob(),r=new File([s],t,{type:s.type}),l=t.split(".").pop()||"jpg",i=`snapify_${Date.now()}.${l}`,d=await(await window.showSaveFilePicker({suggestedName:i,types:[{description:s.type.startsWith("video")?"Video":"Image",accept:{[s.type]:[`.${l}`]}}]})).createWritable();return await d.write(r),await d.close(),{success:!0,method:"pwa",message:"File saved successfully"}}catch(o){return console.warn("PWA file handling failed:",o),{success:!1,method:"pwa",message:o instanceof Error?o.message:"Unknown error"}}}async function ll(e,t){try{const o=document.createElement("a");return o.href=e,o.download=t,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),{success:!0,method:"fallback",message:"Download initiated"}}catch(o){return console.warn("Fallback download failed:",o),{success:!1,method:"fallback",message:o instanceof Error?o.message:"Unknown error"}}}async function il(e,t,o={}){const{preferWebShare:s=!0,showInstructions:r=!0}=o;if(s&&Yt()){const c=await sl(e,t);if(c.success)return c}const l=await rl(e,t);if(l.success)return l;const i=await ll(e,t);return r&&!i.success&&Yt()&&al(),i}function al(e,t){const o=Os(),s=Gs();let r="";o?r=`
      <div class="text-center">
        <div class="mb-4">
          <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">How to Save on iOS</h3>
        </div>
        <ol class="text-left text-sm text-gray-600 space-y-2 mb-4">
          <li class="flex items-start">
            <span class="bg-blue-100 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
            Tap and hold the image/video above
          </li>
          <li class="flex items-start">
            <span class="bg-blue-100 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
            Select "Save to Photos" from the menu
          </li>
          <li class="flex items-start">
            <span class="bg-blue-100 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
            The media will be saved to your Photos app
          </li>
        </ol>
        <button onclick="this.closest('.mobile-instructions-modal').remove()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
          Got it
        </button>
      </div>
    `:s?r=`
      <div class="text-center">
        <div class="mb-4">
          <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">How to Save on Android</h3>
        </div>
        <ol class="text-left text-sm text-gray-600 space-y-2 mb-4">
          <li class="flex items-start">
            <span class="bg-green-100 text-green-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
            Tap the download button above
          </li>
          <li class="flex items-start">
            <span class="bg-green-100 text-green-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
            Open the downloaded file from notifications
          </li>
          <li class="flex items-start">
            <span class="bg-green-100 text-green-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
            Tap "Save" or share to your Gallery app
          </li>
        </ol>
        <button onclick="this.closest('.mobile-instructions-modal').remove()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
          Got it
        </button>
      </div>
    `:r=`
      <div class="text-center">
        <div class="mb-4">
          <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Download Complete</h3>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          The file has been downloaded. Check your downloads folder to save it to your gallery.
        </p>
        <button onclick="this.closest('.mobile-instructions-modal').remove()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
          Close
        </button>
      </div>
    `;const l=document.createElement("div");l.className="mobile-instructions-modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",l.innerHTML=`
    <div class="bg-white rounded-lg max-w-sm w-full max-h-[90vh] overflow-y-auto">
      <div class="p-6">
        ${r}
      </div>
    </div>
  `,l.addEventListener("click",i=>{i.target===l&&l.remove()}),document.body.appendChild(l)}function cl(e,t,o){if(o)return o;const s=e.split("/"),r=s[s.length-1],l=t==="video"?"mp4":"jpg";return r&&r.includes(".")?r:`snapify_${Date.now()}.${l}`}const dl=({eventId:e,eventTitle:t,onClose:o,t:s})=>{const r=`${window.location.origin}?event=${e}`,[l,i]=hn.useState(!1),c=async()=>{try{await navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),2e3)}catch(x){console.error("Failed to copy",x)}},d=async()=>{if(navigator.share)try{await navigator.share({title:"SnapifY Event",text:`Join the party! ${t}`,url:r})}catch{}else c()},u=()=>{const x=document.getElementById("share-qr");if(x){const j=new XMLSerializer().serializeToString(x),w=document.createElement("canvas"),N=w.getContext("2d"),C=new Image;C.onload=()=>{w.width=C.width,w.height=C.height,N?.drawImage(C,0,0);const b=w.toDataURL("image/png"),h=document.createElement("a");h.download=`QR_${t.replace(/\s+/g,"_")}.png`,h.href=b,h.click()},C.src="data:image/svg+xml;base64,"+btoa(j)}};return n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Share Event"}),n.jsx("button",{onClick:o,className:"p-2 bg-white rounded-full hover:bg-slate-100 transition-colors",children:n.jsx(ht,{size:20,className:"text-slate-500"})})]}),n.jsxs("div",{className:"p-8 flex flex-col items-center space-y-6",children:[n.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-lg border border-indigo-100",children:n.jsx(yn,{id:"share-qr",value:r,size:180,level:"H",includeMargin:!0})}),n.jsxs("div",{className:"w-full space-y-3",children:[typeof navigator<"u"&&navigator.share&&n.jsxs("button",{onClick:d,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[n.jsx(gn,{size:20})," Share via..."]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsx(pn,{size:16,className:"text-slate-400 flex-shrink-0"}),n.jsx("input",{type:"text",readOnly:!0,value:r,className:"bg-transparent text-sm text-slate-600 flex-1 outline-none truncate"}),n.jsx("button",{onClick:c,className:`p-2 rounded-lg transition-colors ${l?"bg-green-100 text-green-600":"hover:bg-white text-slate-500"}`,children:l?n.jsx(ws,{size:16}):n.jsx(ys,{size:16})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("a",{href:`https://wa.me/?text=${encodeURIComponent(`Join the party! ${t}: ${r}`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 py-3 bg-[#25D366] text-white rounded-xl font-bold hover:opacity-90 transition-opacity",children:[n.jsx(js,{size:18})," WhatsApp"]}),n.jsxs("button",{onClick:u,className:"flex items-center justify-center gap-2 py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 transition-colors",children:[n.jsx(xn,{size:18})," Save QR"]})]})]})]})]})})},ul=({vendor:e})=>n.jsxs("div",{className:"relative group rounded-2xl overflow-hidden bg-white shadow-sm border border-indigo-100 hover:shadow-md transition-all cursor-pointer flex flex-col break-inside-avoid mb-4",children:[n.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 backdrop-blur-sm text-white text-[10px] font-bold px-2 py-1 rounded-full uppercase tracking-wider z-10",children:["Featured ",e.category]}),e.coverImage?n.jsx("div",{className:"h-48 w-full overflow-hidden",children:n.jsx("img",{src:e.coverImage,alt:e.businessName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"})}):n.jsx("div",{className:"h-32 bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-white",children:n.jsx("span",{className:"font-bold text-2xl opacity-50",children:e.businessName.charAt(0)})}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex items-start justify-between mb-2",children:n.jsxs("h3",{className:"font-bold text-slate-900 text-lg leading-tight",children:[e.businessName,e.isVerified&&n.jsx(bn,{size:14,className:"inline ml-1 text-blue-500"})]})}),n.jsxs("p",{className:"text-slate-500 text-xs mb-3 flex items-center",children:[n.jsx(vn,{size:12,className:"mr-1"})," ",e.city]}),n.jsx("p",{className:"text-slate-600 text-sm line-clamp-2 mb-4",children:e.description}),n.jsxs("a",{href:e.website||`mailto:${e.contactEmail}`,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-slate-50 hover:bg-slate-100 text-slate-900 font-bold text-sm py-2.5 rounded-xl flex items-center justify-center transition-colors border border-slate-200",children:["Contact ",n.jsx(Is,{size:14,className:"ml-2"})]})]})]}),{useState:X,useEffect:Ee,useCallback:ft,useRef:Xt,useMemo:vo,memo:Kn}=Ns,fn=e=>{if(!e||e===1)return"";switch(e){case 2:return"scaleX(-1)";case 3:return"rotate(180deg)";case 4:return"scaleY(-1)";case 5:return"scaleX(-1) rotate(90deg)";case 6:return"rotate(90deg)";case 7:return"scaleX(-1) rotate(-90deg)";case 8:return"rotate(-90deg)";default:return""}},ml=Kn(({item:e,onClick:t})=>{const o=Xt(null),[s,r]=X(!1),l=Yt();return Ee(()=>{if(l)return;const i=new IntersectionObserver(c=>{c.forEach(d=>{if(o.current)if(d.isIntersecting){const u=o.current.play();u!==void 0&&u.then(()=>r(!0)).catch(()=>{r(!1)})}else o.current.pause(),r(!1)})},{threshold:.25});return o.current&&i.observe(o.current),()=>{o.current&&i.unobserve(o.current)}},[l]),e.isProcessing?n.jsxs("div",{className:"w-full aspect-video bg-slate-200 flex flex-col items-center justify-center text-slate-500",onClick:t,children:[n.jsx(gt,{className:"animate-spin mb-2"}),n.jsx("span",{className:"text-xs font-bold",children:"Processing..."})]}):n.jsxs("div",{className:"relative group cursor-pointer",onClick:t,children:[n.jsx("video",{ref:o,src:e.previewUrl||e.url,className:"w-full h-auto object-cover rounded-lg bg-black min-h-[150px]",muted:!0,playsInline:!0,loop:!0,preload:"metadata",style:{pointerEvents:"none"}}),n.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-colors pointer-events-none ${l?"bg-black/10":s?"bg-transparent":"bg-black/20 group-hover:bg-black/30"}`,children:(!s||l)&&n.jsx("div",{className:"bg-black/40 rounded-full p-3 backdrop-blur-sm border border-white/20",children:n.jsx(wo,{className:"text-white fill-white",size:24})})}),n.jsx("div",{className:"absolute top-2 right-2 bg-black/60 p-1.5 rounded-md pointer-events-none z-10 backdrop-blur-md",children:n.jsx(wn,{className:"text-white",size:12})})]})}),Qn=({event:e,currentUser:t,hostUser:o,isEventExpired:s,isOwner:r,isHostPhotographer:l,downloadingZip:i,applyWatermark:c,setApplyWatermark:d,onDownloadAll:u,onSetCover:x,onUpload:j,onLike:w,onOpenLiveSlideshow:N,onRefresh:C,t:b})=>{const[h,f]=X(e.media),[m,T]=X(e.guestbook||[]),[H,z]=X("gallery"),[a,g]=X(null),[S,M]=X(!1),[P,B]=X(!1),[O,J]=X(!1),[K,$]=X("");Xt(null);const[ie,ye]=X(!1),[ae,be]=X(0),ue=Xt(0),ce=80,Ve=p=>{window.scrollY===0&&(ue.current=p.touches[0].clientY)},je=p=>{if(ue.current>0&&window.scrollY===0){const y=p.touches[0].clientY-ue.current;y>0&&be(y)}},et=async()=>{if(ae>ce){ye(!0),be(0);try{await C()}finally{ye(!1)}}be(0),ue.current=0},[Be,pe]=X(0),[Ie,k]=X(!1),[G,Z]=X(!1),[me,se]=X(!1),Ne=Xt(null),[$e,_e]=X(""),[Ye,De]=X(t?.name||""),Re=`unlocked_event_${e.id}`,[tt,ot]=X(()=>r||t?.role===Ae.ADMIN||sessionStorage.getItem(Re)==="true"?!1:!!e.hasPin||!!e.pin&&e.pin.length>0),[ct,Pt]=X(""),[nt,qe]=X(""),[He,Lt]=X(!1),[bt,dt]=X(null),[st,Bt]=X(null),[ve,vt]=X(""),[Jn,ro]=X(!1),[Do,Zn]=X(!1),[ut,es]=X(!1),[Dt,ts]=X(!1),[Ce,wt]=X(new Set),[he,lo]=X(!1),[Ao,Fo]=X(!1),[rt,mt]=X(null),[Se,io]=X(()=>Vt(t,o?.tier)),[At,os]=X([]),Ft=ft(p=>t?t.role===Ae.ADMIN||r?!0:p.uploaderId===t.id:!1,[t,r]);Ee(()=>{const p=localStorage.getItem("snapify_token");Fe.connect(p||void 0),Fe.joinEvent(e.id),Fe.on("media_uploaded",y=>{console.log("EventGallery: Received media_uploaded event",y);const U=ge=>ge?ge.startsWith("/api/proxy-media")||ge.startsWith("http")?ge:`/api/proxy-media?key=${encodeURIComponent(ge)}`:"",_={...y,url:U(y.url),previewUrl:y.previewUrl?U(y.previewUrl):U(y.url)};f(ge=>ge.some(Gt=>Gt.id===_.id)?ge:[_,...ge]),setTimeout(()=>{f(ge=>[...ge])},100),setTimeout(()=>{z(ge=>ge)},150)}),Fe.on("media_processed",y=>{console.log("EventGallery: Received media_processed event",y),f(U=>U.map(_=>_.id===y.id?{..._,isProcessing:!1,previewUrl:y.previewUrl,url:y.url||_.url}:_))}),Fe.on("new_like",y=>{f(U=>U.map(_=>_.id===y.id?{..._,likes:y.likes}:_))}),Fe.on("new_message",y=>{T(U=>U.some(_=>_.id===y.id)?U:[y,...U])}),Fe.on("new_comment",y=>{f(U=>U.map(_=>_.id===y.mediaId?{..._,comments:[..._.comments||[],y]}:_))});const L=y=>{console.log("EventGallery: Received user update",y),io(Vt(t,y.id===e.hostId?y.tier:o?.tier))};return Fe.on("user_updated",L),ts(Yt()),()=>{Fe.off("user_updated",L),Fe.disconnect()}},[e.id,t,o?.tier,e.hostId]),Ee(()=>{console.log("EventGallery: syncing localMedia with event.media:",e.media.length,"items for event",e.id),f(e.media)},[e.media,e.id]),Ee(()=>{T(e.guestbook||[])},[e.guestbook,e.id]),Ee(()=>{(r||t?.role===Ae.ADMIN)&&ot(!1)},[r,t]),Ee(()=>{(async()=>{if(e.city)try{const L=await yt.fetchVendors(e.city);os(L)}catch(L){console.error("Failed to fetch vendors",L)}})()},[e.city]),Ee(()=>{(async()=>{if(window.faceapi&&!Do)try{await Promise.all([window.faceapi.nets.ssdMobilenetv1.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model"),window.faceapi.nets.faceLandmark68Net.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model"),window.faceapi.nets.faceRecognitionNet.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model")]),Zn(!0)}catch(L){console.error("Failed to load FaceAPI models",L)}})()},[]),Ee(()=>{io(Vt(t,o?.tier))},[t,o]),Ee(()=>{const p=()=>{io(Vt(t,o?.tier))};return window.addEventListener("online",p),()=>window.removeEventListener("online",p)},[t,o]);const ee=vo(()=>{let p=st||h;if(console.log("EventGallery: computing displayMedia from",p.length,"items (filteredMedia:",!!st,"localMedia:",h.length,")"),console.log("EventGallery: isOwner=",r,"currentUser.role=",t?.role,"showMyUploads=",ut),!r&&t?.role!==Ae.ADMIN){console.log("EventGallery: Applying privacy filter (not owner/admin)");const L=p.length;p=p.filter(y=>{const U=y.privacy!=="private",_=t&&y.uploaderId===t.id,ge=U||_;return ge||console.log("EventGallery: Filtering out item",y.id,"privacy=",y.privacy,"uploaderId=",y.uploaderId,"currentUserId=",t?.id),ge}),console.log("EventGallery: Privacy filter removed",L-p.length,"items")}else console.log("EventGallery: Skipping privacy filter (owner or admin)");if(ut&&t&&(p=p.filter(L=>L.uploaderId===t.id)),ve.trim()){const L=ve.toLowerCase();p=p.filter(y=>y.caption&&y.caption.toLowerCase().includes(L)||y.uploaderName&&y.uploaderName.toLowerCase().includes(L))}return console.log("EventGallery: displayMedia computed to",p.length,"items"),p},[st,h,r,t,ut,ve]),ns=vo(()=>t?ee.some(p=>Ft(p)):!1,[t,ee,Ft]),Oo=o?.tier===vs.STUDIO,ss=Oo?"#4f46e5":"#000000",ao=p=>{g(p),M(!1),pe(0),document.body.style.overflow="hidden"},Ot=ft(()=>{g(null),M(!1),document.body.style.overflow="unset"},[]),Ue=ft(p=>{if(a===null||G)return;const L=window.innerWidth,y=p==="next"?-L:L;Z(!0),pe(y),setTimeout(()=>{const U=ee.length;let _;p==="next"?_=(a+1)%U:_=(a-1+U)%U,se(!0),g(_),pe(0),Z(!1),setTimeout(()=>{se(!1)},50)},300)},[a,ee.length,G]),rs=p=>{G||(Ne.current=p.clientX,k(!0))},ls=p=>{if(!Ne.current||G||!Ie)return;const y=p.clientX-Ne.current;pe(y)},co=()=>{if(!Ne.current||G||!Ie){k(!1);return}k(!1);const p=window.innerWidth/4;Be<-p?Ue("next"):Be>p?Ue("prev"):(Z(!0),pe(0),setTimeout(()=>Z(!1),300)),Ne.current=null};Ee(()=>{const p=L=>{a!==null&&(L.key==="Escape"&&Ot(),L.key==="ArrowRight"&&Ue("next"),L.key==="ArrowLeft"&&Ue("prev"))};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[a,Ot,Ue]),Ee(()=>{let p;return S&&a!==null&&(p=setInterval(()=>{Ue("next")},3e3)),()=>clearInterval(p)},[S,a,Ue]);const is=ft(async()=>{const p=`${window.location.origin}?event=${e.id}`;try{await navigator.clipboard.writeText(p),J(!0),setTimeout(()=>J(!1),2e3)}catch{prompt(b("copyLink"),p)}},[e.id,b]);ft(async p=>{const L=cl(p.url,p.type,`snapify_${p.id}`);mt({show:!0,message:"Preparing download...",type:"info"});try{const y=await il(p.url,L);y.success?mt({show:!0,message:Dt?"Media shared! Check your gallery.":"Download completed!",type:"success"}):mt({show:!0,message:y.message||"Download failed. Try again.",type:"error"})}catch{mt({show:!0,message:"Download failed. Please try again.",type:"error"})}setTimeout(()=>mt(null),3e3)},[Dt]);const as=async p=>{p.preventDefault(),await yt.validateEventPin(e.id,ct)?(ot(!1),sessionStorage.setItem(Re,"true")):qe(b("invalidPin"))},cs=async p=>{if(p.preventDefault(),!$e.trim()||!Ye.trim())return;const L={id:crypto.randomUUID(),eventId:e.id,senderName:Ye,message:$e,createdAt:new Date().toISOString()};await yt.addGuestbookEntry(L),_e("")},ds=async p=>{if(p.preventDefault(),!K.trim()||a===null)return;const L=ee[a],y=t?t.name:localStorage.getItem("snapify_guest_name")||"Guest",U={id:crypto.randomUUID(),mediaId:L.id,eventId:e.id,senderName:y,text:K,createdAt:new Date().toISOString()};await yt.addComment(U),$("")},us=async p=>{if(!p.target.files||!p.target.files[0]||!window.faceapi)return;const L=p.target.files[0],y=URL.createObjectURL(L);dt(y),ro(!0);try{const U=await window.faceapi.fetchImage(y),_=await window.faceapi.detectSingleFace(U).withFaceLandmarks().withFaceDescriptor();if(!_){alert(b("noFaceDetected")),ro(!1),dt(null);return}const ge=new window.faceapi.FaceMatcher(_),Gt=[],xs=h.filter(Wt=>Wt.type==="image");for(const Wt of xs)try{const Go=await window.faceapi.fetchImage(Wt.url);(await window.faceapi.detectAllFaces(Go).withFaceLandmarks().withFaceDescriptors()).some(bs=>ge.findBestMatch(bs.descriptor).label!=="unknown")&&Gt.push(Wt)}catch{}Bt(Gt)}catch{alert(b("scanError"))}finally{ro(!1)}},ms=()=>{he?(wt(new Set),lo(!1)):lo(!0)},fs=p=>{const L=new Set(Ce);L.has(p)?L.delete(p):L.add(p),wt(L)},hs=()=>{Ce.size===ee.length?wt(new Set):wt(new Set(ee.map(p=>p.id)))},gs=async()=>{if(Ce.size!==0&&confirm(b("confirmBulkDelete").replace("{count}",Ce.size.toString()))){Fo(!0);try{const p=Array.from(Ce);(await yt.bulkDeleteMedia(p)).success&&(f(y=>y.filter(U=>!Ce.has(U.id))),wt(new Set),lo(!1))}catch{}finally{Fo(!1)}}},uo=vo(()=>{const p=[];let L=0;console.log("EventGallery: Computing gridItems from displayMedia.length=",ee.length),(r||t?.role===Ae.ADMIN||t)&&!he&&!ve&&(p.push({type:"add-memory"}),console.log('EventGallery: Added "Add Memory" card'));for(let y=0;y<ee.length;y++){const U=ee[y];if(At.length>0&&!he&&y>0&&y%8===0){const _=At[L%At.length];p.push({type:"ad",vendor:_}),L++}p.push(U)}return console.log("EventGallery: gridItems computed with",p.length,"total items"),p},[ee,r,t,he,ve,At,h.length]),ps=ft(p=>{const L=uo[p];if(L.type==="add-memory")return n.jsxs("div",{onClick:()=>j("upload"),className:"relative group rounded-2xl overflow-hidden bg-gradient-to-br from-indigo-50 to-white border-2 border-dashed border-indigo-200 shadow-sm hover:shadow-md hover:border-indigo-400 transition-all cursor-pointer flex flex-col items-center justify-center min-h-[250px] animate-in fade-in slide-in-from-bottom-4 h-full",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mb-4 shadow-inner group-hover:scale-110 transition-transform duration-300",children:n.jsx(ks,{size:32,strokeWidth:3})}),n.jsx("h4",{className:"font-black text-indigo-900 text-lg",children:b("addMemory")}),n.jsx("p",{className:"text-indigo-500/80 text-xs font-bold uppercase tracking-wider mt-1",children:b("tapToUpload")})]});if(L.type==="ad")return n.jsx(ul,{vendor:L.vendor},`ad-${p}`);{const y=L,U=ee.indexOf(y);return n.jsxs("div",{className:"relative group rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all cursor-pointer h-full",onClick:()=>!he&&ao(U),children:[he&&Ft(y)&&n.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 z-20 bg-black/10 flex items-start justify-end p-3",children:n.jsx("button",{onClick:_=>{_.stopPropagation(),fs(y.id)},className:`w-6 h-6 rounded-full flex items-center justify-center transition-all shadow-sm ${Ce.has(y.id)?"bg-indigo-600 text-white":"bg-white text-slate-400"}`,children:Ce.has(y.id)?n.jsx(Wo,{size:14}):n.jsx(Ts,{size:14})})}),y.type==="video"?n.jsx(ml,{item:y,onClick:()=>!he&&ao(U)}):n.jsx("div",{className:"w-full aspect-square bg-slate-200 relative overflow-hidden",children:n.jsx("img",{src:y.previewUrl||y.url,alt:y.caption||"Photo",className:"w-full h-full object-cover",style:{transform:fn(y.orientation)},loading:"lazy",onError:_=>{console.error("Image failed to load:",y.url),_.currentTarget.style.display="none"}})}),y.isWatermarked&&y.watermarkText&&n.jsx("div",{className:"absolute bottom-2 right-2 pointer-events-none",children:n.jsx("p",{className:"text-white/60 text-[10px] font-bold uppercase tracking-widest drop-shadow-md px-1.5 py-0.5 rounded bg-black/30 backdrop-blur-sm",children:y.watermarkText})}),y.privacy==="private"&&n.jsx("div",{className:"absolute top-2 right-2 bg-black/60 text-white p-1 rounded-full shadow-sm backdrop-blur-sm z-10",children:n.jsx(mo,{size:12})}),n.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-4 pointer-events-none",children:[n.jsx("p",{className:"text-white text-sm font-medium truncate",children:y.caption}),n.jsxs("div",{className:"flex justify-between items-end mt-0.5",children:[n.jsxs("p",{className:"text-white/60 text-xs",children:["by ",y.uploaderName]}),y.comments&&y.comments.length>0&&n.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-xs",children:[n.jsx(Cs,{size:12})," ",y.comments.length]})]})]}),!he&&n.jsxs("button",{onClick:_=>{_.stopPropagation(),w(y)},className:"absolute bottom-3 right-3 bg-white/90 backdrop-blur-md rounded-full p-2 text-slate-400 shadow-lg hover:text-red-500 hover:scale-110 transition-all flex items-center gap-1 pointer-events-auto z-10",children:[n.jsx(Ss,{size:16,className:y.likes?"fill-red-500 text-red-500":""}),L.likes?n.jsx("span",{className:"text-xs font-bold text-red-500",children:y.likes}):null]}),(r||t?.role===Ae.ADMIN)&&y.type==="image"&&!he&&n.jsx("button",{onClick:_=>{_.stopPropagation(),x(y)},className:"absolute top-3 left-3 bg-black/40 backdrop-blur-md rounded-full p-1.5 text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-indigo-600 pointer-events-auto z-10",children:n.jsx(zs,{size:14})})]},y.id)}},[uo,ee,he,Ft,Ce,w,x,r,t]);return tt?n.jsx("div",{className:"min-h-[60vh] flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl max-w-sm w-full text-center border border-slate-200",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(mo,{size:32,className:"text-slate-700"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:b("pinRequired")}),n.jsxs("form",{onSubmit:as,children:[n.jsx("input",{id:"event-pin-input",name:"event-pin",type:"text",value:ct,onChange:p=>{Pt(p.target.value),qe("")},placeholder:"PIN Code",className:"w-full text-center text-2xl tracking-widest font-bold p-3 rounded-xl border border-slate-300 mb-4 uppercase",maxLength:6,autoComplete:"off"}),nt&&n.jsx("p",{className:"text-red-500 font-bold text-sm mb-4",children:nt}),n.jsx("button",{type:"submit",className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold",children:b("submitPin")})]})]})}):s&&t?.role!==Ae.ADMIN&&t?.id!==e.hostId?n.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-20 text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:b("eventExpiredTitle")}),n.jsx("p",{className:"text-slate-500 mb-8",children:b("eventExpiredMsg")}),n.jsx("button",{onClick:()=>window.location.href="/",className:"bg-slate-900 text-white px-8 py-3 rounded-xl font-bold",children:b("goHome")})]}):n.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-8 pb-32",onTouchStart:Ve,onTouchMove:je,onTouchEnd:et,style:{transform:ae>0?`translateY(${Math.min(ae,ce)}px)`:void 0,transition:ie?"transform 0.3s ease-out":void 0},children:[ae>0&&n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-indigo-600 text-white text-center py-2 text-sm font-medium transition-opacity",style:{opacity:Math.min(ae/ce,1),transform:`translateY(${Math.max(0,ae-ce)}px)`},children:ie?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(gt,{className:"animate-spin h-4 w-4"}),"Refreshing..."]}):ae>ce?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Vo,{className:"h-4 w-4"}),"Release to refresh"]}):n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Vo,{className:"h-4 w-4"}),"Pull to refresh"]})}),s&&t?.role===Ae.ADMIN&&n.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-700 p-4 rounded-xl mb-6 flex items-center font-bold",children:[n.jsx($o,{className:"mr-2"})," ",b("adminModeExpired")]}),n.jsxs("div",{className:"bg-white rounded-3xl p-6 md:p-8 shadow-sm border border-slate-200 mb-8 relative overflow-hidden group",children:[e.coverImage?n.jsxs("div",{className:"absolute inset-0 z-0",children:[e.coverMediaType==="video"?n.jsx("video",{src:e.coverImage,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}):n.jsx("img",{src:e.coverImage,alt:"Cover",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm"})]}):n.jsx("div",{className:"absolute -top-20 -right-20 opacity-[0.03] pointer-events-none z-0",children:n.jsx("div",{className:"w-96 h-96 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full blur-3xl"})}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-8 relative z-10 items-center md:items-start",children:[n.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center",children:[n.jsx("div",{className:`bg-white p-4 rounded-2xl shadow-lg border inline-block ${Oo?"border-amber-200 ring-4 ring-amber-50":"border-slate-100"}`,children:n.jsx(yn,{value:`${window.location.origin}?event=${e.id}`,size:140,fgColor:ss})}),n.jsxs("button",{onClick:is,className:`mt-3 flex items-center gap-2 text-sm font-bold px-3 py-1.5 rounded-lg transition-all ${O?"bg-green-100 text-green-700":"text-indigo-600 hover:bg-indigo-50"}`,children:[O?n.jsx(bn,{size:14}):n.jsx(pn,{size:14}),b(O?"linkCopied":"copyLink")]})]}),n.jsxs("div",{className:"flex-1 text-center md:text-left w-full",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tight mb-2",children:e.title}),n.jsxs("p",{className:"text-slate-500 flex items-center justify-center md:justify-start mb-2 font-medium",children:[n.jsx(Ms,{size:18,className:"mr-2 text-indigo-500"})," ",e.date||b("dateTBD")]}),e.city&&n.jsxs("p",{className:"text-slate-500 flex items-center justify-center md:justify-start mb-6 font-medium",children:[n.jsx(vn,{size:18,className:"mr-2 text-red-500"})," ",b("city"),": ",e.city]}),n.jsx("div",{className:"text-slate-700 bg-slate-50 p-5 rounded-2xl border border-slate-200 w-full text-left shadow-sm relative",children:n.jsx("p",{className:"italic",children:e.description})})]})]})]}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsxs("div",{className:"bg-white p-1.5 rounded-xl shadow-sm border border-slate-200 flex gap-2",children:[n.jsxs("button",{onClick:()=>z("gallery"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${H==="gallery"?"bg-indigo-600 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:[n.jsx(Rs,{size:18})," ",b("gallery")]}),n.jsxs("button",{onClick:()=>z("guestbook"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${H==="guestbook"?"bg-indigo-600 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:[n.jsx(Hs,{size:18})," ",b("guestbook")]})]})}),H==="gallery"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between bg-white p-4 rounded-2xl shadow-sm border border-slate-200",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(_o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),n.jsx("input",{id:"search-memories-input",name:"search-memories",type:"text",value:ve,onChange:p=>vt(p.target.value),placeholder:"Search memories...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm",autoComplete:"off"}),ve&&n.jsx("button",{onClick:()=>vt(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:n.jsx(ht,{size:14})})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[st&&n.jsxs("button",{onClick:()=>{Bt(null),dt(null)},className:"flex items-center gap-1 px-3 py-2 text-sm font-bold text-red-600 bg-red-50 rounded-xl hover:bg-red-100",children:[n.jsx(ht,{size:16})," ",b("clearFilter")]}),t&&!he&&n.jsx("button",{onClick:()=>es(!ut),className:`p-2 rounded-xl transition-colors ${ut?"bg-indigo-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,title:b(ut?"allPhotos":"myUploads"),children:n.jsx(qo,{size:20})}),ns&&ee.length>0&&n.jsx("button",{onClick:ms,className:`p-2 rounded-xl transition-colors ${he?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,title:b(he?"cancel":"selectMedia"),children:he?n.jsx(ht,{size:20}):n.jsx(Wo,{size:20})}),he&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:hs,className:"px-3 py-2 text-xs font-bold bg-slate-100 rounded-xl hover:bg-slate-200",children:Ce.size===ee.length?"Deselect All":"Select All"}),Ce.size>0&&n.jsxs("button",{onClick:gs,disabled:Ao,className:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-xl",children:[Ao?n.jsx(gt,{size:16,className:"animate-spin"}):n.jsx(Es,{size:16}),Ce.size]})]}),Do&&h.length>0&&!he&&n.jsx("button",{onClick:()=>Lt(!He),className:`p-2 rounded-xl transition-colors ${He?"bg-indigo-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,title:b("findMe"),children:n.jsx(Ps,{size:20})}),ee.length>0&&!he&&n.jsxs("button",{onClick:()=>{ao(0),M(!0)},className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl hover:bg-slate-800 font-bold text-sm",children:[n.jsx(wo,{size:16})," ",n.jsx("span",{className:"hidden sm:inline",children:b("slideshow")})]}),(r||t?.role===Ae.ADMIN)&&ee.length>0&&!he&&n.jsx("button",{onClick:()=>u(h),disabled:i,className:"p-2 text-indigo-600 bg-indigo-50 hover:bg-indigo-100 rounded-xl transition-colors disabled:opacity-50",title:b("downloadAll"),children:i?n.jsx(gt,{size:20,className:"animate-spin"}):n.jsx(xn,{size:20})})]})]}),He&&n.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-md border border-indigo-100 mb-6 animate-in slide-in-from-top-2 flex flex-col items-center text-center relative overflow-hidden",children:[n.jsxs("div",{className:"w-full bg-amber-50 border-b border-amber-100 p-2 mb-4 flex items-center justify-center gap-2 text-amber-700 text-xs font-bold",children:[n.jsx(Ls,{size:14}),b("findMeDevMode")]}),n.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:b("findMeTitle")}),n.jsx("p",{className:"text-sm text-slate-500 mb-4",children:b("findMeDesc")}),Jn?n.jsxs("div",{className:"flex items-center justify-center py-4 text-indigo-600",children:[n.jsx(gt,{className:"animate-spin mr-2"})," ",b("scanning")]}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("label",{className:"cursor-pointer bg-indigo-600 text-white px-6 py-3 rounded-full font-bold text-sm hover:bg-indigo-700 transition-colors flex items-center gap-2 shadow-lg shadow-indigo-200",children:[n.jsx(fo,{size:18}),b("uploadSelfie"),n.jsx("input",{id:"find-me-upload",name:"find-me-upload",type:"file",accept:"image/*",capture:"user",className:"hidden",onChange:us,autoComplete:"off"})]}),bt&&n.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-indigo-500 shadow-sm",children:n.jsx("img",{src:bt,className:"w-full h-full object-cover",alt:"Selfie"})})]})]}),n.jsx("div",{className:"mb-24 min-h-screen",children:n.jsx(tl,{style:{height:"100vh"},data:uo,itemContent:p=>ps(p),listClassName:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",itemClassName:"",overscan:5})}),ee.length===0&&n.jsxs("div",{className:"text-center py-20 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center mb-4",children:ve?n.jsx(_o,{className:"text-slate-300",size:32}):n.jsx(fo,{className:"text-slate-300",size:32})}),n.jsx("h3",{className:"text-lg font-medium text-slate-900",children:ve?"No matches found":b("noPhotos")}),r&&!ve&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-slate-500 mb-4",children:"Your event is live! Start the gallery."}),n.jsxs("button",{onClick:()=>j("upload"),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-indigo-700 transition-colors flex items-center gap-2 mx-auto shadow-lg",children:[n.jsx(qo,{size:18}),b("upload")]})]}),!r&&!ve&&n.jsx("p",{className:"text-slate-500",children:b("beFirst")}),ve&&n.jsx("button",{onClick:()=>vt(""),className:"mt-4 text-indigo-600 font-bold hover:underline",children:"Clear Search"})]})]}):n.jsxs("div",{className:"max-w-2xl mx-auto mb-24",children:[n.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:b("signGuestbook")}),n.jsxs("form",{onSubmit:cs,className:"space-y-4",children:[n.jsx("input",{id:"guestbook-name-input",name:"guestbook-name",type:"text",value:Ye,onChange:p=>De(p.target.value),placeholder:b("yourName"),required:!0,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none",autoComplete:"name"}),n.jsx("textarea",{value:$e,onChange:p=>_e(p.target.value),placeholder:b("leaveMessage"),required:!0,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none"}),n.jsxs("button",{type:"submit",className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Uo,{size:18})," ",b("signGuestbook")]})]})]}),n.jsx("div",{className:"space-y-4",children:m.map(p=>n.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm animate-in slide-in-from-top-1",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:p.senderName}),n.jsx("span",{className:"text-xs text-slate-400",children:new Date(p.createdAt).toLocaleDateString()})]}),n.jsx("p",{className:"text-slate-600",children:p.message})]},p.id))})]}),Se.upgradePrompt&&!Se.enabled&&n.jsx("div",{className:"fixed bottom-[calc(6rem+env(safe-area-inset-bottom))] left-4 right-4 z-30",children:n.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-3 shadow-lg",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(wn,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Video uploads available on Pro plan"}),n.jsx("p",{className:"text-xs text-amber-700 mt-0.5",children:"Upgrade to unlock 4K video uploads and advanced features"})]}),n.jsx("button",{onClick:()=>window.open("/pricing","_blank"),className:"flex-shrink-0 bg-amber-600 text-white px-3 py-1.5 rounded-lg text-xs font-medium hover:bg-amber-700 transition-colors",children:"Upgrade"})]})})}),n.jsx("div",{className:`fixed bottom-[calc(2rem+env(safe-area-inset-bottom))] left-0 right-0 flex justify-center z-40 pointer-events-auto ${Se.upgradePrompt&&!Se.enabled?"bottom-[calc(8rem+env(safe-area-inset-bottom))]":""}`,children:n.jsxs("div",{className:"flex items-center gap-4 p-2 pr-3 pl-3 bg-black/80 backdrop-blur-xl rounded-full shadow-2xl border border-white/10 text-white",children:[Dt&&n.jsx("button",{onClick:()=>j("camera"),className:"flex flex-col items-center justify-center w-12 h-12 rounded-full bg-white text-black shadow-lg active:scale-95 transition-transform",title:Se.enabled?"Take photo":Se.message,children:n.jsx(fo,{size:24})}),n.jsx("button",{onClick:()=>j("upload"),className:`flex flex-col items-center justify-center w-12 h-12 rounded-full transition-colors ${Se.enabled?Dt?"bg-white/10 hover:bg-white/20":"bg-white text-black shadow-lg hover:bg-slate-100":"bg-gray-500/50 cursor-not-allowed"}`,title:Se.enabled?"Upload media":Se.message,disabled:!Se.enabled&&!Se.visible,children:Se.enabled?n.jsx(Xo,{size:24}):n.jsxs("div",{className:"relative",children:[n.jsx(Xo,{size:24}),n.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-amber-400 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs font-bold text-black",children:""})})]})}),n.jsx("div",{className:"w-px h-8 bg-white/20"}),n.jsx("button",{onClick:()=>B(!0),className:"flex flex-col items-center justify-center w-10 h-10 rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-colors",children:n.jsx(gn,{size:20})}),t?.role===Ae.PHOTOGRAPHER&&n.jsx("button",{onClick:()=>d(!c),className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${c?"bg-amber-400 text-black":"text-white/50 hover:text-white"}`,children:n.jsx($o,{size:20})})]})}),a!==null&&n.jsxs("div",{className:"fixed inset-0 z-[60] bg-black flex items-center justify-center backdrop-blur-2xl animate-in fade-in duration-200 touch-none",onPointerDown:rs,onPointerMove:ls,onPointerUp:co,onPointerCancel:co,onPointerLeave:co,children:[n.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-50 bg-gradient-to-b from-black/60 to-transparent pt-[env(safe-area-inset-top)]",children:[n.jsxs("div",{className:"text-white/80 text-sm font-medium",children:[a+1," / ",ee.length]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>M(!S),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors",children:S?n.jsx(Bs,{size:20}):n.jsx(wo,{size:20})}),n.jsx("button",{onClick:Ot,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors",children:n.jsx(ht,{size:20})})]})]}),n.jsx("button",{onClick:()=>Ue("prev"),className:"absolute left-4 p-3 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors z-50 hidden md:block",children:n.jsx(Ds,{size:32})}),n.jsx("button",{onClick:()=>Ue("next"),className:"absolute right-4 p-3 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors z-50 hidden md:block",children:n.jsx(As,{size:32})}),n.jsxs("div",{className:"w-full h-full relative overflow-hidden",onClick:Ot,children:[n.jsx("div",{className:"absolute top-0 left-0 h-full flex items-center",style:{transform:`translateX(calc(-100vw + ${Be}px))`,transition:Ie||me?"none":"transform 0.3s ease-out",width:"300vw"},onClick:p=>p.stopPropagation(),children:[-1,0,1].map(p=>{const L=(a+p+ee.length)%ee.length,y=ee[L];return n.jsx("div",{className:"w-[100vw] h-full flex-shrink-0 flex items-center justify-center p-2 md:p-10",children:y.type==="video"?n.jsx("video",{src:y.url,controls:!0,autoPlay:p===0&&S,className:"max-w-full max-h-full rounded-lg shadow-2xl object-contain bg-black",playsInline:!0,muted:S,onClick:U=>U.stopPropagation(),onError:U=>{console.error("Video failed to load in lightbox:",y.url)},style:{pointerEvents:"auto",width:"auto",height:"auto",maxWidth:"100%",maxHeight:"100%"}}):n.jsx("img",{src:y.previewUrl||y.url,alt:y.caption,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl select-none",style:{transform:fn(y.orientation)},draggable:!1})},`${L}-${p}`)})}),n.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/70 to-transparent p-6 pb-[calc(1.5rem+env(safe-area-inset-bottom))] flex flex-col gap-4 max-h-[40vh] overflow-y-auto pointer-events-auto",onClick:p=>p.stopPropagation(),children:[n.jsxs("div",{className:"text-center mb-2",children:[ee[a].privacy==="private"&&n.jsxs("div",{className:"flex items-center justify-center gap-1 text-amber-400 mb-1 text-xs font-bold uppercase tracking-wider",children:[n.jsx(mo,{size:12})," Private"]}),n.jsx("p",{className:"text-white text-lg font-bold drop-shadow-md",children:ee[a].caption}),n.jsxs("p",{className:"text-white/60 text-sm mt-1",children:[new Date(ee[a].uploadedAt).toLocaleDateString(),"  ",ee[a].uploaderName]})]}),n.jsxs("div",{className:"w-full max-w-lg mx-auto bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10",children:[n.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2 mb-3 custom-scrollbar",children:ee[a].comments?.length?ee[a].comments.map(p=>n.jsxs("div",{className:"text-sm",children:[n.jsxs("span",{className:"font-bold text-white mr-2",children:[p.senderName,":"]}),n.jsx("span",{className:"text-white/80",children:p.text})]},p.id)):n.jsx("p",{className:"text-white/40 text-xs text-center italic",children:"No comments yet."})}),n.jsxs("form",{onSubmit:ds,className:"flex gap-2",children:[n.jsx("input",{type:"text",value:K,onChange:p=>$(p.target.value),placeholder:"Add a comment...",className:"flex-1 bg-black/20 text-white text-sm rounded-lg px-3 py-2 border border-white/20 focus:outline-none focus:border-white/50 placeholder:text-white/30"}),n.jsx("button",{type:"submit",className:"p-2 bg-white/20 rounded-lg hover:bg-white/30 text-white transition-colors",children:n.jsx(Uo,{size:16})})]})]})]})]})]}),rt?.show&&n.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 md:left-auto md:right-4 md:w-96",children:n.jsx("div",{className:`p-4 rounded-lg shadow-lg border backdrop-blur-md ${rt.type==="success"?"bg-green-50 border-green-200 text-green-800":rt.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsxs("div",{className:"flex-shrink-0",children:[rt.type==="success"&&n.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),rt.type==="error"&&n.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),rt.type==="info"&&n.jsx(gt,{className:"h-5 w-5 text-blue-400 animate-spin"})]}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm font-medium",children:rt.message})}),n.jsx("div",{className:"ml-auto pl-3",children:n.jsx("button",{onClick:()=>mt(null),className:"inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 hover:bg-black/10",children:n.jsx(ht,{className:"h-4 w-4"})})})]})})}),P&&n.jsx(dl,{eventId:e.id,eventTitle:e.title,onClose:()=>B(!1),t:b})]})};Qn.displayName="EventGallery";const Nl=Kn(Qn);export{Nl as EventGallery};
