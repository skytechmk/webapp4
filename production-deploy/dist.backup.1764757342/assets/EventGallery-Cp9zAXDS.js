import{j as n,U as Le,g as At,s as De,T as cs,b as xt}from"./index-CQ1VtCuz.js";import{b as G,r as P,d as ds}from"./vendor-Bw8Oeg0g.js";import{X as dt,a8 as rn,a9 as an,aa as cn,ab as us,ac as ms,M as fs,D as dn,b as un,ad as mn,ae as hs,P as gs,af as Bo,ag as ps,n as lo,ah as xs,ai as bs,y as vs,aj as ut,ak as Lo,F as Do,c as ws,L as ys,al as js,am as Ao,a7 as Fo,T as Is,an as Ss,ao as fo,v as Ns,f as ro,x as Oo,a5 as fn,ap as Go,aq as Ts,ar as ks,as as Cs}from"./libs-CW3sJYx5.js";import{i as Vt,a as zs,b as Es}from"./deviceDetection-DQJIv-ne.js";const Xt=0,Ke=1,ft=2,hn=4;function Wo(e){return()=>e}function Ms(e){e()}function Hs(e,t){return o=>e(t(o))}function Vo(e,t){return()=>e(t)}function Rs(e,t){return o=>e(t,o)}function wo(e){return e!==void 0}function Ps(...e){return()=>{e.map(Ms)}}function Tt(){}function Qt(e,t){return t(e),e}function Bs(e,t){return t(e)}function se(...e){return e}function Z(e,t){return e(Ke,t)}function V(e,t){e(Xt,t)}function yo(e){e(ft)}function ie(e){return e(hn)}function L(e,t){return Z(e,Rs(t,Xt))}function He(e,t){const o=e(Ke,s=>{o(),t(s)});return o}function $o(e){let t,o;return s=>l=>{t=l,o&&clearTimeout(o),o=setTimeout(()=>{s(t)},e)}}function gn(e,t){return e===t}function ne(e=gn){let t;return o=>s=>{e(t,s)||(t=s,o(s))}}function F(e){return t=>o=>{e(o)&&t(o)}}function M(e){return t=>Hs(t,e)}function Ae(e){return t=>()=>{t(e)}}function w(e,...t){const o=Ls(...t);return(s,l)=>{switch(s){case ft:yo(e);return;case Ke:return Z(e,o(l))}}}function Fe(e,t){return o=>s=>{o(t=e(t,s))}}function lt(e){return t=>o=>{e>0?e--:t(o)}}function Ye(e){let t=null,o;return s=>l=>{t=l,!o&&(o=setTimeout(()=>{o=void 0,s(t)},e))}}function $(...e){const t=new Array(e.length);let o=0,s=null;const l=Math.pow(2,e.length)-1;return e.forEach((r,i)=>{const a=Math.pow(2,i);Z(r,c=>{const u=o;o=o|a,t[i]=c,u!==l&&o===l&&s&&(s(),s=null)})}),r=>i=>{const a=()=>{r([i].concat(t))};o===l?a():s=a}}function Ls(...e){return t=>e.reduceRight(Bs,t)}function Ds(e){let t,o;const s=()=>t==null?void 0:t();return function(l,r){switch(l){case Ke:return r?o===r?void 0:(s(),o=r,t=Z(e,r),t):(s(),Tt);case ft:s(),o=null;return}}}function S(e){let t=e;const o=Y();return(s,l)=>{switch(s){case Xt:t=l;break;case Ke:{l(t);break}case hn:return t}return o(s,l)}}function be(e,t){return Qt(S(t),o=>L(e,o))}function Y(){const e=[];return(t,o)=>{switch(t){case Xt:e.slice().forEach(s=>{s(o)});return;case ft:e.splice(0,e.length);return;case Ke:return e.push(o),()=>{const s=e.indexOf(o);s>-1&&e.splice(s,1)}}}}function Ne(e){return Qt(Y(),t=>L(e,t))}function Q(e,t=[],{singleton:o}={singleton:!0}){return{constructor:e,dependencies:t,id:As(),singleton:o}}const As=()=>Symbol();function Fs(e){const t=new Map,o=({constructor:s,dependencies:l,id:r,singleton:i})=>{if(i&&t.has(r))return t.get(r);const a=s(l.map(c=>o(c)));return i&&t.set(r,a),a};return o(e)}function ue(...e){const t=Y(),o=new Array(e.length);let s=0;const l=Math.pow(2,e.length)-1;return e.forEach((r,i)=>{const a=Math.pow(2,i);Z(r,c=>{o[i]=c,s=s|a,s===l&&V(t,o)})}),function(r,i){switch(r){case ft:{yo(t);return}case Ke:return s===l&&i(o),Z(t,i)}}}function O(e,t=gn){return w(e,ne(t))}function ho(...e){return function(t,o){switch(t){case ft:return;case Ke:return Ps(...e.map(s=>Z(s,o)))}}}var ze=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(ze||{});const Os={0:"debug",3:"error",1:"log",2:"warn"},Gs=()=>typeof globalThis>"u"?window:globalThis,Je=Q(()=>{const e=S(3);return{log:S((t,o,s=1)=>{var l;const r=(l=Gs().VIRTUOSO_LOG_LEVEL)!=null?l:ie(e);s>=r&&console[Os[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,o)}),logLevel:e}},[],{singleton:!0});function Kt(e,t,o){return pn(e,t,o).callbackRef}function pn(e,t,o){const s=G.useRef(null);let l=i=>{};const r=G.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(i=>{requestAnimationFrame(()=>{const c=i[0].target;c.offsetParent!==null&&e(c)})}):null,[e,o]);return l=i=>{i&&t?(r==null||r.observe(i),s.current=i):(s.current&&(r==null||r.unobserve(s.current)),s.current=null)},{callbackRef:l,ref:s}}function Ws(e,t,o){const s=G.useRef(null),l=G.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const u=c.getBoundingClientRect(),b=u.width;let j,y;if(t){const I=t.getBoundingClientRect(),E=u.top-I.top;y=I.height-Math.max(0,E),j=E+t.scrollTop}else{const I=i.current.ownerDocument.defaultView;y=I.innerHeight-Math.max(0,u.top),j=u.top+I.scrollY}s.current={offsetTop:j,visibleHeight:y,visibleWidth:b},e(s.current)},[e,t]),{callbackRef:r,ref:i}=pn(l,!0,o),a=G.useCallback(()=>{l(i.current)},[l,i]);return G.useEffect(()=>{var c;if(t){t.addEventListener("scroll",a);const u=new ResizeObserver(()=>{requestAnimationFrame(a)});return u.observe(t),()=>{t.removeEventListener("scroll",a),u.unobserve(t)}}else{const u=(c=i.current)==null?void 0:c.ownerDocument.defaultView;return u==null||u.addEventListener("scroll",a),u==null||u.addEventListener("resize",a),()=>{u==null||u.removeEventListener("scroll",a),u==null||u.removeEventListener("resize",a)}}},[a,t,i]),r}const we=Q(()=>{const e=Y(),t=Y(),o=S(0),s=Y(),l=S(0),r=Y(),i=Y(),a=S(0),c=S(0),u=S(0),b=S(0),j=Y(),y=Y(),I=S(!1),E=S(!1),p=S(!1);return L(w(e,M(({scrollTop:x})=>x)),t),L(w(e,M(({scrollHeight:x})=>x)),i),L(t,l),{deviation:o,fixedFooterHeight:u,fixedHeaderHeight:c,footerHeight:b,headerHeight:a,horizontalDirection:E,scrollBy:y,scrollContainerState:e,scrollHeight:i,scrollingInProgress:I,scrollTo:j,scrollTop:t,skipAnimationFrameInResizeObserver:p,smoothScrollTargetReached:s,statefulScrollTop:l,viewportHeight:r}},[],{singleton:!0}),wt={lvl:0};function xn(e,t){const o=e.length;if(o===0)return[];let{index:s,value:l}=t(e[0]);const r=[];for(let i=1;i<o;i++){const{index:a,value:c}=t(e[i]);r.push({end:a-1,start:s,value:l}),s=a,l=c}return r.push({end:1/0,start:s,value:l}),r}function te(e){return e===wt}function yt(e,t){if(!te(e))return t===e.k?e.v:t<e.k?yt(e.l,t):yt(e.r,t)}function Re(e,t,o="k"){if(te(e))return[-1/0,void 0];if(Number(e[o])===t)return[e.k,e.v];if(Number(e[o])<t){const s=Re(e.r,t,o);return s[0]===-1/0?[e.k,e.v]:s}return Re(e.l,t,o)}function Se(e,t,o){return te(e)?wn(t,o,1):t===e.k?he(e,{k:t,v:o}):t<e.k?_o(he(e,{l:Se(e.l,t,o)})):_o(he(e,{r:Se(e.r,t,o)}))}function mt(){return wt}function Jt(e,t,o){if(te(e))return[];const s=Re(e,t)[0];return Vs(po(e,s,o))}function go(e,t){if(te(e))return wt;const{k:o,l:s,r:l}=e;if(t===o){if(te(s))return l;if(te(l))return s;{const[r,i]=vn(s);return Gt(he(e,{k:r,l:bn(s),v:i}))}}else return t<o?Gt(he(e,{l:go(s,t)})):Gt(he(e,{r:go(l,t)}))}function st(e){return te(e)?[]:[...st(e.l),{k:e.k,v:e.v},...st(e.r)]}function po(e,t,o){if(te(e))return[];const{k:s,l,r,v:i}=e;let a=[];return s>t&&(a=a.concat(po(l,t,o))),s>=t&&s<=o&&a.push({k:s,v:i}),s<=o&&(a=a.concat(po(r,t,o))),a}function Gt(e){const{l:t,lvl:o,r:s}=e;if(s.lvl>=o-1&&t.lvl>=o-1)return e;if(o>s.lvl+1){if(io(t))return yn(he(e,{lvl:o-1}));if(!te(t)&&!te(t.r))return he(t.r,{l:he(t,{r:t.r.l}),lvl:o,r:he(e,{l:t.r.r,lvl:o-1})});throw new Error("Unexpected empty nodes")}else{if(io(e))return xo(he(e,{lvl:o-1}));if(!te(s)&&!te(s.l)){const l=s.l,r=io(l)?s.lvl-1:s.lvl;return he(l,{l:he(e,{lvl:o-1,r:l.l}),lvl:l.lvl+1,r:xo(he(s,{l:l.r,lvl:r}))})}else throw new Error("Unexpected empty nodes")}}function he(e,t){return wn(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function bn(e){return te(e.r)?e.l:Gt(he(e,{r:bn(e.r)}))}function io(e){return te(e)||e.lvl>e.r.lvl}function vn(e){return te(e.r)?[e.k,e.v]:vn(e.r)}function wn(e,t,o,s=wt,l=wt){return{k:e,l:s,lvl:o,r:l,v:t}}function _o(e){return xo(yn(e))}function yn(e){const{l:t}=e;return!te(t)&&t.lvl===e.lvl?he(t,{r:he(e,{l:t.r})}):e}function xo(e){const{lvl:t,r:o}=e;return!te(o)&&!te(o.r)&&o.lvl===t&&o.r.lvl===t?he(o,{l:he(e,{r:o.l}),lvl:t+1}):e}function Vs(e){return xn(e,({k:t,v:o})=>({index:t,value:o}))}function jn(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function jt(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const jo=Q(()=>({recalcInProgress:S(!1)}),[],{singleton:!0});function In(e,t,o){return e[$t(e,t,o)]}function $t(e,t,o,s=0){let l=e.length-1;for(;s<=l;){const r=Math.floor((s+l)/2),i=e[r],a=o(i,t);if(a===0)return r;if(a===-1){if(l-s<2)return r-1;l=r-1}else{if(l===s)return r;s=r+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function $s(e,t,o,s){const l=$t(e,t,s),r=$t(e,o,s,l);return e.slice(l,r+1)}function It(e,t){return Math.round(e.getBoundingClientRect()[t])}function Zt(e){return!te(e.groupOffsetTree)}function Io({index:e},t){return t===e?0:t<e?-1:1}function _s(){return{groupIndices:[],groupOffsetTree:mt(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:mt()}}function qs(e,t){let o=te(e)?0:1/0;for(const s of t){const{endIndex:l,size:r,startIndex:i}=s;if(o=Math.min(o,i),te(e)){e=Se(e,0,r);continue}const a=Jt(e,i-1,l+1);if(a.some(Us(s)))continue;let c=!1,u=!1;for(const{end:b,start:j,value:y}of a)c?(l>=j||r===y)&&(e=go(e,j)):(u=y!==r,c=!0),b>l&&l>=j&&y!==r&&(e=Se(e,l+1,y));u&&(e=Se(e,i,r))}return[e,o]}function Ys(e){return typeof e.groupIndex<"u"}function Xs({offset:e},t){return t===e?0:t<e?-1:1}function St(e,t,o){if(t.length===0)return 0;const{index:s,offset:l,size:r}=In(t,e,Io),i=e-s,a=r*i+(i-1)*o+l;return a>0?a+o:a}function Sn(e,t){if(!Zt(t))return e;let o=0;for(;t.groupIndices[o]<=e+o;)o++;return e+o}function Nn(e,t,o){if(Ys(e))return t.groupIndices[e.groupIndex]+1;{const s=e.index==="LAST"?o:e.index;let l=Sn(s,t);return l=Math.max(0,l,Math.min(o,l)),l}}function Qs(e,t,o,s=0){return s>0&&(t=Math.max(t,In(e,s,Io).offset)),xn($s(e,t,o,Xs),Zs)}function Ks(e,[t,o,s,l]){t.length>0&&s("received item sizes",t,ze.DEBUG);const r=e.sizeTree;let i=r,a=0;if(o.length>0&&te(r)&&t.length===2){const y=t[0].size,I=t[1].size;i=o.reduce((E,p)=>Se(Se(E,p,y),p+1,I),i)}else[i,a]=qs(i,t);if(i===r)return e;const{lastIndex:c,lastOffset:u,lastSize:b,offsetTree:j}=bo(e.offsetTree,a,i,l);return{groupIndices:o,groupOffsetTree:o.reduce((y,I)=>Se(y,I,St(I,j,l)),mt()),lastIndex:c,lastOffset:u,lastSize:b,offsetTree:j,sizeTree:i}}function Js(e){return st(e).map(({k:t,v:o},s,l)=>{const r=l[s+1];return{endIndex:r?r.k-1:1/0,size:o,startIndex:t}})}function qo(e,t){let o=0,s=0;for(;o<e;)o+=t[s+1]-t[s]-1,s++;return s-(o===e?0:1)}function bo(e,t,o,s){let l=e,r=0,i=0,a=0,c=0;if(t!==0){c=$t(l,t-1,Io),a=l[c].offset;const u=Re(o,t-1);r=u[0],i=u[1],l.length&&l[c].size===Re(o,t)[1]&&(c-=1),l=l.slice(0,c+1)}else l=[];for(const{start:u,value:b}of Jt(o,t,1/0)){const j=u-r,y=j*i+a+j*s;l.push({index:u,offset:y,size:b}),r=u,a=y,i=b}return{lastIndex:r,lastOffset:a,lastSize:i,offsetTree:l}}function Zs(e){return{index:e.index,value:e}}function Us(e){const{endIndex:t,size:o,startIndex:s}=e;return l=>l.start===s&&(l.end===t||l.end===1/0)&&l.value===o}const el={offsetHeight:"height",offsetWidth:"width"},Oe=Q(([{log:e},{recalcInProgress:t}])=>{const o=Y(),s=Y(),l=be(s,0),r=Y(),i=Y(),a=S(0),c=S([]),u=S(void 0),b=S(void 0),j=S(void 0),y=S(void 0),I=S((d,v)=>It(d,el[v])),E=S(void 0),p=S(0),x=_s(),f=be(w(o,$(c,e,p),Fe(Ks,x),ne()),x),m=be(w(c,ne(),Fe((d,v)=>({current:v,prev:d.current}),{current:[],prev:[]}),M(({prev:d})=>d)),[]);L(w(c,F(d=>d.length>0),$(f,p),M(([d,v,C])=>{const R=d.reduce((D,A,_)=>Se(D,A,St(A,v.offsetTree,C)||_),mt());return{...v,groupIndices:d,groupOffsetTree:R}})),f),L(w(s,$(f),F(([d,{lastIndex:v}])=>d<v),M(([d,{lastIndex:v,lastSize:C}])=>[{endIndex:v,size:C,startIndex:d}])),o),L(u,b);const k=be(w(u,M(d=>d===void 0)),!0);L(w(b,F(d=>d!==void 0&&te(ie(f).sizeTree)),M(d=>{const v=ie(j),C=ie(c).length>0;return v?C?[{endIndex:0,size:v,startIndex:0},{endIndex:1,size:d,startIndex:1}]:[]:[{endIndex:0,size:d,startIndex:0}]})),o),L(w(y,F(d=>d!==void 0&&d.length>0&&te(ie(f).sizeTree)),M(d=>{const v=[];let C=d[0],R=0;for(let D=1;D<d.length;D++){const A=d[D];A!==C&&(v.push({endIndex:D-1,size:C,startIndex:R}),C=A,R=D)}return v.push({endIndex:d.length-1,size:C,startIndex:R}),v})),o),L(w(c,$(j,b),F(([,d,v])=>d!==void 0&&v!==void 0),M(([d,v,C])=>{const R=[];for(let D=0;D<d.length;D++){const A=d[D],_=d[D+1];R.push({startIndex:A,endIndex:A,size:v}),_!==void 0&&R.push({startIndex:A+1,endIndex:_-1,size:C})}return R})),o);const B=Ne(w(o,$(f),Fe(({sizes:d},[v,C])=>({changed:C!==d,sizes:C}),{changed:!1,sizes:x}),M(d=>d.changed)));Z(w(a,Fe((d,v)=>({diff:d.prev-v,prev:v}),{diff:0,prev:0}),M(d=>d.diff)),d=>{const{groupIndices:v}=ie(f);if(d>0)V(t,!0),V(r,d+qo(d,v));else if(d<0){const C=ie(m);C.length>0&&(d-=qo(-d,C)),V(i,d)}}),Z(w(a,$(e)),([d,v])=>{d<0&&v("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:a},ze.ERROR)});const H=Ne(r);L(w(r,$(f),M(([d,v])=>{const C=v.groupIndices.length>0,R=[],D=v.lastSize;if(C){const A=yt(v.sizeTree,0);let _=0,X=0;for(;_<d;){const J=v.groupIndices[X],de=v.groupIndices.length===X+1?1/0:v.groupIndices[X+1]-J-1;R.push({endIndex:J,size:A,startIndex:J}),R.push({endIndex:J+1+de-1,size:D,startIndex:J+1}),X++,_+=de+1}const K=st(v.sizeTree);return _!==d&&K.shift(),K.reduce((J,{k:de,v:ae})=>{let ge=J.ranges;return J.prevSize!==0&&(ge=[...J.ranges,{endIndex:de+d-1,size:J.prevSize,startIndex:J.prevIndex}]),{prevIndex:de+d,prevSize:ae,ranges:ge}},{prevIndex:d,prevSize:0,ranges:R}).ranges}return st(v.sizeTree).reduce((A,{k:_,v:X})=>({prevIndex:_+d,prevSize:X,ranges:[...A.ranges,{endIndex:_+d-1,size:A.prevSize,startIndex:A.prevIndex}]}),{prevIndex:0,prevSize:D,ranges:[]}).ranges})),o);const h=Ne(w(i,$(f,p),M(([d,{offsetTree:v},C])=>{const R=-d;return St(R,v,C)})));return L(w(i,$(f,p),M(([d,v,C])=>{if(v.groupIndices.length>0){if(te(v.sizeTree))return v;let R=mt();const D=ie(m);let A=0,_=0,X=0;for(;A<-d;){X=D[_];const K=D[_+1]-X-1;_++,A+=K+1}if(R=st(v.sizeTree).reduce((K,{k:J,v:de})=>Se(K,Math.max(0,J+d),de),R),A!==-d){const K=yt(v.sizeTree,X);R=Se(R,0,K);const J=Re(v.sizeTree,-d+1)[1];R=Se(R,1,J)}return{...v,sizeTree:R,...bo(v.offsetTree,0,R,C)}}else{const R=st(v.sizeTree).reduce((D,{k:A,v:_})=>Se(D,Math.max(0,A+d),_),mt());return{...v,sizeTree:R,...bo(v.offsetTree,0,R,C)}}})),f),{beforeUnshiftWith:H,data:E,defaultItemSize:b,firstItemIndex:a,fixedItemSize:u,fixedGroupSize:j,gap:p,groupIndices:c,heightEstimates:y,itemSize:I,listRefresh:B,shiftWith:i,shiftWithOffset:h,sizeRanges:o,sizes:f,statefulTotalCount:l,totalCount:s,trackItemSizes:k,unshiftWith:r}},se(Je,jo),{singleton:!0});function tl(e){return e.reduce((t,o)=>(t.groupIndices.push(t.totalCount),t.totalCount+=o+1,t),{groupIndices:[],totalCount:0})}const Tn=Q(([{groupIndices:e,sizes:t,totalCount:o},{headerHeight:s,scrollTop:l}])=>{const r=Y(),i=Y(),a=Ne(w(r,M(tl)));return L(w(a,M(c=>c.totalCount)),o),L(w(a,M(c=>c.groupIndices)),e),L(w(ue(l,t,s),F(([c,u])=>Zt(u)),M(([c,u,b])=>Re(u.groupOffsetTree,Math.max(c-b,0),"v")[0]),ne(),M(c=>[c])),i),{groupCounts:r,topItemsIndexes:i}},se(Oe,we)),Ze=Q(([{log:e}])=>{const t=S(!1),o=Ne(w(t,F(s=>s),ne()));return Z(t,s=>{s&&ie(e)("props updated",{},ze.DEBUG)}),{didMount:o,propsReady:t}},se(Je),{singleton:!0}),ol=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function kn(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!ol)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const kt=Q(([{gap:e,listRefresh:t,sizes:o,totalCount:s},{fixedFooterHeight:l,fixedHeaderHeight:r,footerHeight:i,headerHeight:a,scrollingInProgress:c,scrollTo:u,smoothScrollTargetReached:b,viewportHeight:j},{log:y}])=>{const I=Y(),E=Y(),p=S(0);let x=null,f=null,m=null;function k(){x&&(x(),x=null),m&&(m(),m=null),f&&(clearTimeout(f),f=null),V(c,!1)}return L(w(I,$(o,j,s,p,a,i,y),$(e,r,l),M(([[B,H,h,d,v,C,R,D],A,_,X])=>{const K=kn(B),{align:J,behavior:de,offset:ae}=K,ge=d-1,me=Nn(K,H,ge);let ce=St(me,H.offsetTree,A)+C;J==="end"?(ce+=_+Re(H.sizeTree,me)[1]-h+X,me===ge&&(ce+=R)):J==="center"?ce+=(_+Re(H.sizeTree,me)[1]-h+X)/2:ce-=v,ae&&(ce+=ae);const Ge=ye=>{k(),ye?(D("retrying to scroll to",{location:B},ze.DEBUG),V(I,B)):(V(E,!0),D("list did not change, scroll successful",{},ze.DEBUG))};if(k(),de==="smooth"){let ye=!1;m=Z(t,Ue=>{ye=ye||Ue}),x=He(b,()=>{Ge(ye)})}else x=He(w(t,nl(150)),Ge);return f=setTimeout(()=>{k()},1200),V(c,!0),D("scrolling from index to",{behavior:de,index:me,top:ce},ze.DEBUG),{behavior:de,top:ce}})),u),{scrollTargetReached:E,scrollToIndex:I,topListHeight:p}},se(Oe,we,Je),{singleton:!0});function nl(e){return t=>{const o=setTimeout(()=>{t(!1)},e);return s=>{s&&(t(!0),clearTimeout(o))}}}function So(e,t){e==0?t():requestAnimationFrame(()=>{So(e-1,t)})}function No(e,t){const o=t-1;return typeof e=="number"?e:e.index==="LAST"?o:e.index}const Ct=Q(([{defaultItemSize:e,listRefresh:t,sizes:o},{scrollTop:s},{scrollTargetReached:l,scrollToIndex:r},{didMount:i}])=>{const a=S(!0),c=S(0),u=S(!0);return L(w(i,$(c),F(([b,j])=>!!j),Ae(!1)),a),L(w(i,$(c),F(([b,j])=>!!j),Ae(!1)),u),Z(w(ue(t,i),$(a,o,e,u),F(([[,b],j,{sizeTree:y},I,E])=>b&&(!te(y)||wo(I))&&!j&&!E),$(c)),([,b])=>{He(l,()=>{V(u,!0)}),So(4,()=>{He(s,()=>{V(a,!0)}),V(r,b)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:c,scrolledToInitialItem:a}},se(Oe,we,kt,Ze),{singleton:!0});function Cn(e,t){return Math.abs(e-t)<1.01}const Nt="up",bt="down",sl="none",ll={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},rl=0,zt=Q(([{footerHeight:e,headerHeight:t,scrollBy:o,scrollContainerState:s,scrollTop:l,viewportHeight:r}])=>{const i=S(!1),a=S(!0),c=Y(),u=Y(),b=S(4),j=S(rl),y=be(w(ho(w(O(l),lt(1),Ae(!0)),w(O(l),lt(1),Ae(!1),$o(100))),ne()),!1),I=be(w(ho(w(o,Ae(!0)),w(o,Ae(!1),$o(200))),ne()),!1);L(w(ue(O(l),O(j)),M(([m,k])=>m<=k),ne()),a),L(w(a,Ye(50)),u);const E=Ne(w(ue(s,O(r),O(t),O(e),O(b)),Fe((m,[{scrollHeight:k,scrollTop:B},H,h,d,v])=>{const C=B+H-k>-v,R={scrollHeight:k,scrollTop:B,viewportHeight:H};if(C){let A,_;return B>m.state.scrollTop?(A="SCROLLED_DOWN",_=m.state.scrollTop-B):(A="SIZE_DECREASED",_=m.state.scrollTop-B||m.scrollTopDelta),{atBottom:!0,atBottomBecause:A,scrollTopDelta:_,state:R}}let D;return R.scrollHeight>m.state.scrollHeight?D="SIZE_INCREASED":H<m.state.viewportHeight?D="VIEWPORT_HEIGHT_DECREASING":B<m.state.scrollTop?D="SCROLLING_UPWARDS":D="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:D,state:R}},ll),ne((m,k)=>m&&m.atBottom===k.atBottom))),p=be(w(s,Fe((m,{scrollHeight:k,scrollTop:B,viewportHeight:H})=>{if(Cn(m.scrollHeight,k))return{changed:!1,jump:0,scrollHeight:k,scrollTop:B};{const h=k-(B+H)<1;return m.scrollTop!==B&&h?{changed:!0,jump:m.scrollTop-B,scrollHeight:k,scrollTop:B}:{changed:!0,jump:0,scrollHeight:k,scrollTop:B}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),F(m=>m.changed),M(m=>m.jump)),0);L(w(E,M(m=>m.atBottom)),i),L(w(i,Ye(50)),c);const x=S(bt);L(w(s,M(({scrollTop:m})=>m),ne(),Fe((m,k)=>ie(I)?{direction:m.direction,prevScrollTop:k}:{direction:k<m.prevScrollTop?Nt:bt,prevScrollTop:k},{direction:bt,prevScrollTop:0}),M(m=>m.direction)),x),L(w(s,Ye(50),Ae(sl)),x);const f=S(0);return L(w(y,F(m=>!m),Ae(0)),f),L(w(l,Ye(100),$(y),F(([m,k])=>!!k),Fe(([m,k],[B])=>[k,B],[0,0]),M(([m,k])=>k-m)),f),{atBottomState:E,atBottomStateChange:c,atBottomThreshold:b,atTopStateChange:u,atTopThreshold:j,isAtBottom:i,isAtTop:a,isScrolling:y,lastJumpDueToItemResize:p,scrollDirection:x,scrollVelocity:f}},se(we)),_t="top",qt="bottom",Yo="none";function Xo(e,t,o){return typeof e=="number"?o===Nt&&t===_t||o===bt&&t===qt?e:0:o===Nt?t===_t?e.main:e.reverse:t===qt?e.main:e.reverse}function Qo(e,t){var o;return typeof e=="number"?e:(o=e[t])!=null?o:0}const To=Q(([{deviation:e,fixedHeaderHeight:t,headerHeight:o,scrollTop:s,viewportHeight:l}])=>{const r=Y(),i=S(0),a=S(0),c=S(0),u=be(w(ue(O(s),O(l),O(o),O(r,jt),O(c),O(i),O(t),O(e),O(a)),M(([b,j,y,[I,E],p,x,f,m,k])=>{const B=b-m,H=x+f,h=Math.max(y-B,0);let d=Yo;const v=Qo(k,_t),C=Qo(k,qt);return I-=m,I+=y+f,E+=y+f,E-=m,I>b+H-v&&(d=Nt),E<b-h+j+C&&(d=bt),d!==Yo?[Math.max(B-y-Xo(p,_t,d)-v,0),B-h-f+j+Xo(p,qt,d)+C]:null}),F(b=>b!=null),ne(jt)),[0,0]);return{increaseViewportBy:a,listBoundary:r,overscan:c,topListHeight:i,visibleRange:u}},se(we),{singleton:!0});function il(e,t,o){if(Zt(t)){const s=Sn(e,t);return[{index:Re(t.groupOffsetTree,s)[0],offset:0,size:0},{data:o==null?void 0:o[0],index:s,offset:0,size:0}]}return[{data:o==null?void 0:o[0],index:e,offset:0,size:0}]}const ao={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function Wt(e,t,o,s,l,r){const{lastIndex:i,lastOffset:a,lastSize:c}=l;let u=0,b=0;if(e.length>0){u=e[0].offset;const p=e[e.length-1];b=p.offset+p.size}const j=o-i,y=a+j*c+(j-1)*s,I=u,E=y-b;return{bottom:b,firstItemIndex:r,items:Ko(e,l,r),offsetBottom:E,offsetTop:u,top:I,topItems:Ko(t,l,r),topListHeight:t.reduce((p,x)=>x.size+p,0),totalCount:o}}function zn(e,t,o,s,l,r){let i=0;if(o.groupIndices.length>0)for(const b of o.groupIndices){if(b-i>=e)break;i++}const a=e+i,c=No(t,a),u=Array.from({length:a}).map((b,j)=>({data:r[j+c],index:j+c,offset:0,size:0}));return Wt(u,[],a,l,o,s)}function Ko(e,t,o){if(e.length===0)return[];if(!Zt(t))return e.map(u=>({...u,index:u.index+o,originalIndex:u.index}));const s=e[0].index,l=e[e.length-1].index,r=[],i=Jt(t.groupOffsetTree,s,l);let a,c=0;for(const u of e){(!a||a.end<u.index)&&(a=i.shift(),c=t.groupIndices.indexOf(a.start));let b;u.index===a.start?b={index:c,type:"group"}:b={groupIndex:c,index:u.index-(c+1)+o},r.push({...b,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return r}const rt=Q(([{data:e,firstItemIndex:t,gap:o,sizes:s,totalCount:l},r,{listBoundary:i,topListHeight:a,visibleRange:c},{initialTopMostItemIndex:u,scrolledToInitialItem:b},{topListHeight:j},y,{didMount:I},{recalcInProgress:E}])=>{const p=S([]),x=S(0),f=Y();L(r.topItemsIndexes,p);const m=be(w(ue(I,E,O(c,jt),O(l),O(s),O(u),b,O(p),O(t),O(o),e),F(([h,d,,v,,,,,,,C])=>{const R=C&&C.length!==v;return h&&!d&&!R}),M(([,,[h,d],v,C,R,D,A,_,X,K])=>{const J=C,{offsetTree:de,sizeTree:ae}=J,ge=ie(x);if(v===0)return{...ao,totalCount:v};if(h===0&&d===0)return ge===0?{...ao,totalCount:v}:zn(ge,R,C,_,X,K||[]);if(te(ae))return ge>0?null:Wt(il(No(R,v),J,K),[],v,X,J,_);const me=[];if(A.length>0){const Pe=A[0],xe=A[A.length-1];let je=0;for(const N of Jt(ae,Pe,xe)){const W=N.value,U=Math.max(N.start,Pe),fe=Math.min(N.end,xe);for(let le=U;le<=fe;le++)me.push({data:K==null?void 0:K[le],index:le,offset:je,size:W}),je+=W}}if(!D)return Wt([],me,v,X,J,_);const ce=A.length>0?A[A.length-1]+1:0,Ge=Qs(de,h,d,ce);if(Ge.length===0)return null;const ye=v-1,Ue=Qt([],Pe=>{for(const xe of Ge){const je=xe.value;let N=je.offset,W=xe.start;const U=je.size;if(je.offset<h){W+=Math.floor((h-je.offset+X)/(U+X));const le=W-xe.start;N+=le*U+le*X}W<ce&&(N+=(ce-W)*U,W=ce);const fe=Math.min(xe.end,ye);for(let le=W;le<=fe&&!(N>=d);le++)Pe.push({data:K==null?void 0:K[le],index:le,offset:N,size:U}),N+=U+X}});return Wt(Ue,me,v,X,J,_)}),F(h=>h!==null),ne()),ao);L(w(e,F(wo),M(h=>h==null?void 0:h.length)),l),L(w(m,M(h=>h.topListHeight)),j),L(j,a),L(w(m,M(h=>[h.top,h.bottom])),i),L(w(m,M(h=>h.items)),f);const k=Ne(w(m,F(({items:h})=>h.length>0),$(l,e),F(([{items:h},d])=>h[h.length-1].originalIndex===d-1),M(([,h,d])=>[h-1,d]),ne(jt),M(([h])=>h))),B=Ne(w(m,Ye(200),F(({items:h,topItems:d})=>h.length>0&&h[0].originalIndex===d.length),M(({items:h})=>h[0].index),ne())),H=Ne(w(m,F(({items:h})=>h.length>0),M(({items:h})=>{let d=0,v=h.length-1;for(;h[d].type==="group"&&d<v;)d++;for(;h[v].type==="group"&&v>d;)v--;return{endIndex:h[v].index,startIndex:h[d].index}}),ne(jn)));return{endReached:k,initialItemCount:x,itemsRendered:f,listState:m,rangeChanged:H,startReached:B,topItemsIndexes:p,...y}},se(Oe,Tn,To,Ct,kt,zt,Ze,jo),{singleton:!0}),En=Q(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:o,headerHeight:s},{listState:l}])=>{const r=Y(),i=be(w(ue(o,e,s,t,l),M(([a,c,u,b,j])=>a+c+u+b+j.offsetBottom+j.bottom)),0);return L(O(i),r),{totalListHeight:i,totalListHeightChanged:r}},se(we,rt),{singleton:!0}),al=Q(([{viewportHeight:e},{totalListHeight:t}])=>{const o=S(!1),s=be(w(ue(o,e,t),F(([l])=>l),M(([,l,r])=>Math.max(0,l-r)),Ye(0),ne()),0);return{alignToBottom:o,paddingTopAddition:s}},se(we,En),{singleton:!0}),Mn=Q(()=>({context:S(null)})),cl=({itemBottom:e,itemTop:t,locationParams:{align:o,behavior:s,...l},viewportBottom:r,viewportTop:i})=>t<i?{...l,align:o??"start",behavior:s}:e>r?{...l,align:o??"end",behavior:s}:null,Hn=Q(([{gap:e,sizes:t,totalCount:o},{fixedFooterHeight:s,fixedHeaderHeight:l,headerHeight:r,scrollingInProgress:i,scrollTop:a,viewportHeight:c},{scrollToIndex:u}])=>{const b=Y();return L(w(b,$(t,c,o,r,l,s,a),$(e),M(([[j,y,I,E,p,x,f,m],k])=>{const{align:B,behavior:H,calculateViewLocation:h=cl,done:d,...v}=j,C=Nn(j,y,E-1),R=St(C,y.offsetTree,k)+p+x,D=R+Re(y.sizeTree,C)[1],A=m+x,_=m+I-f,X=h({itemBottom:D,itemTop:R,locationParams:{align:B,behavior:H,...v},viewportBottom:_,viewportTop:A});return X?d&&He(w(i,F(K=>!K),lt(ie(i)?1:2)),d):d&&d(),X}),F(j=>j!==null)),u),{scrollIntoView:b}},se(Oe,we,kt,rt,Je),{singleton:!0});function Jo(e){return e?e==="smooth"?"smooth":"auto":!1}const dl=(e,t)=>typeof e=="function"?Jo(e(t)):t&&Jo(e),ul=Q(([{listRefresh:e,totalCount:t,fixedItemSize:o,data:s},{atBottomState:l,isAtBottom:r},{scrollToIndex:i},{scrolledToInitialItem:a},{didMount:c,propsReady:u},{log:b},{scrollingInProgress:j},{context:y},{scrollIntoView:I}])=>{const E=S(!1),p=Y();let x=null;function f(H){V(i,{align:"end",behavior:H,index:"LAST"})}Z(w(ue(w(O(t),lt(1)),c),$(O(E),r,a,j),M(([[H,h],d,v,C,R])=>{let D=h&&C,A="auto";return D&&(A=dl(d,v||R),D=D&&!!A),{followOutputBehavior:A,shouldFollow:D,totalCount:H}}),F(({shouldFollow:H})=>H)),({followOutputBehavior:H,totalCount:h})=>{x&&(x(),x=null),ie(o)?requestAnimationFrame(()=>{ie(b)("following output to ",{totalCount:h},ze.DEBUG),f(H)}):x=He(e,()=>{ie(b)("following output to ",{totalCount:h},ze.DEBUG),f(H),x=null})});function m(H){const h=He(l,d=>{H&&!d.atBottom&&d.notAtBottomBecause==="SIZE_INCREASED"&&!x&&(ie(b)("scrolling to bottom due to increased size",{},ze.DEBUG),f("auto"))});setTimeout(h,100)}Z(w(ue(O(E),t,u),F(([H,,h])=>H&&h),Fe(({value:H},[,h])=>({refreshed:H===h,value:h}),{refreshed:!1,value:0}),F(({refreshed:H})=>H),$(E,t)),([,H])=>{ie(a)&&m(H!==!1)}),Z(p,()=>{m(ie(E)!==!1)}),Z(ue(O(E),l),([H,h])=>{H&&!h.atBottom&&h.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&f("auto")});const k=S(null),B=Y();return L(ho(w(O(s),M(H=>{var h;return(h=H==null?void 0:H.length)!=null?h:0})),w(O(t))),B),Z(w(ue(w(B,lt(1)),c),$(O(k),a,j,y),M(([[H,h],d,v,C,R])=>h&&v&&(d==null?void 0:d({context:R,totalCount:H,scrollingInProgress:C}))),F(H=>!!H),Ye(0)),H=>{x&&(x(),x=null),ie(o)?requestAnimationFrame(()=>{ie(b)("scrolling into view",{}),V(I,H)}):x=He(e,()=>{ie(b)("scrolling into view",{}),V(I,H),x=null})}),{autoscrollToBottom:p,followOutput:E,scrollIntoViewOnChange:k}},se(Oe,zt,kt,Ct,Ze,Je,we,Mn,Hn)),ml=Q(([{data:e,firstItemIndex:t,gap:o,sizes:s},{initialTopMostItemIndex:l},{initialItemCount:r,listState:i},{didMount:a}])=>(L(w(a,$(r),F(([,c])=>c!==0),$(l,s,t,o,e),M(([[,c],u,b,j,y,I=[]])=>zn(c,u,b,j,y,I))),i),{}),se(Oe,Ct,rt,Ze),{singleton:!0}),fl=Q(([{didMount:e},{scrollTo:t},{listState:o}])=>{const s=S(0);return Z(w(e,$(s),F(([,l])=>l!==0),M(([,l])=>({top:l}))),l=>{He(w(o,lt(1),F(r=>r.items.length>1)),()=>{requestAnimationFrame(()=>{V(t,l)})})}),{initialScrollTop:s}},se(Ze,we,rt),{singleton:!0}),Rn=Q(([{scrollVelocity:e}])=>{const t=S(!1),o=Y(),s=S(!1);return L(w(e,$(s,t,o),F(([l,r])=>!!r),M(([l,r,i,a])=>{const{enter:c,exit:u}=r;if(i){if(u(l,a))return!1}else if(c(l,a))return!0;return i}),ne()),t),Z(w(ue(t,e,o),$(s)),([[l,r,i],a])=>{l&&a&&a.change&&a.change(r,i)}),{isSeeking:t,scrollSeekConfiguration:s,scrollSeekRangeChanged:o,scrollVelocity:e}},se(zt),{singleton:!0}),ko=Q(([{scrollContainerState:e,scrollTo:t}])=>{const o=Y(),s=Y(),l=Y(),r=S(!1),i=S(void 0);return L(w(ue(o,s),M(([{scrollHeight:a,scrollTop:c,viewportHeight:u},{offsetTop:b}])=>({scrollHeight:a,scrollTop:Math.max(0,c-b),viewportHeight:u}))),e),L(w(t,$(s),M(([a,{offsetTop:c}])=>({...a,top:a.top+c}))),l),{customScrollParent:i,useWindowScroll:r,windowScrollContainerState:o,windowScrollTo:l,windowViewportRect:s}},se(we)),hl=Q(([{sizeRanges:e,sizes:t},{headerHeight:o,scrollTop:s},{initialTopMostItemIndex:l},{didMount:r},{useWindowScroll:i,windowScrollContainerState:a,windowViewportRect:c}])=>{const u=Y(),b=S(void 0),j=S(null),y=S(null);return L(a,j),L(c,y),Z(w(u,$(t,s,i,j,y,o)),([I,E,p,x,f,m,k])=>{const B=Js(E.sizeTree);x&&f!==null&&m!==null&&(p=f.scrollTop-m.offsetTop),p-=k,I({ranges:B,scrollTop:p})}),L(w(b,F(wo),M(gl)),l),L(w(r,$(b),F(([,I])=>I!==void 0),ne(),M(([,I])=>I.ranges)),e),{getState:u,restoreStateFrom:b}},se(Oe,we,Ct,Ze,ko));function gl(e){return{align:"start",index:0,offset:e.scrollTop}}const pl=Q(([{topItemsIndexes:e}])=>{const t=S(0);return L(w(t,F(o=>o>=0),M(o=>Array.from({length:o}).map((s,l)=>l))),e),{topItemCount:t}},se(rt));function Pn(e){let t=!1,o;return()=>(t||(t=!0,o=e()),o)}const xl=Pn(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),bl=Q(([{deviation:e,scrollBy:t,scrollingInProgress:o,scrollTop:s},{isAtBottom:l,isScrolling:r,lastJumpDueToItemResize:i,scrollDirection:a},{listState:c},{beforeUnshiftWith:u,gap:b,shiftWithOffset:j,sizes:y},{log:I},{recalcInProgress:E}])=>{const p=Ne(w(c,$(i),Fe(([,f,m,k],[{bottom:B,items:H,offsetBottom:h,totalCount:d},v])=>{const C=B+h;let R=0;return m===d&&f.length>0&&H.length>0&&(H[0].originalIndex===0&&f[0].originalIndex===0||(R=C-k,R!==0&&(R+=v))),[R,H,d,C]},[0,[],0,0]),F(([f])=>f!==0),$(s,a,o,l,I,E),F(([,f,m,k,,,B])=>!B&&!k&&f!==0&&m===Nt),M(([[f],,,,,m])=>(m("Upward scrolling compensation",{amount:f},ze.DEBUG),f))));function x(f){f>0?(V(t,{behavior:"auto",top:-f}),V(e,0)):(V(e,0),V(t,{behavior:"auto",top:-f}))}return Z(w(p,$(e,r)),([f,m,k])=>{k&&xl()?V(e,m-f):x(-f)}),Z(w(ue(be(r,!1),e,E),F(([f,m,k])=>!f&&!k&&m!==0),M(([f,m])=>m),Ye(1)),x),L(w(j,M(f=>({top:-f}))),t),Z(w(u,$(y,b),M(([f,{groupIndices:m,lastSize:k,sizeTree:B},H])=>{function h(d){return d*(k+H)}if(m.length===0)return h(f);{let d=0;const v=yt(B,0);let C=0,R=0;for(;C<f;){C++,d+=v;let D=m.length===R+1?1/0:m[R+1]-m[R]-1;C+D>f&&(d-=v,D=f-C+1),C+=D,d+=h(D),R++}return d}})),f=>{V(e,f),requestAnimationFrame(()=>{V(t,{top:f}),requestAnimationFrame(()=>{V(e,0),V(E,!1)})})}),{deviation:e}},se(we,zt,rt,Oe,Je,jo)),vl=Q(([e,t,o,s,l,r,i,a,c,u,b])=>({...e,...t,...o,...s,...l,...r,...i,...a,...c,...u,...b}),se(To,ml,Ze,Rn,En,fl,al,ko,Hn,Je,Mn)),Bn=Q(([{data:e,defaultItemSize:t,firstItemIndex:o,fixedItemSize:s,fixedGroupSize:l,gap:r,groupIndices:i,heightEstimates:a,itemSize:c,sizeRanges:u,sizes:b,statefulTotalCount:j,totalCount:y,trackItemSizes:I},{initialItemFinalLocationReached:E,initialTopMostItemIndex:p,scrolledToInitialItem:x},f,m,k,{listState:B,topItemsIndexes:H,...h},{scrollToIndex:d},v,{topItemCount:C},{groupCounts:R},D])=>(L(h.rangeChanged,D.scrollSeekRangeChanged),L(w(D.windowViewportRect,M(A=>A.visibleHeight)),f.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:o,fixedItemHeight:s,fixedGroupHeight:l,gap:r,groupCounts:R,heightEstimates:a,initialItemFinalLocationReached:E,initialTopMostItemIndex:p,scrolledToInitialItem:x,sizeRanges:u,topItemCount:C,topItemsIndexes:H,totalCount:y,...k,groupIndices:i,itemSize:c,listState:B,scrollToIndex:d,statefulTotalCount:j,trackItemSizes:I,...h,...D,...f,sizes:b,...m}),se(Oe,Ct,we,hl,ul,rt,kt,bl,pl,Tn,vl));function wl(e,t){const o={},s={};let l=0;const r=e.length;for(;l<r;)s[e[l]]=1,l+=1;for(const i in t)Object.hasOwn(s,i)||(o[i]=t[i]);return o}const Ft=typeof document<"u"?G.useLayoutEffect:G.useEffect;function yl(e,t,o){const s=Object.keys(t.required||{}),l=Object.keys(t.optional||{}),r=Object.keys(t.methods||{}),i=Object.keys(t.events||{}),a=G.createContext({});function c(x,f){x.propsReady&&V(x.propsReady,!1);for(const m of s){const k=x[t.required[m]];V(k,f[m])}for(const m of l)if(m in f){const k=x[t.optional[m]];V(k,f[m])}x.propsReady&&V(x.propsReady,!0)}function u(x){return r.reduce((f,m)=>(f[m]=k=>{const B=x[t.methods[m]];V(B,k)},f),{})}function b(x){return i.reduce((f,m)=>(f[m]=Ds(x[t.events[m]]),f),{})}const j=G.forwardRef((x,f)=>{const{children:m,...k}=x,[B]=G.useState(()=>Qt(Fs(e),d=>{c(d,k)})),[H]=G.useState(Vo(b,B));Ft(()=>{for(const d of i)d in k&&Z(H[d],k[d]);return()=>{Object.values(H).map(yo)}},[k,H,B]),Ft(()=>{c(B,k)}),G.useImperativeHandle(f,Wo(u(B)));const h=o;return n.jsx(a.Provider,{value:B,children:o?n.jsx(h,{...wl([...s,...l,...i],k),children:m}):m})}),y=x=>{const f=G.useContext(a);return G.useCallback(m=>{V(f[x],m)},[f,x])},I=x=>{const f=G.useContext(a)[x],m=G.useCallback(k=>Z(f,k),[f]);return G.useSyncExternalStore(m,()=>ie(f),()=>ie(f))},E=x=>{const f=G.useContext(a)[x],[m,k]=G.useState(Vo(ie,f));return Ft(()=>Z(f,B=>{B!==m&&k(Wo(B))}),[f,m]),m},p=G.version.startsWith("18")?I:E;return{Component:j,useEmitter:(x,f)=>{const m=G.useContext(a)[x];Ft(()=>Z(m,f),[f,m])},useEmitterValue:p,usePublisher:y}}G.createContext(void 0);const Ln=G.createContext(void 0),Dn=typeof document<"u"?G.useLayoutEffect:G.useEffect;function co(e){return"self"in e}function jl(e){return"body"in e}function An(e,t,o,s=Tt,l,r){const i=G.useRef(null),a=G.useRef(null),c=G.useRef(null),u=G.useCallback(y=>{let I,E,p;const x=y.target;if(jl(x)||co(x)){const m=co(x)?x:x.defaultView;p=r?m.scrollX:m.scrollY,I=r?m.document.documentElement.scrollWidth:m.document.documentElement.scrollHeight,E=r?m.innerWidth:m.innerHeight}else p=r?x.scrollLeft:x.scrollTop,I=r?x.scrollWidth:x.scrollHeight,E=r?x.offsetWidth:x.offsetHeight;const f=()=>{e({scrollHeight:I,scrollTop:Math.max(p,0),viewportHeight:E})};y.suppressFlushSync?f():ds.flushSync(f),a.current!==null&&(p===a.current||p<=0||p===I-E)&&(a.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,r]);G.useEffect(()=>{const y=l||i.current;return s(l||i.current),u({suppressFlushSync:!0,target:y}),y.addEventListener("scroll",u,{passive:!0}),()=>{s(null),y.removeEventListener("scroll",u)}},[i,u,o,s,l]);function b(y){const I=i.current;if(!I||(r?"offsetWidth"in I&&I.offsetWidth===0:"offsetHeight"in I&&I.offsetHeight===0))return;const E=y.behavior==="smooth";let p,x,f;co(I)?(x=Math.max(It(I.document.documentElement,r?"width":"height"),r?I.document.documentElement.scrollWidth:I.document.documentElement.scrollHeight),p=r?I.innerWidth:I.innerHeight,f=r?window.scrollX:window.scrollY):(x=I[r?"scrollWidth":"scrollHeight"],p=It(I,r?"width":"height"),f=I[r?"scrollLeft":"scrollTop"]);const m=x-p;if(y.top=Math.ceil(Math.max(Math.min(m,y.top),0)),Cn(p,x)||y.top===f){e({scrollHeight:x,scrollTop:f,viewportHeight:p}),E&&t(!0);return}E?(a.current=y.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,a.current=null,t(!0)},1e3)):a.current=null,r&&(y={behavior:y.behavior,left:y.top}),I.scrollTo(y)}function j(y){r&&(y={behavior:y.behavior,left:y.top}),i.current.scrollBy(y)}return{scrollByCallback:j,scrollerRef:i,scrollToCallback:b}}const uo="-webkit-sticky",Zo="sticky",Co=Pn(()=>{if(typeof document>"u")return Zo;const e=document.createElement("div");return e.style.position=uo,e.style.position===uo?uo:Zo});function zo(e){return e}const Il=Q(()=>{const e=S(a=>`Item ${a}`),t=S(a=>`Group ${a}`),o=S({}),s=S(zo),l=S("div"),r=S(Tt),i=(a,c=null)=>be(w(o,M(u=>u[a]),ne()),c);return{components:o,computeItemKey:s,EmptyPlaceholder:i("EmptyPlaceholder"),FooterComponent:i("Footer"),GroupComponent:i("Group","div"),groupContent:t,HeaderComponent:i("Header"),HeaderFooterTag:l,ItemComponent:i("Item","div"),itemContent:e,ListComponent:i("List","div"),ScrollerComponent:i("Scroller","div"),scrollerRef:r,ScrollSeekPlaceholder:i("ScrollSeekPlaceholder"),TopItemListComponent:i("TopItemList")}});se(Bn,Il);Co();const Sl={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Nl={outline:"none",overflowX:"auto",position:"relative"},Fn=e=>({height:"100%",position:"absolute",top:0,width:"100%"});Co();function Qe(e,t){if(typeof e!="string")return{context:t}}function Tl({useEmitter:e,useEmitterValue:t,usePublisher:o}){return G.memo(function({children:s,style:l,context:r,...i}){const a=o("scrollContainerState"),c=t("ScrollerComponent"),u=o("smoothScrollTargetReached"),b=t("scrollerRef"),j=t("horizontalDirection")||!1,{scrollByCallback:y,scrollerRef:I,scrollToCallback:E}=An(a,u,c,b,void 0,j);return e("scrollTo",E),e("scrollBy",y),n.jsx(c,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:I,style:{...j?Nl:Sl,...l},tabIndex:0,...i,...Qe(c,r),children:s})})}function kl({useEmitter:e,useEmitterValue:t,usePublisher:o}){return G.memo(function({children:s,style:l,context:r,...i}){const a=o("windowScrollContainerState"),c=t("ScrollerComponent"),u=o("smoothScrollTargetReached"),b=t("totalListHeight"),j=t("deviation"),y=t("customScrollParent"),I=G.useRef(null),E=t("scrollerRef"),{scrollByCallback:p,scrollerRef:x,scrollToCallback:f}=An(a,u,c,E,y);return Dn(()=>{var m;return x.current=y||((m=I.current)==null?void 0:m.ownerDocument.defaultView),()=>{x.current=null}},[x,y]),e("windowScrollTo",f),e("scrollBy",p),n.jsx(c,{ref:I,"data-virtuoso-scroller":!0,style:{position:"relative",...l,...b!==0?{height:b+j}:{}},...i,...Qe(c,r),children:s})})}const Cl=Q(()=>{const e=S(u=>n.jsxs("td",{children:["Item $",u]})),t=S(null),o=S(u=>n.jsxs("td",{colSpan:1e3,children:["Group ",u]})),s=S(null),l=S(null),r=S({}),i=S(zo),a=S(Tt),c=(u,b=null)=>be(w(r,M(j=>j[u]),ne()),b);return{components:r,computeItemKey:i,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:l,fixedHeaderContent:s,itemContent:e,groupContent:o,ScrollerComponent:c("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});se(Bn,Cl);Co();const Uo={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},zl={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:en,floor:Yt,max:vt,min:mo,round:tn}=Math;function on(e,t,o){return Array.from({length:t-e+1}).map((s,l)=>({data:o===null?null:o[l+e],index:l+e}))}function El(e){return{...zl,items:e}}function Ot(e,t){return e&&e.width===t.width&&e.height===t.height}function Ml(e,t){return e&&e.column===t.column&&e.row===t.row}const Hl=Q(([{increaseViewportBy:e,listBoundary:t,overscan:o,visibleRange:s},{footerHeight:l,headerHeight:r,scrollBy:i,scrollContainerState:a,scrollTo:c,scrollTop:u,smoothScrollTargetReached:b,viewportHeight:j},y,I,{didMount:E,propsReady:p},{customScrollParent:x,useWindowScroll:f,windowScrollContainerState:m,windowScrollTo:k,windowViewportRect:B},H])=>{const h=S(0),d=S(0),v=S(Uo),C=S({height:0,width:0}),R=S({height:0,width:0}),D=Y(),A=Y(),_=S(0),X=S(null),K=S({column:0,row:0}),J=Y(),de=Y(),ae=S(!1),ge=S(0),me=S(!0),ce=S(!1),Ge=S(!1);Z(w(E,$(ge),F(([N,W])=>!!W)),()=>{V(me,!1)}),Z(w(ue(E,me,R,C,ge,ce),F(([N,W,U,fe,,le])=>N&&!W&&U.height!==0&&fe.height!==0&&!le)),([,,,,N])=>{V(ce,!0),So(1,()=>{V(D,N)}),He(w(u),()=>{V(t,[0,0]),V(me,!0)})}),L(w(de,F(N=>N!=null&&N.scrollTop>0),Ae(0)),d),Z(w(E,$(de),F(([,N])=>N!=null)),([,N])=>{N&&(V(C,N.viewport),V(R,N.item),V(K,N.gap),N.scrollTop>0&&(V(ae,!0),He(w(u,lt(1)),W=>{V(ae,!1)}),V(c,{top:N.scrollTop})))}),L(w(C,M(({height:N})=>N)),j),L(w(ue(O(C,Ot),O(R,Ot),O(K,(N,W)=>N&&N.column===W.column&&N.row===W.row),O(u)),M(([N,W,U,fe])=>({gap:U,item:W,scrollTop:fe,viewport:N}))),J),L(w(ue(O(h),s,O(K,Ml),O(R,Ot),O(C,Ot),O(X),O(d),O(ae),O(me),O(ge)),F(([,,,,,,,N])=>!N),M(([N,[W,U],fe,le,Ie,We,Ve,,Xe,Be])=>{const{column:Ee,row:et}=fe,{height:tt,width:it}=le,{width:Et}=Ie;if(Ve===0&&(N===0||Et===0))return Uo;if(it===0){const ve=No(Be,N),gt=ve+Math.max(Ve-1,0);return El(on(ve,gt,We))}const ot=On(Et,it,Ee);let $e,Me;Xe?W===0&&U===0&&Ve>0?($e=0,Me=Ve-1):($e=ot*Yt((W+et)/(tt+et)),Me=ot*en((U+et)/(tt+et))-1,Me=mo(N-1,vt(Me,ot-1)),$e=mo(Me,vt(0,$e))):($e=0,Me=-1);const Mt=on($e,Me,We),{bottom:ht,top:Ht}=nn(Ie,fe,le,Mt),nt=en(N/ot),Ut=nt*tt+(nt-1)*et-ht;return{bottom:ht,itemHeight:tt,items:Mt,itemWidth:it,offsetBottom:Ut,offsetTop:Ht,top:Ht}})),v),L(w(X,F(N=>N!==null),M(N=>N.length)),h),L(w(ue(C,R,v,K),F(([N,W,{items:U}])=>U.length>0&&W.height!==0&&N.height!==0),M(([N,W,{items:U},fe])=>{const{bottom:le,top:Ie}=nn(N,fe,W,U);return[Ie,le]}),ne(jt)),t);const ye=S(!1);L(w(u,$(ye),M(([N,W])=>W||N!==0)),ye);const Ue=Ne(w(ue(v,h),F(([{items:N}])=>N.length>0),$(ye),F(([[N,W],U])=>{const fe=N.items[N.items.length-1].index===W-1;return(U||N.bottom>0&&N.itemHeight>0&&N.offsetBottom===0&&N.items.length===W)&&fe}),M(([[,N]])=>N-1),ne())),Pe=Ne(w(O(v),F(({items:N})=>N.length>0&&N[0].index===0),Ae(0),ne())),xe=Ne(w(O(v),$(ae),F(([{items:N},W])=>N.length>0&&!W),M(([{items:N}])=>({endIndex:N[N.length-1].index,startIndex:N[0].index})),ne(jn),Ye(0)));L(xe,I.scrollSeekRangeChanged),L(w(D,$(C,R,h,K),M(([N,W,U,fe,le])=>{const Ie=kn(N),{align:We,behavior:Ve,offset:Xe}=Ie;let Be=Ie.index;Be==="LAST"&&(Be=fe-1),Be=vt(0,Be,mo(fe-1,Be));let Ee=vo(W,le,U,Be);return We==="end"?Ee=tn(Ee-W.height+U.height):We==="center"&&(Ee=tn(Ee-W.height/2+U.height/2)),Xe&&(Ee+=Xe),{behavior:Ve,top:Ee}})),c);const je=be(w(v,M(N=>N.offsetBottom+N.bottom)),0);return L(w(B,M(N=>({height:N.visibleHeight,width:N.visibleWidth}))),C),{customScrollParent:x,data:X,deviation:_,footerHeight:l,gap:K,headerHeight:r,increaseViewportBy:e,initialItemCount:d,itemDimensions:R,overscan:o,restoreStateFrom:de,scrollBy:i,scrollContainerState:a,scrollHeight:A,scrollTo:c,scrollToIndex:D,scrollTop:u,smoothScrollTargetReached:b,totalCount:h,useWindowScroll:f,viewportDimensions:C,windowScrollContainerState:m,windowScrollTo:k,windowViewportRect:B,...I,gridState:v,horizontalDirection:Ge,initialTopMostItemIndex:ge,totalListHeight:je,...y,endReached:Ue,propsReady:p,rangeChanged:xe,startReached:Pe,stateChanged:J,stateRestoreInProgress:ae,...H}},se(To,we,zt,Rn,Ze,ko,Je));function On(e,t,o){return vt(1,Yt((e+o)/(Yt(t)+o)))}function nn(e,t,o,s){const{height:l}=o;if(l===void 0||s.length===0)return{bottom:0,top:0};const r=vo(e,t,o,s[0].index);return{bottom:vo(e,t,o,s[s.length-1].index)+l,top:r}}function vo(e,t,o,s){const l=On(e.width,o.width,t.column),r=Yt(s/l),i=r*o.height+vt(0,r-1)*t.row;return i>0?i+t.row:i}const Rl=Q(()=>{const e=S(j=>`Item ${j}`),t=S({}),o=S(null),s=S("virtuoso-grid-item"),l=S("virtuoso-grid-list"),r=S(zo),i=S("div"),a=S(Tt),c=(j,y=null)=>be(w(t,M(I=>I[j]),ne()),y),u=S(!1),b=S(!1);return L(O(b),u),{components:t,computeItemKey:r,context:o,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:i,itemClassName:s,ItemComponent:c("Item","div"),itemContent:e,listClassName:l,ListComponent:c("List","div"),readyStateChanged:u,reportReadyState:b,ScrollerComponent:c("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),Pl=Q(([e,t])=>({...e,...t}),se(Hl,Rl)),Bl=G.memo(function(){const e=re("gridState"),t=re("listClassName"),o=re("itemClassName"),s=re("itemContent"),l=re("computeItemKey"),r=re("isSeeking"),i=Ce("scrollHeight"),a=re("ItemComponent"),c=re("ListComponent"),u=re("ScrollSeekPlaceholder"),b=re("context"),j=Ce("itemDimensions"),y=Ce("gap"),I=re("log"),E=re("stateRestoreInProgress"),p=Ce("reportReadyState"),x=Kt(G.useMemo(()=>f=>{const m=f.parentElement.parentElement.scrollHeight;i(m);const k=f.firstChild;if(k){const{height:B,width:H}=k.getBoundingClientRect();j({height:B,width:H})}y({column:sn("column-gap",getComputedStyle(f).columnGap,I),row:sn("row-gap",getComputedStyle(f).rowGap,I)})},[i,j,y,I]),!0,!1);return Dn(()=>{e.itemHeight>0&&e.itemWidth>0&&p(!0)},[e]),E?null:n.jsx(c,{className:t,ref:x,...Qe(c,b),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(f=>{const m=l(f.index,f.data,b);return r?n.jsx(u,{...Qe(u,b),height:e.itemHeight,index:f.index,width:e.itemWidth},m):P.createElement(a,{...Qe(a,b),className:o,"data-index":f.index,key:m},s(f.index,f.data,b))})})}),Ll=G.memo(function(){const e=re("HeaderComponent"),t=Ce("headerHeight"),o=re("headerFooterTag"),s=Kt(G.useMemo(()=>r=>{t(It(r,"height"))},[t]),!0,!1),l=re("context");return e?n.jsx(o,{ref:s,children:n.jsx(e,{...Qe(e,l)})}):null}),Dl=G.memo(function(){const e=re("FooterComponent"),t=Ce("footerHeight"),o=re("headerFooterTag"),s=Kt(G.useMemo(()=>r=>{t(It(r,"height"))},[t]),!0,!1),l=re("context");return e?n.jsx(o,{ref:s,children:n.jsx(e,{...Qe(e,l)})}):null}),Al=({children:e})=>{const t=G.useContext(Ln),o=Ce("itemDimensions"),s=Ce("viewportDimensions"),l=Kt(G.useMemo(()=>r=>{s(r.getBoundingClientRect())},[s]),!0,!1);return G.useEffect(()=>{t&&(s({height:t.viewportHeight,width:t.viewportWidth}),o({height:t.itemHeight,width:t.itemWidth}))},[t,s,o]),n.jsx("div",{ref:l,style:Fn(),children:e})},Fl=({children:e})=>{const t=G.useContext(Ln),o=Ce("windowViewportRect"),s=Ce("itemDimensions"),l=re("customScrollParent"),r=Ws(o,l,!1);return G.useEffect(()=>{t&&(s({height:t.itemHeight,width:t.itemWidth}),o({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,o,s]),n.jsx("div",{ref:r,style:Fn(),children:e})},Ol=G.memo(function({...e}){const t=re("useWindowScroll"),o=re("customScrollParent"),s=o||t?Vl:Wl,l=o||t?Fl:Al,r=re("context");return n.jsx(s,{...e,...Qe(s,r),children:n.jsxs(l,{children:[n.jsx(Ll,{}),n.jsx(Bl,{}),n.jsx(Dl,{})]})})}),{Component:Gl,useEmitter:Gn,useEmitterValue:re,usePublisher:Ce}=yl(Pl,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},Ol),Wl=Tl({useEmitter:Gn,useEmitterValue:re,usePublisher:Ce}),Vl=kl({useEmitter:Gn,useEmitterValue:re,usePublisher:Ce});function sn(e,t,o){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&o(`${e} was not resolved to pixel value correctly`,t,ze.WARN),t==="normal"?0:parseInt(t??"0",10)}const $l=Gl;function _l(){return typeof navigator<"u"&&"share"in navigator&&"canShare"in navigator}function ql(){return typeof window<"u"&&"showSaveFilePicker"in window}async function Yl(e,t){if(!_l())return{success:!1,method:"none",message:"Web Share API not supported"};try{const o=await fetch(e);if(!o.ok)throw new Error(`Failed to fetch media: ${o.status}`);const s=await o.blob(),l=new File([s],t,{type:s.type});return navigator.canShare({files:[l]})?(await navigator.share({files:[l],title:"Save to Gallery"}),{success:!0,method:"webshare",message:"Media shared successfully"}):{success:!1,method:"webshare",message:"File type not supported for sharing"}}catch(o){return console.warn("Web Share API failed:",o),{success:!1,method:"webshare",message:o instanceof Error?o.message:"Unknown error"}}}async function Xl(e,t){if(!ql())return{success:!1,method:"none",message:"PWA file handling not supported"};try{const o=await fetch(e);if(!o.ok)throw new Error(`Failed to fetch media: ${o.status}`);const s=await o.blob(),l=new File([s],t,{type:s.type}),r=t.split(".").pop()||"jpg",i=`snapify_${Date.now()}.${r}`,c=await(await window.showSaveFilePicker({suggestedName:i,types:[{description:s.type.startsWith("video")?"Video":"Image",accept:{[s.type]:[`.${r}`]}}]})).createWritable();return await c.write(l),await c.close(),{success:!0,method:"pwa",message:"File saved successfully"}}catch(o){return console.warn("PWA file handling failed:",o),{success:!1,method:"pwa",message:o instanceof Error?o.message:"Unknown error"}}}async function Ql(e,t){try{const o=document.createElement("a");return o.href=e,o.download=t,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),{success:!0,method:"fallback",message:"Download initiated"}}catch(o){return console.warn("Fallback download failed:",o),{success:!1,method:"fallback",message:o instanceof Error?o.message:"Unknown error"}}}async function Kl(e,t,o={}){const{preferWebShare:s=!0,showInstructions:l=!0}=o;if(s&&Vt()){const a=await Yl(e,t);if(a.success)return a}const r=await Xl(e,t);if(r.success)return r;const i=await Ql(e,t);return l&&!i.success&&Vt()&&Jl(),i}function Jl(e,t){const o=zs(),s=Es();let l="";o?l=`
      <div class="text-center">
        <div class="mb-4">
          <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">How to Save on iOS</h3>
        </div>
        <ol class="text-left text-sm text-gray-600 space-y-2 mb-4">
          <li class="flex items-start">
            <span class="bg-blue-100 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
            Tap and hold the image/video above
          </li>
          <li class="flex items-start">
            <span class="bg-blue-100 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
            Select "Save to Photos" from the menu
          </li>
          <li class="flex items-start">
            <span class="bg-blue-100 text-blue-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
            The media will be saved to your Photos app
          </li>
        </ol>
        <button onclick="this.closest('.mobile-instructions-modal').remove()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
          Got it
        </button>
      </div>
    `:s?l=`
      <div class="text-center">
        <div class="mb-4">
          <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">How to Save on Android</h3>
        </div>
        <ol class="text-left text-sm text-gray-600 space-y-2 mb-4">
          <li class="flex items-start">
            <span class="bg-green-100 text-green-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">1</span>
            Tap the download button above
          </li>
          <li class="flex items-start">
            <span class="bg-green-100 text-green-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">2</span>
            Open the downloaded file from notifications
          </li>
          <li class="flex items-start">
            <span class="bg-green-100 text-green-800 rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold mr-3 mt-0.5">3</span>
            Tap "Save" or share to your Gallery app
          </li>
        </ol>
        <button onclick="this.closest('.mobile-instructions-modal').remove()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
          Got it
        </button>
      </div>
    `:l=`
      <div class="text-center">
        <div class="mb-4">
          <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">Download Complete</h3>
        </div>
        <p class="text-sm text-gray-600 mb-4">
          The file has been downloaded. Check your downloads folder to save it to your gallery.
        </p>
        <button onclick="this.closest('.mobile-instructions-modal').remove()" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
          Close
        </button>
      </div>
    `;const r=document.createElement("div");r.className="mobile-instructions-modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",r.innerHTML=`
    <div class="bg-white rounded-lg max-w-sm w-full max-h-[90vh] overflow-y-auto">
      <div class="p-6">
        ${l}
      </div>
    </div>
  `,r.addEventListener("click",i=>{i.target===r&&r.remove()}),document.body.appendChild(r)}function Zl(e,t,o){if(o)return o;const s=e.split("/"),l=s[s.length-1],r=t==="video"?"mp4":"jpg";return l&&l.includes(".")?l:`snapify_${Date.now()}.${r}`}const Ul=({eventId:e,eventTitle:t,onClose:o,t:s})=>{const l=`${window.location.origin}?event=${e}`,[r,i]=P.useState(!1),a=async()=>{try{await navigator.clipboard.writeText(l),i(!0),setTimeout(()=>i(!1),2e3)}catch(b){console.error("Failed to copy",b)}},c=async()=>{if(navigator.share)try{await navigator.share({title:"SnapifY Event",text:`Join the party! ${t}`,url:l})}catch{}else a()},u=()=>{const b=document.getElementById("share-qr");if(b){const j=new XMLSerializer().serializeToString(b),y=document.createElement("canvas"),I=y.getContext("2d"),E=new Image;E.onload=()=>{y.width=E.width,y.height=E.height,I==null||I.drawImage(E,0,0);const p=y.toDataURL("image/png"),x=document.createElement("a");x.download=`QR_${t.replace(/\s+/g,"_")}.png`,x.href=p,x.click()},E.src="data:image/svg+xml;base64,"+btoa(j)}};return n.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Share Event"}),n.jsx("button",{onClick:o,className:"p-2 bg-white rounded-full hover:bg-slate-100 transition-colors",children:n.jsx(dt,{size:20,className:"text-slate-500"})})]}),n.jsxs("div",{className:"p-8 flex flex-col items-center space-y-6",children:[n.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-lg border border-indigo-100",children:n.jsx(rn,{id:"share-qr",value:l,size:180,level:"H",includeMargin:!0})}),n.jsxs("div",{className:"w-full space-y-3",children:[typeof navigator<"u"&&navigator.share&&n.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:[n.jsx(an,{size:20})," Share via..."]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsx(cn,{size:16,className:"text-slate-400 flex-shrink-0"}),n.jsx("input",{type:"text",readOnly:!0,value:l,className:"bg-transparent text-sm text-slate-600 flex-1 outline-none truncate"}),n.jsx("button",{onClick:a,className:`p-2 rounded-lg transition-colors ${r?"bg-green-100 text-green-600":"hover:bg-white text-slate-500"}`,children:r?n.jsx(us,{size:16}):n.jsx(ms,{size:16})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("a",{href:`https://wa.me/?text=${encodeURIComponent(`Join the party! ${t}: ${l}`)}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 py-3 bg-[#25D366] text-white rounded-xl font-bold hover:opacity-90 transition-opacity",children:[n.jsx(fs,{size:18})," WhatsApp"]}),n.jsxs("button",{onClick:u,className:"flex items-center justify-center gap-2 py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-slate-800 transition-colors",children:[n.jsx(dn,{size:18})," Save QR"]})]})]})]})]})})},er=({vendor:e})=>n.jsxs("div",{className:"relative group rounded-2xl overflow-hidden bg-white shadow-sm border border-indigo-100 hover:shadow-md transition-all cursor-pointer flex flex-col break-inside-avoid mb-4",children:[n.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 backdrop-blur-sm text-white text-[10px] font-bold px-2 py-1 rounded-full uppercase tracking-wider z-10",children:["Featured ",e.category]}),e.coverImage?n.jsx("div",{className:"h-48 w-full overflow-hidden",children:n.jsx("img",{src:e.coverImage,alt:e.businessName,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"})}):n.jsx("div",{className:"h-32 bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-white",children:n.jsx("span",{className:"font-bold text-2xl opacity-50",children:e.businessName.charAt(0)})}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex items-start justify-between mb-2",children:n.jsxs("h3",{className:"font-bold text-slate-900 text-lg leading-tight",children:[e.businessName,e.isVerified&&n.jsx(un,{size:14,className:"inline ml-1 text-blue-500"})]})}),n.jsxs("p",{className:"text-slate-500 text-xs mb-3 flex items-center",children:[n.jsx(mn,{size:12,className:"mr-1"})," ",e.city]}),n.jsx("p",{className:"text-slate-600 text-sm line-clamp-2 mb-4",children:e.description}),n.jsxs("a",{href:e.website||`mailto:${e.contactEmail}`,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-slate-50 hover:bg-slate-100 text-slate-900 font-bold text-sm py-2.5 rounded-xl flex items-center justify-center transition-colors border border-slate-200",children:["Contact ",n.jsx(hs,{size:14,className:"ml-2"})]})]})]}),ln=e=>{if(!e||e===1)return"";switch(e){case 2:return"scaleX(-1)";case 3:return"rotate(180deg)";case 4:return"scaleY(-1)";case 5:return"scaleX(-1) rotate(90deg)";case 6:return"rotate(90deg)";case 7:return"scaleX(-1) rotate(-90deg)";case 8:return"rotate(-90deg)";default:return""}},tr=P.memo(({item:e,onClick:t})=>{const o=P.useRef(null),[s,l]=P.useState(!1),r=Vt();return P.useEffect(()=>{if(r)return;const i=new IntersectionObserver(a=>{a.forEach(c=>{if(o.current)if(c.isIntersecting){const u=o.current.play();u!==void 0&&u.then(()=>l(!0)).catch(()=>{l(!1)})}else o.current.pause(),l(!1)})},{threshold:.25});return o.current&&i.observe(o.current),()=>{o.current&&i.unobserve(o.current)}},[r]),e.isProcessing?n.jsxs("div",{className:"w-full aspect-video bg-slate-200 flex flex-col items-center justify-center text-slate-500",onClick:t,children:[n.jsx(ut,{className:"animate-spin mb-2"}),n.jsx("span",{className:"text-xs font-bold",children:"Processing..."})]}):n.jsxs("div",{className:"relative group cursor-pointer",onClick:t,children:[n.jsx("video",{ref:o,src:e.previewUrl||e.url,className:"w-full h-auto object-cover rounded-lg bg-black min-h-[150px]",muted:!0,playsInline:!0,loop:!0,preload:"metadata",style:{pointerEvents:"none"}}),n.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-colors pointer-events-none ${r?"bg-black/10":s?"bg-transparent":"bg-black/20 group-hover:bg-black/30"}`,children:(!s||r)&&n.jsx("div",{className:"bg-black/40 rounded-full p-3 backdrop-blur-sm border border-white/20",children:n.jsx(fo,{className:"text-white fill-white",size:24})})}),n.jsx("div",{className:"absolute top-2 right-2 bg-black/60 p-1.5 rounded-md pointer-events-none z-10 backdrop-blur-md",children:n.jsx(fn,{className:"text-white",size:12})})]})}),Wn=({event:e,currentUser:t,hostUser:o,isEventExpired:s,isOwner:l,isHostPhotographer:r,downloadingZip:i,applyWatermark:a,setApplyWatermark:c,onDownloadAll:u,onSetCover:b,onUpload:j,onLike:y,onOpenLiveSlideshow:I,onRefresh:E,t:p})=>{var Po;const[x,f]=P.useState(e.media),[m,k]=P.useState(e.guestbook||[]),[B,H]=P.useState("gallery"),[h,d]=P.useState(null),[v,C]=P.useState(!1),[R,D]=P.useState(!1),[A,_]=P.useState(!1),[X,K]=P.useState("");P.useRef(null);const[J,de]=P.useState(!1),[ae,ge]=P.useState(0),me=P.useRef(0),ce=80,Ge=g=>{window.scrollY===0&&(me.current=g.touches[0].clientY)},ye=g=>{if(me.current>0&&window.scrollY===0){const T=g.touches[0].clientY-me.current;T>0&&ge(T)}},Ue=async()=>{if(ae>ce){de(!0),ge(0);try{await E()}finally{de(!1)}}ge(0),me.current=0},[Pe,xe]=P.useState(0),[je,N]=P.useState(!1),[W,U]=P.useState(!1),[fe,le]=P.useState(!1),Ie=P.useRef(null),[We,Ve]=P.useState(""),[Xe,Be]=P.useState((t==null?void 0:t.name)||""),Ee=`unlocked_event_${e.id}`,[et,tt]=P.useState(()=>l||(t==null?void 0:t.role)===Le.ADMIN||sessionStorage.getItem(Ee)==="true"?!1:!!e.hasPin||!!e.pin&&e.pin.length>0),[it,Et]=P.useState(""),[ot,$e]=P.useState(""),[Me,Mt]=P.useState(!1),[ht,Ht]=P.useState(null),[nt,Ut]=P.useState(null),[ve,gt]=P.useState(""),[Vn,or]=P.useState(!1),[Eo,$n]=P.useState(!1),[nr,_n]=P.useState(!1),[at,qn]=P.useState(!1),[Rt,Yn]=P.useState(!1),[Te,pt]=P.useState(new Set),[pe,eo]=P.useState(!1),[Mo,Ho]=P.useState(!1),[_e,ct]=P.useState(null),[ke,to]=P.useState(()=>At(t,o==null?void 0:o.tier)),[Pt,Xn]=P.useState([]),Bt=P.useCallback(g=>t?t.role===Le.ADMIN||l?!0:g.uploaderId===t.id:!1,[t,l]);P.useEffect(()=>{De.connect(),De.joinEvent(e.id),De.on("media_uploaded",z=>{console.log("EventGallery: Received media_uploaded event",z);const T=oe=>oe?oe.startsWith("/api/proxy-media")||oe.startsWith("http")?oe:`/api/proxy-media?key=${encodeURIComponent(oe)}`:"",q={...z,url:T(z.url),previewUrl:z.previewUrl?T(z.previewUrl):T(z.url)};f(oe=>oe.some(Dt=>Dt.id===q.id)?oe:[q,...oe])}),De.on("media_processed",z=>{console.log("EventGallery: Received media_processed event",z),f(T=>T.map(q=>q.id===z.id?{...q,isProcessing:!1,previewUrl:z.previewUrl,url:z.url||q.url}:q))}),De.on("new_like",z=>{f(T=>T.map(q=>q.id===z.id?{...q,likes:z.likes}:q))}),De.on("new_message",z=>{k(T=>T.some(q=>q.id===z.id)?T:[z,...T])}),De.on("new_comment",z=>{f(T=>T.map(q=>q.id===z.mediaId?{...q,comments:[...q.comments||[],z]}:q))});const g=z=>{console.log("EventGallery: Received user update",z),to(At(t,z.id===e.hostId?z.tier:o==null?void 0:o.tier))};return De.on("user_updated",g),Yn(Vt()),()=>{De.off("user_updated",g),De.disconnect()}},[e.id,t,o==null?void 0:o.tier,e.hostId]),P.useEffect(()=>{k(e.guestbook||[])},[e.guestbook,e.id]),P.useEffect(()=>{(l||(t==null?void 0:t.role)===Le.ADMIN)&&tt(!1)},[l,t]),P.useEffect(()=>{(async()=>{if(e.city)try{const z=await xt.fetchVendors(e.city);Xn(z)}catch(z){console.error("Failed to fetch vendors",z)}})()},[e.city]),P.useEffect(()=>{(async()=>{if(window.faceapi&&!Eo)try{await Promise.all([window.faceapi.nets.ssdMobilenetv1.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model"),window.faceapi.nets.faceLandmark68Net.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model"),window.faceapi.nets.faceRecognitionNet.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model")]),$n(!0)}catch(z){console.error("Failed to load FaceAPI models",z)}})()},[]),P.useEffect(()=>()=>{_n(!1)},[]),P.useEffect(()=>{to(At(t,o==null?void 0:o.tier))},[t,o]),P.useEffect(()=>{const g=()=>{to(At(t,o==null?void 0:o.tier))};return window.addEventListener("online",g),()=>window.removeEventListener("online",g)},[t,o]);const ee=P.useMemo(()=>{let g=nt||x;if(console.log("EventGallery: computing displayMedia from",g.length,"items (filteredMedia:",!!nt,"localMedia:",x.length,")"),console.log("EventGallery: isOwner=",l,"currentUser.role=",t==null?void 0:t.role,"showMyUploads=",at),!l&&(t==null?void 0:t.role)!==Le.ADMIN){console.log("EventGallery: Applying privacy filter (not owner/admin)");const z=g.length;g=g.filter(T=>{const q=T.privacy!=="private",oe=t&&T.uploaderId===t.id,Dt=q||oe;return Dt||console.log("EventGallery: Filtering out item",T.id,"privacy=",T.privacy,"uploaderId=",T.uploaderId,"currentUserId=",t==null?void 0:t.id),Dt}),console.log("EventGallery: Privacy filter removed",z-g.length,"items")}else console.log("EventGallery: Skipping privacy filter (owner or admin)");if(at&&t&&(g=g.filter(z=>z.uploaderId===t.id)),ve.trim()){const z=ve.toLowerCase();g=g.filter(T=>T.caption&&T.caption.toLowerCase().includes(z)||T.uploaderName&&T.uploaderName.toLowerCase().includes(z))}return console.log("EventGallery: displayMedia computed to",g.length,"items"),g},[nt,x,l,t,at,ve]),Qn=P.useMemo(()=>t?ee.some(g=>Bt(g)):!1,[t,ee,Bt]),Ro=(o==null?void 0:o.tier)===cs.STUDIO,Kn=Ro?"#4f46e5":"#000000",oo=g=>{d(g),C(!1),xe(0),document.body.style.overflow="hidden"},Lt=P.useCallback(()=>{d(null),C(!1),document.body.style.overflow="unset"},[]),qe=P.useCallback(g=>{if(h===null||W)return;const z=window.innerWidth,T=g==="next"?-z:z;U(!0),xe(T),setTimeout(()=>{const q=ee.length;let oe;g==="next"?oe=(h+1)%q:oe=(h-1+q)%q,le(!0),d(oe),xe(0),U(!1),setTimeout(()=>{le(!1)},50)},300)},[h,ee.length,W]),Jn=g=>{W||(Ie.current=g.clientX,N(!0))},Zn=g=>{if(!Ie.current||W||!je)return;const T=g.clientX-Ie.current;xe(T)},no=()=>{if(!Ie.current||W||!je){N(!1);return}N(!1);const g=window.innerWidth/4;Pe<-g?qe("next"):Pe>g?qe("prev"):(U(!0),xe(0),setTimeout(()=>U(!1),300)),Ie.current=null};P.useEffect(()=>{const g=z=>{h!==null&&(z.key==="Escape"&&Lt(),z.key==="ArrowRight"&&qe("next"),z.key==="ArrowLeft"&&qe("prev"))};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[h,Lt,qe]),P.useEffect(()=>{let g;return v&&h!==null&&(g=setInterval(()=>{qe("next")},3e3)),()=>clearInterval(g)},[v,h,qe]);const Un=P.useCallback(async()=>{const g=`${window.location.origin}?event=${e.id}`;try{await navigator.clipboard.writeText(g),_(!0),setTimeout(()=>_(!1),2e3)}catch{prompt(p("copyLink"),g)}},[e.id,p]);P.useCallback(async g=>{const z=Zl(g.url,g.type,`snapify_${g.id}`);ct({show:!0,message:"Preparing download...",type:"info"});try{const T=await Kl(g.url,z);T.success?ct({show:!0,message:Rt?"Media shared! Check your gallery.":"Download completed!",type:"success"}):ct({show:!0,message:T.message||"Download failed. Try again.",type:"error"})}catch{ct({show:!0,message:"Download failed. Please try again.",type:"error"})}setTimeout(()=>ct(null),3e3)},[Rt]);const es=async g=>{g.preventDefault(),await xt.validateEventPin(e.id,it)?(tt(!1),sessionStorage.setItem(Ee,"true")):$e(p("invalidPin"))},ts=async g=>{if(g.preventDefault(),!We.trim()||!Xe.trim())return;const z={id:crypto.randomUUID(),eventId:e.id,senderName:Xe,message:We,createdAt:new Date().toISOString()};await xt.addGuestbookEntry(z),Ve("")},os=async g=>{if(g.preventDefault(),!X.trim()||h===null)return;const z=ee[h],T=t?t.name:localStorage.getItem("snapify_guest_name")||"Guest",q={id:crypto.randomUUID(),mediaId:z.id,eventId:e.id,senderName:T,text:X,createdAt:new Date().toISOString()};await xt.addComment(q),K("")},ns=P.useCallback(async g=>{alert("Face recognition is temporarily disabled due to technical issues. This feature will be restored in a future update.")},[p]),ss=()=>{pe?(pt(new Set),eo(!1)):eo(!0)},ls=g=>{const z=new Set(Te);z.has(g)?z.delete(g):z.add(g),pt(z)},rs=()=>{Te.size===ee.length?pt(new Set):pt(new Set(ee.map(g=>g.id)))},is=async()=>{if(Te.size!==0&&confirm(p("confirmBulkDelete").replace("{count}",Te.size.toString()))){Ho(!0);try{const g=Array.from(Te);(await xt.bulkDeleteMedia(g)).success&&(f(T=>T.filter(q=>!Te.has(q.id))),pt(new Set),eo(!1))}catch{}finally{Ho(!1)}}},so=P.useMemo(()=>{const g=[];let z=0;console.log("EventGallery: Computing gridItems from displayMedia.length=",ee.length),(l||(t==null?void 0:t.role)===Le.ADMIN||t)&&!pe&&!ve&&(g.push({type:"add-memory"}),console.log('EventGallery: Added "Add Memory" card'));for(let T=0;T<ee.length;T++){const q=ee[T];if(Pt.length>0&&!pe&&T>0&&T%8===0){const oe=Pt[z%Pt.length];g.push({type:"ad",vendor:oe}),z++}g.push(q)}return console.log("EventGallery: gridItems computed with",g.length,"total items"),g},[ee,l,t,pe,ve,Pt]),as=P.useCallback(g=>{const z=so[g];if(z.type==="add-memory")return n.jsxs("div",{onClick:()=>j("upload"),className:"relative group rounded-2xl overflow-hidden bg-gradient-to-br from-indigo-50 to-white border-2 border-dashed border-indigo-200 shadow-sm hover:shadow-md hover:border-indigo-400 transition-all cursor-pointer flex flex-col items-center justify-center min-h-[250px] animate-in fade-in slide-in-from-bottom-4 h-full",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mb-4 shadow-inner group-hover:scale-110 transition-transform duration-300",children:n.jsx(gs,{size:32,strokeWidth:3})}),n.jsx("h4",{className:"font-black text-indigo-900 text-lg",children:p("addMemory")}),n.jsx("p",{className:"text-indigo-500/80 text-xs font-bold uppercase tracking-wider mt-1",children:p("tapToUpload")})]});if(z.type==="ad")return n.jsx(er,{vendor:z.vendor},`ad-${g}`);{const T=z,q=ee.indexOf(T);return n.jsxs("div",{className:"relative group rounded-2xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all cursor-pointer h-full",onClick:()=>!pe&&oo(q),children:[pe&&Bt(T)&&n.jsx("div",{className:"absolute top-0 left-0 right-0 bottom-0 z-20 bg-black/10 flex items-start justify-end p-3",children:n.jsx("button",{onClick:oe=>{oe.stopPropagation(),ls(T.id)},className:`w-6 h-6 rounded-full flex items-center justify-center transition-all shadow-sm ${Te.has(T.id)?"bg-indigo-600 text-white":"bg-white text-slate-400"}`,children:Te.has(T.id)?n.jsx(Bo,{size:14}):n.jsx(ps,{size:14})})}),T.type==="video"?n.jsx(tr,{item:T,onClick:()=>!pe&&oo(q)}):n.jsx("div",{className:"w-full aspect-square bg-slate-200 relative overflow-hidden",children:n.jsx("img",{src:T.previewUrl||T.url,alt:T.caption||"Photo",className:"w-full h-full object-cover",style:{transform:ln(T.orientation)},loading:"lazy",onError:oe=>{console.error("Image failed to load:",T.url),oe.currentTarget.style.display="none"}})}),T.isWatermarked&&T.watermarkText&&n.jsx("div",{className:"absolute bottom-2 right-2 pointer-events-none",children:n.jsx("p",{className:"text-white/60 text-[10px] font-bold uppercase tracking-widest drop-shadow-md px-1.5 py-0.5 rounded bg-black/30 backdrop-blur-sm",children:T.watermarkText})}),T.privacy==="private"&&n.jsx("div",{className:"absolute top-2 right-2 bg-black/60 text-white p-1 rounded-full shadow-sm backdrop-blur-sm z-10",children:n.jsx(lo,{size:12})}),n.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-4 pointer-events-none",children:[n.jsx("p",{className:"text-white text-sm font-medium truncate",children:T.caption}),n.jsxs("div",{className:"flex justify-between items-end mt-0.5",children:[n.jsxs("p",{className:"text-white/60 text-xs",children:["by ",T.uploaderName]}),T.comments&&T.comments.length>0&&n.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-xs",children:[n.jsx(xs,{size:12})," ",T.comments.length]})]})]}),!pe&&n.jsxs("button",{onClick:oe=>{oe.stopPropagation(),y(T)},className:"absolute bottom-3 right-3 bg-white/90 backdrop-blur-md rounded-full p-2 text-slate-400 shadow-lg hover:text-red-500 hover:scale-110 transition-all flex items-center gap-1 pointer-events-auto z-10",children:[n.jsx(bs,{size:16,className:T.likes?"fill-red-500 text-red-500":""}),T.likes?n.jsx("span",{className:"text-xs font-bold text-red-500",children:T.likes}):null]}),(l||(t==null?void 0:t.role)===Le.ADMIN)&&T.type==="image"&&!pe&&n.jsx("button",{onClick:oe=>{oe.stopPropagation(),b(T)},className:"absolute top-3 left-3 bg-black/40 backdrop-blur-md rounded-full p-1.5 text-white opacity-0 group-hover:opacity-100 transition-opacity hover:bg-indigo-600 pointer-events-auto z-10",children:n.jsx(vs,{size:14})})]},T.id)}},[so,ee,pe,Bt,Te,y,b,l,t]);return et?n.jsx("div",{className:"min-h-[60vh] flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-xl max-w-sm w-full text-center border border-slate-200",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(lo,{size:32,className:"text-slate-700"})}),n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:p("pinRequired")}),n.jsxs("form",{onSubmit:es,children:[n.jsx("input",{id:"event-pin-input",name:"event-pin",type:"text",value:it,onChange:g=>{Et(g.target.value),$e("")},placeholder:"PIN Code",className:"w-full text-center text-2xl tracking-widest font-bold p-3 rounded-xl border border-slate-300 mb-4 uppercase",maxLength:6,autoComplete:"off"}),ot&&n.jsx("p",{className:"text-red-500 font-bold text-sm mb-4",children:ot}),n.jsx("button",{type:"submit",className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold",children:p("submitPin")})]})]})}):s&&(t==null?void 0:t.role)!==Le.ADMIN&&(t==null?void 0:t.id)!==e.hostId?n.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-20 text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:p("eventExpiredTitle")}),n.jsx("p",{className:"text-slate-500 mb-8",children:p("eventExpiredMsg")}),n.jsx("button",{onClick:()=>window.location.href="/",className:"bg-slate-900 text-white px-8 py-3 rounded-xl font-bold",children:p("goHome")})]}):n.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-8 pb-32",onTouchStart:Ge,onTouchMove:ye,onTouchEnd:Ue,style:{transform:ae>0?`translateY(${Math.min(ae,ce)}px)`:void 0,transition:J?"transform 0.3s ease-out":void 0},children:[ae>0&&n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-indigo-600 text-white text-center py-2 text-sm font-medium transition-opacity",style:{opacity:Math.min(ae/ce,1),transform:`translateY(${Math.max(0,ae-ce)}px)`},children:J?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(ut,{className:"animate-spin h-4 w-4"}),"Refreshing..."]}):ae>ce?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Lo,{className:"h-4 w-4"}),"Release to refresh"]}):n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(Lo,{className:"h-4 w-4"}),"Pull to refresh"]})}),s&&(t==null?void 0:t.role)===Le.ADMIN&&n.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-700 p-4 rounded-xl mb-6 flex items-center font-bold",children:[n.jsx(Do,{className:"mr-2"})," ",p("adminModeExpired")]}),n.jsxs("div",{className:"bg-white rounded-3xl p-6 md:p-8 shadow-sm border border-slate-200 mb-8 relative overflow-hidden group",children:[e.coverImage?n.jsxs("div",{className:"absolute inset-0 z-0",children:[e.coverMediaType==="video"?n.jsx("video",{src:e.coverImage,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}):n.jsx("img",{src:e.coverImage,alt:"Cover",className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-sm"})]}):n.jsx("div",{className:"absolute -top-20 -right-20 opacity-[0.03] pointer-events-none z-0",children:n.jsx("div",{className:"w-96 h-96 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full blur-3xl"})}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-8 relative z-10 items-center md:items-start",children:[n.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center",children:[n.jsx("div",{className:`bg-white p-4 rounded-2xl shadow-lg border inline-block ${Ro?"border-amber-200 ring-4 ring-amber-50":"border-slate-100"}`,children:n.jsx(rn,{value:`${window.location.origin}?event=${e.id}`,size:140,fgColor:Kn})}),n.jsxs("button",{onClick:Un,className:`mt-3 flex items-center gap-2 text-sm font-bold px-3 py-1.5 rounded-lg transition-all ${A?"bg-green-100 text-green-700":"text-indigo-600 hover:bg-indigo-50"}`,children:[A?n.jsx(un,{size:14}):n.jsx(cn,{size:14}),p(A?"linkCopied":"copyLink")]})]}),n.jsxs("div",{className:"flex-1 text-center md:text-left w-full",children:[n.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tight mb-2",children:e.title}),n.jsxs("p",{className:"text-slate-500 flex items-center justify-center md:justify-start mb-2 font-medium",children:[n.jsx(ws,{size:18,className:"mr-2 text-indigo-500"})," ",e.date||p("dateTBD")]}),e.city&&n.jsxs("p",{className:"text-slate-500 flex items-center justify-center md:justify-start mb-6 font-medium",children:[n.jsx(mn,{size:18,className:"mr-2 text-red-500"})," ",p("city"),": ",e.city]}),n.jsx("div",{className:"text-slate-700 bg-slate-50 p-5 rounded-2xl border border-slate-200 w-full text-left shadow-sm relative",children:n.jsx("p",{className:"italic",children:e.description})})]})]})]}),n.jsx("div",{className:"flex justify-center mb-8",children:n.jsxs("div",{className:"bg-white p-1.5 rounded-xl shadow-sm border border-slate-200 flex gap-2",children:[n.jsxs("button",{onClick:()=>H("gallery"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${B==="gallery"?"bg-indigo-600 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:[n.jsx(ys,{size:18})," ",p("gallery")]}),n.jsxs("button",{onClick:()=>H("guestbook"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all flex items-center gap-2 ${B==="guestbook"?"bg-indigo-600 text-white shadow-md":"text-slate-600 hover:bg-slate-50"}`,children:[n.jsx(js,{size:18})," ",p("guestbook")]})]})}),B==="gallery"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between bg-white p-4 rounded-2xl shadow-sm border border-slate-200",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),n.jsx("input",{id:"search-memories-input",name:"search-memories",type:"text",value:ve,onChange:g=>gt(g.target.value),placeholder:"Search memories...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none text-sm",autoComplete:"off"}),ve&&n.jsx("button",{onClick:()=>gt(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:n.jsx(dt,{size:14})})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[nt&&n.jsxs("button",{onClick:()=>{Ut(null),Ht(null)},className:"flex items-center gap-1 px-3 py-2 text-sm font-bold text-red-600 bg-red-50 rounded-xl hover:bg-red-100",children:[n.jsx(dt,{size:16})," ",p("clearFilter")]}),t&&!pe&&n.jsx("button",{onClick:()=>qn(!at),className:`p-2 rounded-xl transition-colors ${at?"bg-indigo-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,title:p(at?"allPhotos":"myUploads"),children:n.jsx(Fo,{size:20})}),Qn&&ee.length>0&&n.jsx("button",{onClick:ss,className:`p-2 rounded-xl transition-colors ${pe?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,title:p(pe?"cancel":"selectMedia"),children:pe?n.jsx(dt,{size:20}):n.jsx(Bo,{size:20})}),pe&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:rs,className:"px-3 py-2 text-xs font-bold bg-slate-100 rounded-xl hover:bg-slate-200",children:Te.size===ee.length?"Deselect All":"Select All"}),Te.size>0&&n.jsxs("button",{onClick:is,disabled:Mo,className:"flex items-center gap-2 px-4 py-2 text-sm font-bold text-white bg-red-600 hover:bg-red-700 rounded-xl",children:[Mo?n.jsx(ut,{size:16,className:"animate-spin"}):n.jsx(Is,{size:16}),Te.size]})]}),Eo&&x.length>0&&!pe&&n.jsx("button",{onClick:()=>Mt(!Me),className:`p-2 rounded-xl transition-colors ${Me?"bg-indigo-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,title:p("findMe"),children:n.jsx(Ss,{size:20})}),ee.length>0&&!pe&&n.jsxs("button",{onClick:()=>{oo(0),C(!0)},className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-xl hover:bg-slate-800 font-bold text-sm",children:[n.jsx(fo,{size:16})," ",n.jsx("span",{className:"hidden sm:inline",children:p("slideshow")})]}),(l||(t==null?void 0:t.role)===Le.ADMIN)&&ee.length>0&&!pe&&n.jsx("button",{onClick:()=>u(x),disabled:i,className:"p-2 text-indigo-600 bg-indigo-50 hover:bg-indigo-100 rounded-xl transition-colors disabled:opacity-50",title:p("downloadAll"),children:i?n.jsx(ut,{size:20,className:"animate-spin"}):n.jsx(dn,{size:20})})]})]}),Me&&n.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-md border border-indigo-100 mb-6 animate-in slide-in-from-top-2 flex flex-col items-center text-center relative overflow-hidden",children:[n.jsxs("div",{className:"w-full bg-amber-50 border-b border-amber-100 p-2 mb-4 flex items-center justify-center gap-2 text-amber-700 text-xs font-bold",children:[n.jsx(Ns,{size:14}),p("findMeDevMode")]}),n.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:p("findMeTitle")}),n.jsx("p",{className:"text-sm text-slate-500 mb-4",children:p("findMeDesc")}),Vn?n.jsxs("div",{className:"flex items-center justify-center py-4 text-indigo-600",children:[n.jsx(ut,{className:"animate-spin mr-2"})," ",p("scanning")]}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("label",{className:"cursor-pointer bg-indigo-600 text-white px-6 py-3 rounded-full font-bold text-sm hover:bg-indigo-700 transition-colors flex items-center gap-2 shadow-lg shadow-indigo-200",children:[n.jsx(ro,{size:18}),p("uploadSelfie"),n.jsx("input",{id:"find-me-upload",name:"find-me-upload",type:"file",accept:"image/*",capture:"user",className:"hidden",onChange:ns,autoComplete:"off"})]}),ht&&n.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-indigo-500 shadow-sm",children:n.jsx("img",{src:ht,className:"w-full h-full object-cover",alt:"Selfie"})})]})]}),n.jsx("div",{className:"mb-24 min-h-screen",children:n.jsx($l,{style:{height:"100vh"},data:so,itemContent:g=>as(g),listClassName:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",itemClassName:"",overscan:5})}),ee.length===0&&n.jsxs("div",{className:"text-center py-20 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center mb-4",children:ve?n.jsx(Ao,{className:"text-slate-300",size:32}):n.jsx(ro,{className:"text-slate-300",size:32})}),n.jsx("h3",{className:"text-lg font-medium text-slate-900",children:ve?"No matches found":p("noPhotos")}),l&&!ve&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-slate-500 mb-4",children:"Your event is live! Start the gallery."}),n.jsxs("button",{onClick:()=>j("upload"),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-indigo-700 transition-colors flex items-center gap-2 mx-auto shadow-lg",children:[n.jsx(Fo,{size:18}),p("upload")]})]}),!l&&!ve&&n.jsx("p",{className:"text-slate-500",children:p("beFirst")}),ve&&n.jsx("button",{onClick:()=>gt(""),className:"mt-4 text-indigo-600 font-bold hover:underline",children:"Clear Search"})]})]}):n.jsxs("div",{className:"max-w-2xl mx-auto mb-24",children:[n.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:p("signGuestbook")}),n.jsxs("form",{onSubmit:ts,className:"space-y-4",children:[n.jsx("input",{id:"guestbook-name-input",name:"guestbook-name",type:"text",value:Xe,onChange:g=>Be(g.target.value),placeholder:p("yourName"),required:!0,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none",autoComplete:"name"}),n.jsx("textarea",{value:We,onChange:g=>Ve(g.target.value),placeholder:p("leaveMessage"),required:!0,className:"w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-indigo-500 outline-none h-24 resize-none"}),n.jsxs("button",{type:"submit",className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Oo,{size:18})," ",p("signGuestbook")]})]})]}),n.jsx("div",{className:"space-y-4",children:m.map(g=>n.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-100 shadow-sm animate-in slide-in-from-top-1",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:g.senderName}),n.jsx("span",{className:"text-xs text-slate-400",children:new Date(g.createdAt).toLocaleDateString()})]}),n.jsx("p",{className:"text-slate-600",children:g.message})]},g.id))})]}),ke.upgradePrompt&&!ke.enabled&&n.jsx("div",{className:"fixed bottom-[calc(6rem+env(safe-area-inset-bottom))] left-4 right-4 z-30",children:n.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-3 shadow-lg",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(fn,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Video uploads available on Pro plan"}),n.jsx("p",{className:"text-xs text-amber-700 mt-0.5",children:"Upgrade to unlock 4K video uploads and advanced features"})]}),n.jsx("button",{onClick:()=>window.open("/pricing","_blank"),className:"flex-shrink-0 bg-amber-600 text-white px-3 py-1.5 rounded-lg text-xs font-medium hover:bg-amber-700 transition-colors",children:"Upgrade"})]})})}),n.jsx("div",{className:`fixed bottom-[calc(2rem+env(safe-area-inset-bottom))] left-0 right-0 flex justify-center z-40 pointer-events-auto ${ke.upgradePrompt&&!ke.enabled?"bottom-[calc(8rem+env(safe-area-inset-bottom))]":""}`,children:n.jsxs("div",{className:"flex items-center gap-4 p-2 pr-3 pl-3 bg-black/80 backdrop-blur-xl rounded-full shadow-2xl border border-white/10 text-white",children:[Rt&&n.jsx("button",{onClick:()=>j("camera"),className:"flex flex-col items-center justify-center w-12 h-12 rounded-full bg-white text-black shadow-lg active:scale-95 transition-transform",title:ke.enabled?"Take photo":ke.message,children:n.jsx(ro,{size:24})}),n.jsx("button",{onClick:()=>j("upload"),className:`flex flex-col items-center justify-center w-12 h-12 rounded-full transition-colors ${ke.enabled?Rt?"bg-white/10 hover:bg-white/20":"bg-white text-black shadow-lg hover:bg-slate-100":"bg-gray-500/50 cursor-not-allowed"}`,title:ke.enabled?"Upload media":ke.message,disabled:!ke.enabled&&!ke.visible,children:ke.enabled?n.jsx(Go,{size:24}):n.jsxs("div",{className:"relative",children:[n.jsx(Go,{size:24}),n.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-amber-400 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs font-bold text-black",children:""})})]})}),n.jsx("div",{className:"w-px h-8 bg-white/20"}),n.jsx("button",{onClick:()=>D(!0),className:"flex flex-col items-center justify-center w-10 h-10 rounded-full text-white/80 hover:text-white hover:bg-white/10 transition-colors",children:n.jsx(an,{size:20})}),(t==null?void 0:t.role)===Le.PHOTOGRAPHER&&n.jsx("button",{onClick:()=>c(!a),className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${a?"bg-amber-400 text-black":"text-white/50 hover:text-white"}`,children:n.jsx(Do,{size:20})})]})}),h!==null&&n.jsxs("div",{className:"fixed inset-0 z-[60] bg-black flex items-center justify-center backdrop-blur-2xl animate-in fade-in duration-200 touch-none",onPointerDown:Jn,onPointerMove:Zn,onPointerUp:no,onPointerCancel:no,onPointerLeave:no,children:[n.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 flex justify-between items-center z-50 bg-gradient-to-b from-black/60 to-transparent pt-[env(safe-area-inset-top)]",children:[n.jsxs("div",{className:"text-white/80 text-sm font-medium",children:[h+1," / ",ee.length]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>C(!v),className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors",children:v?n.jsx(Ts,{size:20}):n.jsx(fo,{size:20})}),n.jsx("button",{onClick:Lt,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors",children:n.jsx(dt,{size:20})})]})]}),n.jsx("button",{onClick:()=>qe("prev"),className:"absolute left-4 p-3 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors z-50 hidden md:block",children:n.jsx(ks,{size:32})}),n.jsx("button",{onClick:()=>qe("next"),className:"absolute right-4 p-3 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors z-50 hidden md:block",children:n.jsx(Cs,{size:32})}),n.jsxs("div",{className:"w-full h-full relative overflow-hidden",onClick:Lt,children:[n.jsx("div",{className:"absolute top-0 left-0 h-full flex items-center",style:{transform:`translateX(calc(-100vw + ${Pe}px))`,transition:je||fe?"none":"transform 0.3s ease-out",width:"300vw"},onClick:g=>g.stopPropagation(),children:[-1,0,1].map(g=>{const z=(h+g+ee.length)%ee.length,T=ee[z];return n.jsx("div",{className:"w-[100vw] h-full flex-shrink-0 flex items-center justify-center p-2 md:p-10",children:T.type==="video"?n.jsx("video",{src:T.url,controls:!0,autoPlay:g===0&&v,className:"max-w-full max-h-full rounded-lg shadow-2xl object-contain bg-black",playsInline:!0,muted:v,onClick:q=>q.stopPropagation(),onError:q=>{console.error("Video failed to load in lightbox:",T.url)},style:{pointerEvents:"auto",width:"auto",height:"auto",maxWidth:"100%",maxHeight:"100%"}}):n.jsx("img",{src:T.previewUrl||T.url,alt:T.caption,className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl select-none",style:{transform:ln(T.orientation)},draggable:!1})},`${z}-${g}`)})}),n.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/70 to-transparent p-6 pb-[calc(1.5rem+env(safe-area-inset-bottom))] flex flex-col gap-4 max-h-[40vh] overflow-y-auto pointer-events-auto",onClick:g=>g.stopPropagation(),children:[n.jsxs("div",{className:"text-center mb-2",children:[ee[h].privacy==="private"&&n.jsxs("div",{className:"flex items-center justify-center gap-1 text-amber-400 mb-1 text-xs font-bold uppercase tracking-wider",children:[n.jsx(lo,{size:12})," Private"]}),n.jsx("p",{className:"text-white text-lg font-bold drop-shadow-md",children:ee[h].caption}),n.jsxs("p",{className:"text-white/60 text-sm mt-1",children:[new Date(ee[h].uploadedAt).toLocaleDateString(),"  ",ee[h].uploaderName]})]}),n.jsxs("div",{className:"w-full max-w-lg mx-auto bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10",children:[n.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2 mb-3 custom-scrollbar",children:(Po=ee[h].comments)!=null&&Po.length?ee[h].comments.map(g=>n.jsxs("div",{className:"text-sm",children:[n.jsxs("span",{className:"font-bold text-white mr-2",children:[g.senderName,":"]}),n.jsx("span",{className:"text-white/80",children:g.text})]},g.id)):n.jsx("p",{className:"text-white/40 text-xs text-center italic",children:"No comments yet."})}),n.jsxs("form",{onSubmit:os,className:"flex gap-2",children:[n.jsx("input",{type:"text",value:X,onChange:g=>K(g.target.value),placeholder:"Add a comment...",className:"flex-1 bg-black/20 text-white text-sm rounded-lg px-3 py-2 border border-white/20 focus:outline-none focus:border-white/50 placeholder:text-white/30"}),n.jsx("button",{type:"submit",className:"p-2 bg-white/20 rounded-lg hover:bg-white/30 text-white transition-colors",children:n.jsx(Oo,{size:16})})]})]})]})]})]}),(_e==null?void 0:_e.show)&&n.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 md:left-auto md:right-4 md:w-96",children:n.jsx("div",{className:`p-4 rounded-lg shadow-lg border backdrop-blur-md ${_e.type==="success"?"bg-green-50 border-green-200 text-green-800":_e.type==="error"?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:n.jsxs("div",{className:"flex items-center",children:[n.jsxs("div",{className:"flex-shrink-0",children:[_e.type==="success"&&n.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),_e.type==="error"&&n.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),_e.type==="info"&&n.jsx(ut,{className:"h-5 w-5 text-blue-400 animate-spin"})]}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm font-medium",children:_e.message})}),n.jsx("div",{className:"ml-auto pl-3",children:n.jsx("button",{onClick:()=>ct(null),className:"inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 hover:bg-black/10",children:n.jsx(dt,{className:"h-4 w-4"})})})]})})}),R&&n.jsx(Ul,{eventId:e.id,eventTitle:e.title,onClose:()=>D(!1),t:p})]})};Wn.displayName="EventGallery";const ar=P.memo(Wn);export{ar as EventGallery};
