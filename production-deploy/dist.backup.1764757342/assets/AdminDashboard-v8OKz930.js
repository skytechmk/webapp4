import{T as I,U as b,s as p,j as e,a as J,b as v}from"./index-CQ1VtCuz.js";import{r as i}from"./vendor-Bw8Oeg0g.js";import{u as gs}from"./react-sWsDCr6S.js";import{Z as D,U as Be,c as R,M as H,H as f,S as js,P as Ns,B as $e,d as M,L as vs,e as ws,f as qe,E as Q,g as ee,T as w,R as ys,h as ks,i as Cs,j as Ss,Y as Es,k as zs,m as As,n as Ge,o as Us,p as se,D as He,X as _,q as Ts,r as Is,s as _e,I as Ds,t as Rs,u as te,v as le,w as ae,x as Ms,A as Ls,y as Os}from"./libs-CW3sJYx5.js";const qs=({users:m,events:y,onDeleteUser:We,onDeleteEvent:Ye,onDeleteMedia:Ve,onUpdateEvent:Ke,onUpdateUser:re,onNewEvent:Ze,onDownloadEvent:ie,onClose:Xe,onLogout:Je,t:l})=>{var Re,Me,Le,Oe,Fe,Pe;const[x,W]=i.useState("users"),{updateServiceWorker:Qe}=gs(),[h,k]=i.useState(null),[L,Y]=i.useState(null),[c,C]=i.useState(null),[g,S]=i.useState(null),[d,ne]=i.useState(null),[es,de]=i.useState(!1),[E,V]=i.useState([]),[z,K]=i.useState(!1),[o,O]=i.useState(null),[ss,F]=i.useState(!1),[Z,oe]=i.useState([]),[A,ts]=i.useState(null),[P,ce]=i.useState(""),[X,xe]=i.useState(!1),[j,B]=i.useState(null),[me,he]=i.useState(""),[N,U]=i.useState("custom"),[ue,pe]=i.useState(30),[$,be]=i.useState("minutes"),[T,q]=i.useState(null),[fe,ge]=i.useState(""),[je,Ne]=i.useState(""),[ve,we]=i.useState(""),[G,ye]=i.useState(I.FREE),[ke,Ce]=i.useState(b.USER),Se=i.useMemo(()=>m.map(s=>({name:s.name.split(" ")[0],used:s.storageUsedMb,limit:s.storageLimitMb})),[m]);i.useEffect(()=>{x==="system"&&!d&&(async()=>{de(!0);try{const t=await v.getSystemStorage();ne(t)}catch(t){console.error("Failed to fetch system storage data:",t)}finally{de(!1)}})()},[x,d]),i.useEffect(()=>{const s=t=>{t.key==="Escape"&&(c?C(null):j?B(null):T&&q(null))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[c,j,T]),i.useEffect(()=>{p.connect();const s=t=>{var r;V(a=>[t,...a]),"Notification"in window&&Notification.permission==="granted"&&new Notification("New Upgrade Request",{body:`${((r=t.userInfo)==null?void 0:r.name)||"Anonymous user"} requested upgrade to ${t.tier}`,icon:"/icon-192x192.png"})};return p.on("upgrade_request",s),()=>{p.off("upgrade_request",s)}},[]),i.useEffect(()=>{const s=t=>{z&&!t.target.closest(".notification-container")&&K(!1)};return z&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[z]),i.useEffect(()=>{x==="support"&&Z.length===0&&(async()=>{try{const t=await v.getSupportMessages();oe(t)}catch{}})()},[x,Z.length]),i.useEffect(()=>{p.connect();const s=t=>{oe(r=>r.find(n=>n.id===t.id)?r:[...r,t])};return p.on("new_support_message",s),()=>{p.off("new_support_message",s)}},[]);const Ee=s=>{var t;return((t=m.find(r=>r.id===s))==null?void 0:t.name)||l("unknownUser")},ze=s=>s?new Date>new Date(s):!1,ls=s=>y.filter(t=>t.hostId===s),Ae=s=>y.filter(t=>t.hostId===s).length,Ue=s=>{let t="bg-green-50 text-green-700 border-green-200",r=null;return s===I.STUDIO?(t="bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-900 border-amber-300",r=e.jsx(M,{size:10,className:"mr-1 fill-amber-700"})):s===I.PRO?(t="bg-purple-50 text-purple-700 border-purple-200",r=e.jsx(D,{size:10,className:"mr-1 fill-purple-500"})):s===I.BASIC?(t="bg-blue-50 text-blue-700 border-blue-200",r=e.jsx(Os,{size:10,className:"mr-1 fill-blue-500"})):t="bg-slate-100 text-slate-600 border-slate-200",e.jsxs("span",{className:`px-2.5 py-1 inline-flex items-center text-xs leading-5 font-bold rounded-full border ${t}`,children:[r,s]})},as=s=>{S({isOpen:!0,type:"user",id:s.id,title:"Delete User Account",message:`Are you sure you want to delete ${s.name}? This will permanently remove their account AND all ${Ae(s.id)} events associated with them.`})},Te=s=>{S({isOpen:!0,type:"event",id:s.id,title:"Delete Event",message:`Are you sure you want to delete "${s.title}"? This will permanently delete the event gallery and all ${s.media.length} media items inside it.`})},rs=(s,t)=>{S({isOpen:!0,type:"media",id:t,parentId:s,title:"Delete Media Item",message:"Are you sure you want to delete this photo/video? It will be permanently removed from the gallery."})},is=async()=>{if(!g)return;const{type:s,id:t,parentId:r}=g;s==="user"?We(t):s==="event"?(Ye(t),(h==null?void 0:h.id)===t&&k(null)):s==="media"&&r&&(Ve(r,t),k(a=>a?{...a,media:a.media.filter(n=>n.id!==t)}:null),(c==null?void 0:c.id)===t&&C(null)),S(null)},Ie=s=>{B(s),he(s.title),s.expiresAt?(U("custom"),pe(30),be("minutes")):U("unlimited")},ns=()=>{if(!j)return;let s=j.expiresAt;if(N==="unlimited")s=null;else if(N==="immediate")s=new Date().toISOString();else{const r=new Date().getTime();let a=1e3;$==="minutes"&&(a=60*1e3),$==="hours"&&(a=60*60*1e3),$==="days"&&(a=24*60*60*1e3),s=new Date(r+ue*a).toISOString()}const t={...j,title:me,expiresAt:s};Ke(t),B(null)},ds=s=>{q(s),ge(s.name),Ne(s.email),we(J[s.tier].allowBranding&&s.studioName||""),ye(s.tier),Ce(s.role)},os=()=>{if(!T)return;const s=J[G],t={...T,name:fe,email:je,studioName:s.allowBranding?ve:void 0,role:ke,tier:G};re(t),q(null)},cs=s=>{Y(s),W("userEvents")},xs=()=>{Y(null),W("users")},ms=async()=>{if(confirm("Force update app to latest version? This will unregister all service workers and reload the page.")){try{await Qe(!0)}catch(s){console.error(s)}if("serviceWorker"in navigator){const s=await navigator.serviceWorker.getRegistrations();for(const t of s)await t.unregister()}window.location.reload()}},hs=()=>{if(confirm(`âš ï¸ FORCE RELOAD ALL CLIENTS?

This will cause every user currently on the site to refresh their page immediately. Use this only after pushing a critical update.`)){const s=localStorage.getItem("snapify_token");s&&(p.socket?(p.socket.emit("admin_trigger_reload",s),alert("Signal sent. Clients should reload momentarily.")):alert("Socket not connected."))}},De=async()=>{if(!(!P.trim()||!A||X)){xe(!0);try{await v.sendAdminReply(A,P.trim()),ce("")}catch{}finally{xe(!1)}}},us=()=>{if(!L)return null;const s=ls(L.id);return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center gap-4 bg-slate-50",children:[e.jsxs("button",{onClick:xs,className:"flex items-center gap-2 text-slate-600 hover:text-slate-800 transition-colors bg-white border border-slate-300 px-3 py-1.5 rounded-lg text-sm font-medium",children:[e.jsx(Ls,{size:16}),"Back to Users"]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900",children:[L.name,"'s Events"]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.length," events found"]})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Event"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Media"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[t.title,t.pin&&e.jsx(Ge,{size:12,className:"text-amber-500"})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[e.jsx(R,{size:12})," ",t.date||l("noDate")]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ze(t.expiresAt)?e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-700 flex items-center w-fit border border-red-200",children:[e.jsx(se,{size:12,className:"mr-1"})," ",l("expired")]}):e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-700 flex items-center w-fit border border-green-200",children:[e.jsx(D,{size:12,className:"mr-1"})," ",l("active")]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 font-medium",children:[t.media.length," ",l("items")]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>ie(t),className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition-colors",title:l("downloadAll"),children:e.jsx(He,{size:18})}),e.jsx("button",{onClick:()=>Ie(t),className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition-colors",title:"Edit Event",children:e.jsx(ee,{size:18})}),e.jsx("button",{onClick:()=>k(t),className:"text-indigo-600 hover:bg-indigo-50 p-2 rounded-lg transition-colors",title:"View Media",children:e.jsx(Q,{size:18})}),e.jsx("button",{onClick:()=>Te(t),className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors",title:"Delete Event",children:e.jsx(w,{size:18})})]})]},t.id))})]}),s.length===0&&e.jsxs("div",{className:"p-12 text-center text-slate-500",children:[e.jsx(R,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium",children:"No events found for this user"})]})]})]})},ps=()=>{const s=Z.reduce((a,n)=>{const u=n.userId||"anonymous";return a[u]||(a[u]={userId:u,userName:n.userName,userEmail:n.userEmail,messages:[],lastMessage:n.createdAt,unreadCount:0}),a[u].messages.push(n),a[u].lastMessage=n.createdAt,!n.isFromAdmin&&!n.isRead&&a[u].unreadCount++,a},{}),t=Object.values(s).sort((a,n)=>new Date(n.lastMessage).getTime()-new Date(a.lastMessage).getTime()),r=A?s[A]:null;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center",children:e.jsx(H,{className:"text-indigo-600",size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Support Chat Management"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Manage customer support conversations"})]})]}),e.jsxs("div",{className:"flex h-[600px]",children:[e.jsxs("div",{className:"w-1/3 border-r border-slate-200 flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-slate-100",children:e.jsxs("h4",{className:"font-bold text-slate-900",children:["Conversations (",t.length,")"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-500",children:[e.jsx(H,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium",children:"No conversations yet"}),e.jsx("p",{className:"text-sm",children:"Support messages will appear here"})]}):t.map(a=>{const n=m.find(u=>u.id===a.userId);return e.jsx("div",{onClick:()=>ts(a.userId),className:`p-4 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors ${A===a.userId?"bg-indigo-50 border-l-4 border-l-indigo-500":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold",children:a.userName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-bold text-slate-900 truncate",children:a.userName}),a.unreadCount>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:a.unreadCount})]}),e.jsx("p",{className:"text-sm text-slate-500 truncate",children:a.userEmail||"No email"}),n&&e.jsx("div",{className:"flex items-center gap-2 mt-1",children:Ue(n.tier)}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(a.lastMessage).toLocaleString()})]})]})},a.userId)})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold",children:r.userName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900",children:r.userName}),e.jsx("p",{className:"text-sm text-slate-500",children:r.userEmail||"No email provided"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:r.messages.map(a=>e.jsx("div",{className:`flex ${a.isFromAdmin?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${a.isFromAdmin?"bg-indigo-600 text-white":"bg-slate-100 text-slate-900"}`,children:[e.jsx("p",{className:"text-sm",children:a.message}),e.jsx("p",{className:`text-xs mt-1 ${a.isFromAdmin?"text-indigo-200":"text-slate-500"}`,children:new Date(a.createdAt).toLocaleTimeString()})]})},a.id))}),e.jsx("div",{className:"p-4 border-t border-slate-100 bg-white",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"admin-reply-input",name:"admin-reply",type:"text",value:P,onChange:a=>ce(a.target.value),onKeyPress:a=>a.key==="Enter"&&De(),placeholder:"Type your reply...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none",autoComplete:"off"}),e.jsxs("button",{onClick:De,disabled:!P.trim()||X,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[X?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(Ms,{size:16}),"Send"]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{size:64,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium",children:"Select a conversation to start chatting"}),e.jsx("p",{className:"text-sm",children:"Choose a user from the list to view their messages"})]})})})]})]})},bs=()=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden p-8 animate-in fade-in duration-300",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-red-100",children:e.jsx(te,{className:"text-red-600",size:40})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-2",children:"System Settings"}),e.jsx("p",{className:"text-slate-500",children:"Manage global configurations and perform critical maintenance tasks."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-indigo-200 rounded-2xl p-6 bg-indigo-50/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-indigo-900 mb-1 flex items-center gap-2",children:[e.jsx(ae,{size:18})," App Updates"]}),e.jsx("p",{className:"text-sm text-indigo-700",children:"Force this browser to fetch the latest version of the application immediately."})]}),e.jsxs("button",{onClick:ms,className:"py-2.5 px-5 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-md flex items-center gap-2",children:[e.jsx(ae,{size:16}),"Force Reload App"]})]}),e.jsxs("div",{className:"border border-amber-200 rounded-2xl p-6 bg-amber-50/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-bold text-amber-900 mb-1 flex items-center gap-2",children:[e.jsx(D,{size:18})," Global Client Refresh"]}),e.jsxs("p",{className:"text-sm text-amber-700 max-w-md",children:["Send a signal to ",e.jsx("strong",{children:"ALL connected users"})," to unregister their service worker and reload the page. Use this after deploying a new version to ensure everyone gets it immediately."]})]}),e.jsxs("button",{onClick:hs,className:"py-2.5 px-5 bg-amber-600 text-white font-bold rounded-xl hover:bg-amber-700 transition-all shadow-md flex items-center gap-2",children:[e.jsx(ae,{size:16}),"Reload All Clients"]})]})]})]})}),fs=()=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden p-8 animate-in fade-in duration-300",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-4 border border-green-100",children:e.jsx(f,{className:"text-green-600",size:40})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-2",children:"System Storage"}),e.jsx("p",{className:"text-slate-500",children:"Real-time monitoring of system and storage capacity."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-slate-200 rounded-2xl p-6 bg-slate-50/50",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(f,{size:18})," System Disk Usage"]}),es?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin border-2 border-slate-300 border-t-slate-600 rounded-full w-8 h-8"}),e.jsx("span",{className:"ml-3 text-slate-600",children:"Loading storage info..."})]}):d?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Filesystem"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.system.filesystem})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Total Size"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.system.size})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Used"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.system.used})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Available"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.system.available})]})]}):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(f,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{children:"Unable to load storage information"})]})]}),e.jsxs("div",{className:"border border-slate-200 rounded-2xl p-6 bg-slate-50/50",children:[e.jsxs("h4",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(f,{size:18})," MinIO Storage Usage"]}),d?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Filesystem"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.minio.filesystem})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Total Size"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.minio.size})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Used"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.minio.used})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Available"}),e.jsx("div",{className:"text-lg font-black text-slate-900",children:d.minio.available})]})]}):e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(f,{size:48,className:"mx-auto mb-4 text-slate-300"}),e.jsx("p",{children:"Unable to load MinIO information"})]})]}),e.jsxs("div",{className:"border border-red-200 rounded-2xl p-6 bg-red-50/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center border border-red-200",children:e.jsx(te,{className:"text-red-600",size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-black text-red-900",children:"System Lab"}),e.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Danger Zone - Administrative Operations"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-xl border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-slate-900",children:"Clean MinIO Storage Bucket"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Permanently delete all files and objects from the MinIO storage bucket. This action cannot be undone."})]}),e.jsxs("button",{onClick:async()=>{if(confirm(`ðŸš¨ CRITICAL WARNING ðŸš¨

This will PERMANENTLY DELETE ALL FILES from the MinIO storage bucket!

â€¢ All user uploaded media will be lost
â€¢ Event galleries will become empty
â€¢ This action CANNOT be undone

Type "YES" to confirm:`)&&prompt('Type "YES" to confirm permanent deletion:')==="YES")try{const r=await v.cleanMinIOBucket();alert(`âœ… Bucket cleaned successfully!

ðŸ“ Deleted: ${r.deletedCount} objects
ðŸ’¾ Freed: ${r.totalSize}

âš ï¸  All media files have been permanently removed.`),ne(null)}catch(r){console.error("Failed to clean bucket:",r),alert("âŒ Failed to clean bucket. Check console for details.")}},className:"px-4 py-2 bg-red-600 text-white text-sm font-bold rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2 shadow-lg shadow-red-500/20",children:[e.jsx(w,{size:16}),"Clean Bucket"]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl border border-red-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-slate-900",children:"Clear Users Database"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Reset the webapp by removing all users, events, media, and related data. Admin account will be preserved."})]}),e.jsxs("button",{onClick:async()=>{if(confirm(`ðŸš¨ CRITICAL WARNING ðŸš¨

This will RESET THE ENTIRE WEBAPP!

â€¢ All user accounts will be deleted (except admin)
â€¢ All events and galleries will be removed
â€¢ All media files will be lost
â€¢ Support messages will be cleared

The webapp will return to a fresh state.

Type "RESET" to confirm:`)&&prompt('Type "RESET" to confirm complete webapp reset:')==="RESET")try{const r=await v.clearUsersDatabase();alert(`âœ… Database cleared successfully!

ðŸ‘¤ Admin preserved: ${r.adminPreserved}
ðŸ—‘ï¸  Total records deleted: ${r.totalDeleted}

âš ï¸  Webapp has been reset to fresh state.`),window.location.reload()}catch(r){console.error("Failed to clear database:",r),alert("âŒ Failed to clear database. Check console for details.")}},className:"px-4 py-2 bg-red-700 text-white text-sm font-bold rounded-lg hover:bg-red-800 transition-colors flex items-center gap-2 shadow-lg shadow-red-500/30",children:[e.jsx(le,{size:16}),"Clear Database"]})]})})]}),e.jsx("div",{className:"mt-4 p-3 bg-red-100 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-red-800 font-medium flex items-center gap-2",children:[e.jsx(le,{size:14}),"These operations are irreversible. Use only when necessary for system maintenance or testing."]})})]}),d&&e.jsxs("div",{className:"text-center text-xs text-slate-400",children:["Last updated: ",new Date(d.timestamp).toLocaleString()]})]})]})});return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[e.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40 px-4 md:px-8 py-4 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg shadow-indigo-200 shadow-md",children:e.jsx(D,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-black text-slate-900 tracking-tight",children:"SnapifY Admin"}),e.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wide",children:"Master Control"})]})]}),e.jsx("div",{className:"flex items-center gap-2 bg-slate-100 p-1.5 rounded-xl border border-slate-200",children:[{id:"users",icon:Be,label:"Users"},{id:"events",icon:R,label:"Events"},{id:"support",icon:H,label:"Support"},{id:"system",icon:f,label:"System"},{id:"settings",icon:js,label:"Settings"}].map(s=>e.jsxs("button",{onClick:()=>{W(s.id),Y(null)},className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${x===s.id?"bg-white text-indigo-600 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:[e.jsx(s.icon,{size:16}),s.label]},s.id))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:Ze,className:"flex items-center gap-2 bg-slate-900 text-white px-4 py-2.5 rounded-xl font-bold hover:bg-slate-800 transition-colors shadow-lg shadow-slate-500/20 text-sm",children:[e.jsx(Ns,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:l("newEvent")})]}),e.jsx("div",{className:"h-8 w-px bg-slate-200 mx-1"}),e.jsxs("div",{className:"relative notification-container",children:[e.jsxs("button",{onClick:()=>K(!z),className:"p-2.5 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-colors relative",title:"Notifications",children:[e.jsx($e,{size:20}),E.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold",children:E.length>9?"9+":E.length})]}),z&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-xl shadow-xl border border-slate-200 z-50 max-h-96 overflow-y-auto notification-container",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between",children:[e.jsx("h4",{className:"font-bold text-slate-900",children:"Notifications"}),e.jsx("button",{onClick:()=>V([]),className:"text-xs text-slate-500 hover:text-slate-700",children:"Clear All"})]}),E.length===0?e.jsxs("div",{className:"p-8 text-center text-slate-500",children:[e.jsx($e,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No notifications"})]}):e.jsx("div",{className:"divide-y divide-slate-100",children:E.map((s,t)=>{var r;return e.jsx("div",{onClick:()=>{O(s),F(!0),K(!1)},className:"p-4 hover:bg-slate-50 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(M,{size:16,className:"text-indigo-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Upgrade Request"}),e.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[((r=s.userInfo)==null?void 0:r.name)||"Anonymous user"," â†’ ",s.tier]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(s.timestamp).toLocaleString()})]}),e.jsx("div",{className:"text-slate-400",children:e.jsx(M,{size:14})})]})},s.id||t)})})]})]}),e.jsx("button",{onClick:Xe,className:"p-2.5 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-colors",title:l("backToApp"),children:e.jsx(vs,{size:20})}),e.jsx("button",{onClick:Je,className:"p-2.5 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-xl transition-colors",title:l("logOut"),children:e.jsx(ws,{size:20})})]})]})}),e.jsxs("div",{className:"flex-1 p-4 md:p-8 max-w-7xl mx-auto w-full",children:[x!=="settings"&&!L&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 animate-in slide-in-from-top-2",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:l("totalUsers")}),e.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg text-indigo-600",children:e.jsx(Be,{size:20})})]}),e.jsx("span",{className:"text-4xl font-black text-slate-900",children:m.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:l("totalEvents")}),e.jsx("div",{className:"p-2 bg-pink-50 rounded-lg text-pink-600",children:e.jsx(R,{size:20})})]}),e.jsx("span",{className:"text-4xl font-black text-slate-900",children:y.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:l("storage")}),e.jsx("div",{className:"p-2 bg-green-50 rounded-lg text-green-600",children:e.jsx(f,{size:20})})]}),e.jsxs("span",{className:"text-4xl font-black text-slate-900",children:[m.reduce((s,t)=>s+t.storageUsedMb,0).toFixed(1)," ",e.jsx("span",{className:"text-lg font-medium text-slate-400",children:"MB"})]})]})]}),x==="settings"?bs():x==="system"?fs():x==="support"?ps():x==="userEvents"?us():x==="users"?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:l("registeredUsers")}),e.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs font-bold px-2.5 py-1 rounded-full",children:m.length})]}),e.jsx("div",{className:"overflow-x-auto flex-1",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider pl-8",children:l("users")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Stats"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:l("tier")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase tracking-wider pr-8",children:l("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:m.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 pl-8 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center text-white font-bold shadow-sm ${s.role===b.PHOTOGRAPHER?"bg-slate-900 border-2 border-amber-400":"bg-gradient-to-br from-indigo-500 to-purple-600"}`,children:s.role===b.PHOTOGRAPHER?e.jsx(qe,{size:16,className:"text-amber-400"}):s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-bold text-slate-900 flex flex-wrap items-center gap-2",children:[s.name,s.role===b.ADMIN&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-red-100 text-red-700 border border-red-200 uppercase tracking-wide",children:"ADMIN"})]}),e.jsx("div",{className:"text-xs text-slate-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:"text-xs font-medium text-slate-700",children:[Ae(s.id)," Events"]}),e.jsx("div",{className:"w-24 bg-slate-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-indigo-500 h-1.5 rounded-full",style:{width:`${Math.min(s.storageUsedMb/s.storageLimitMb*100,100)}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue(s.tier)}),e.jsx("td",{className:"px-6 py-4 pr-8 whitespace-nowrap text-right text-sm font-medium",children:s.role!==b.ADMIN&&e.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>cs(s),className:"text-slate-500 hover:text-indigo-600 p-2 hover:bg-indigo-50 rounded-lg transition-colors",title:"View Events",children:e.jsx(Q,{size:16})}),e.jsx("button",{onClick:()=>ds(s),className:"text-slate-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit User",children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>as(s),className:"text-slate-500 hover:text-red-600 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete User",children:e.jsx(w,{size:16})})]})})]},s.id))})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:l("storageUsage")}),e.jsx("div",{className:"flex-1 min-h-[300px]",children:Se.length>0?e.jsx(ys,{width:"100%",height:"100%",children:e.jsxs(ks,{data:Se,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Cs,{strokeDasharray:"3 3",horizontal:!1,stroke:"#e2e8f0"}),e.jsx(Ss,{type:"number",hide:!0}),e.jsx(Es,{dataKey:"name",type:"category",width:80,tick:{fontSize:12}}),e.jsx(zs,{cursor:{fill:"#f8fafc"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1)"}}),e.jsx(As,{dataKey:"used",fill:"#6366f1",radius:[0,4,4,0],barSize:20,name:"Used (MB)"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:e.jsx("p",{children:"No storage data available"})})})]})]}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:l("systemEvents")}),e.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs font-bold px-2.5 py-1 rounded-full",children:y.length})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider pl-8",children:l("event")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:l("host")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:l("status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase tracking-wider",children:l("mediaCount")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-slate-500 uppercase tracking-wider pr-8",children:l("actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:y.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4 pl-8 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[s.title,s.pin&&e.jsx(Ge,{size:12,className:"text-amber-500"})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[e.jsx(R,{size:12})," ",s.date||l("noDate")]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-slate-700 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600",children:Ee(s.hostId).charAt(0)}),Ee(s.hostId),((t=m.find(r=>r.id===s.hostId))==null?void 0:t.role)===b.PHOTOGRAPHER&&e.jsx(Us,{size:12,className:"text-amber-500"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ze(s.expiresAt)?e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-700 flex items-center w-fit border border-red-200",children:[e.jsx(se,{size:12,className:"mr-1"})," ",l("expired")]}):e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-bold bg-green-100 text-green-700 flex items-center w-fit border border-green-200",children:[e.jsx(D,{size:12,className:"mr-1"})," ",l("active")]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700 font-bold",children:s.media.length}),e.jsx("td",{className:"px-6 py-4 pr-8 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>ie(s),className:"text-slate-500 hover:text-green-600 p-2 hover:bg-green-50 rounded-lg transition-colors",title:l("downloadAll"),children:e.jsx(He,{size:16})}),e.jsx("button",{onClick:()=>Ie(s),className:"text-slate-500 hover:text-blue-600 p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Event",children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>k(s),className:"text-slate-500 hover:text-indigo-600 p-2 hover:bg-indigo-50 rounded-lg transition-colors",title:"View Media",children:e.jsx(Q,{size:16})}),e.jsx("button",{onClick:()=>Te(s),className:"text-slate-500 hover:text-red-600 p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Event",children:e.jsx(w,{size:16})})]})})]},s.id)})})]})})]})]}),T&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden scale-100",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Edit User Profile"}),e.jsx("button",{onClick:()=>q(null),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Display Name"}),e.jsx("input",{id:"edit-user-name-input",name:"edit-user-name",type:"text",value:fe,onChange:s=>ge(s.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-900 focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none transition-all font-medium",autoComplete:"name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Email Address"}),e.jsxs("div",{className:"flex items-center px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-500",children:[e.jsx(Ts,{size:18,className:"mr-3 text-slate-400"}),e.jsx("input",{id:"edit-user-email-input",name:"edit-user-email",type:"text",value:je,onChange:s=>Ne(s.target.value),className:"bg-transparent w-full focus:outline-none font-medium",autoComplete:"email"})]})]}),J[G].allowBranding&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Studio / Business"}),e.jsxs("div",{className:"flex items-center px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-900",children:[e.jsx(Is,{size:18,className:"mr-3 text-slate-400"}),e.jsx("input",{id:"edit-user-studio-input",name:"edit-user-studio",type:"text",value:ve,onChange:s=>we(s.target.value),className:"bg-transparent w-full focus:outline-none font-medium",placeholder:"No studio name",autoComplete:"organization"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"System Role"}),e.jsx("select",{value:ke,onChange:s=>Ce(s.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white text-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none font-medium cursor-pointer",children:Object.values(b).map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Tier Plan"}),e.jsx("select",{value:G,onChange:s=>ye(s.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white text-slate-900 focus:ring-2 focus:ring-indigo-500 outline-none font-medium cursor-pointer",children:Object.values(I).map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("button",{onClick:os,className:"w-full py-4 bg-black text-white rounded-xl font-bold hover:bg-slate-800 transition-all shadow-lg shadow-slate-200 flex items-center justify-center gap-2 mt-4",children:[e.jsx(_e,{size:18}),"Save Changes"]})]})]})}),j&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900",children:l("editEvent")}),e.jsx("button",{onClick:()=>B(null),className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(_,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:l("eventTitle")}),e.jsx("input",{id:"edit-event-title-input",name:"edit-event-title",type:"text",value:me,onChange:s=>he(s.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-slate-900 focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none transition-all font-medium",autoComplete:"off"})]}),e.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-100",children:[e.jsxs("label",{className:"block text-xs font-bold text-amber-800 uppercase tracking-wider mb-3 flex items-center",children:[e.jsx(se,{size:16,className:"mr-2"})," ",l("modifyExpiration")]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("label",{className:"flex items-center p-3 bg-white rounded-xl border border-amber-100 cursor-pointer hover:border-amber-300 transition-all",children:[e.jsx("input",{type:"radio",name:"expiryType",checked:N==="unlimited",onChange:()=>U("unlimited"),className:"w-4 h-4 text-amber-600 border-slate-300 focus:ring-amber-500"}),e.jsx("span",{className:"ml-3 text-sm font-bold text-slate-900",children:l("unlimited")}),e.jsx("span",{className:"ml-auto text-xs text-amber-600 font-medium",children:l("neverExpires")})]}),e.jsxs("label",{className:"flex items-center p-3 bg-white rounded-xl border border-amber-100 cursor-pointer hover:border-amber-300 transition-all",children:[e.jsx("input",{type:"radio",name:"expiryType",checked:N==="immediate",onChange:()=>U("immediate"),className:"w-4 h-4 text-amber-600 border-slate-300 focus:ring-amber-500"}),e.jsx("span",{className:"ml-3 text-sm font-bold text-slate-900",children:l("expireImmediately")})]}),e.jsxs("label",{className:"flex items-center p-3 bg-white rounded-xl border border-amber-100 cursor-pointer hover:border-amber-300 transition-all",children:[e.jsx("input",{type:"radio",name:"expiryType",checked:N==="custom",onChange:()=>U("custom"),className:"w-4 h-4 text-amber-600 border-slate-300 focus:ring-amber-500"}),e.jsx("span",{className:"ml-3 text-sm font-bold text-slate-900",children:l("setNewDuration")})]})]}),N==="custom"&&e.jsxs("div",{className:"flex gap-2 animate-in fade-in slide-in-from-top-2",children:[e.jsx("input",{id:"edit-duration-value-input",name:"edit-duration-value",type:"number",min:"1",value:ue,onChange:s=>pe(parseInt(s.target.value)||0),className:"w-1/3 px-4 py-3 border border-amber-200 rounded-xl text-sm font-bold text-slate-900 focus:ring-2 focus:ring-amber-500 outline-none",autoComplete:"off"}),e.jsxs("select",{value:$,onChange:s=>be(s.target.value),className:"flex-1 px-4 py-3 border border-amber-200 rounded-xl text-sm font-bold text-slate-900 focus:ring-2 focus:ring-amber-500 outline-none bg-white cursor-pointer",children:[e.jsx("option",{value:"seconds",children:l("seconds")}),e.jsx("option",{value:"minutes",children:l("minutes")}),e.jsx("option",{value:"hours",children:l("hours")}),e.jsx("option",{value:"days",children:l("days")})]})]})]}),e.jsxs("button",{onClick:ns,className:"w-full py-4 bg-black text-white rounded-xl font-bold hover:bg-slate-800 transition-all flex items-center justify-center gap-2",children:[e.jsx(_e,{size:18}),l("saveChanges")]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-6xl h-[90vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-black text-slate-900",children:[l("managing"),": ",h.title]}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-1",children:[h.media.length," ",l("mediaItems")," â€¢ ",l("totalMedia")]})]}),e.jsx("button",{onClick:()=>k(null),className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:e.jsx(_,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:h.media.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(Ds,{size:64,className:"mb-4 opacity-50"}),e.jsx("p",{className:"font-bold text-lg",children:l("noMedia")})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:h.media.map(s=>e.jsxs("div",{className:"relative group aspect-square bg-slate-200 rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all cursor-pointer border border-slate-200",onClick:()=>C(s),children:[s.type==="video"?e.jsx("video",{src:s.previewUrl||s.url,className:"w-full h-full object-cover",muted:!0}):e.jsx("img",{src:s.url,alt:"content",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2 backdrop-blur-[2px]",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-full backdrop-blur-md text-white hover:bg-white/40 transition-colors",children:e.jsx(Rs,{size:20})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),rs(h.id,s.id)},className:"bg-red-600 text-white p-2 rounded-full hover:bg-red-700 transform hover:scale-110 transition-all shadow-lg",children:e.jsx(w,{size:20})})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/80 via-black/50 to-transparent",children:e.jsx("p",{className:"text-white text-xs font-medium truncate",children:s.uploaderName})})]},s.id))})})]})}),c&&e.jsxs("div",{className:"fixed inset-0 z-[70] bg-black/95 backdrop-blur-xl flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:()=>C(null),children:[e.jsx("button",{className:"absolute top-6 right-6 text-white/70 hover:text-white p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all z-50",onClick:()=>C(null),children:e.jsx(_,{size:32})}),e.jsx("div",{className:"max-w-full max-h-full overflow-hidden flex items-center justify-center relative w-full h-full",onClick:s=>s.stopPropagation(),children:c.type==="video"?e.jsx("video",{src:c.url,controls:!0,autoPlay:!0,className:"max-w-full max-h-[90vh] rounded-2xl shadow-2xl ring-1 ring-white/10"}):e.jsx("img",{src:c.url,alt:"preview",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl ring-1 ring-white/10"})}),e.jsxs("div",{className:"absolute bottom-10 left-0 right-0 text-center text-white pointer-events-none",children:[e.jsx("p",{className:"font-black text-xl drop-shadow-lg mb-1",children:c.caption||"No caption"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-white/60 font-medium",children:[e.jsx(qe,{size:14}),e.jsxs("span",{children:["Uploaded by ",c.uploaderName]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(c.uploadedAt).toLocaleDateString()})]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden p-8 animate-in zoom-in-95",children:[e.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mb-6 mx-auto border border-red-100",children:g.type==="system"?e.jsx(te,{className:"text-red-600",size:32}):e.jsx(le,{className:"text-red-600",size:32})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 text-center mb-3",children:g.title}),e.jsx("p",{className:"text-slate-500 text-center mb-8 text-sm leading-relaxed font-medium",children:g.message}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>S(null),className:"flex-1 py-3.5 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:is,className:"flex-1 py-3.5 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-red-500/20",children:[e.jsx(w,{size:18}),"Delete"]})]})]})}),ss&&o&&e.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 backdrop-blur-md flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden p-6 animate-in zoom-in-95",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{size:32})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Upgrade User"}),e.jsx("p",{className:"text-slate-500 mt-2",children:"Confirm upgrade for this user"})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsx("div",{className:"bg-slate-50 p-4 rounded-xl",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Full Name"}),e.jsx("p",{className:"text-slate-900 font-medium",children:((Re=o.userInfo)==null?void 0:Re.name)||"Anonymous User"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Email Address"}),e.jsx("p",{className:"text-slate-900 font-medium",children:((Me=o.userInfo)==null?void 0:Me.email)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Requested Tier"}),e.jsx("p",{className:"text-slate-900 font-medium",children:o.tier})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Current Tier"}),e.jsx("p",{className:"text-slate-900 font-medium",children:((Le=o.userInfo)==null?void 0:Le.currentTier)||"FREE"})]}),!((Oe=o.userInfo)!=null&&Oe.id)&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"âš ï¸ Anonymous Request"}),e.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"This user is not registered. You cannot upgrade anonymous users."})]})]})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{F(!1),O(null)},className:"flex-1 py-3 bg-slate-100 text-slate-700 font-bold rounded-xl hover:bg-slate-200 transition-colors",children:(Fe=o.userInfo)!=null&&Fe.id?"Cancel":"Close"}),(Pe=o.userInfo)!=null&&Pe.id?e.jsxs("button",{onClick:async()=>{try{await v.upgradeUser(o.userInfo.id,o.tier);const s=m.find(t=>t.id===o.userInfo.id);s&&re({...s,tier:o.tier}),V(t=>t.filter(r=>r.id!==o.id)),F(!1),O(null),alert("User upgraded successfully!")}catch{alert("Failed to upgrade user. Please try again.")}},className:"flex-1 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(M,{size:16}),"Confirm Upgrade"]}):e.jsx("button",{onClick:()=>{F(!1),O(null)},className:"flex-1 py-3 bg-slate-500 text-white font-bold rounded-xl cursor-not-allowed flex items-center justify-center gap-2",disabled:!0,children:"Cannot Upgrade Anonymous User"})]})]})})]})};export{qs as AdminDashboard};
