import{a as P,j as e}from"./index-CQ1VtCuz.js";import{r}from"./vendor-Bw8Oeg0g.js";import{o as R,X as T,T as D,L as M,I as Y,s as E}from"./libs-CW3sJYx5.js";const W=({currentUser:o,onClose:b,onSave:y,t:s})=>{if(!P[o.tier].allowBranding)return b(),null;const[u,$]=r.useState(o.studioName||""),[x,h]=r.useState(o.logoUrl||""),[g,S]=r.useState(o.watermarkOpacity||.85),[m,C]=r.useState(o.watermarkSize||20),[a,c]=r.useState(o.watermarkPosition||"bottom-right"),[l,z]=r.useState(o.watermarkOffsetX||2),[i,I]=r.useState(o.watermarkOffsetY||2),p=r.useRef(null),q=t=>{var v;const f=(v=t.target.files)==null?void 0:v[0];if(!f)return;const j=new FileReader;j.onload=L=>{var N;const n=new Image;n.onload=()=>{const d=document.createElement("canvas"),w=Math.min(1,300/n.width);d.width=n.width*w,d.height=n.height*w;const k=d.getContext("2d");k&&(k.drawImage(n,0,0,d.width,d.height),h(d.toDataURL("image/png")))},n.src=(N=L.target)==null?void 0:N.result},j.readAsDataURL(f)},O=()=>{y({studioName:u,logoUrl:x,watermarkOpacity:g,watermarkSize:m,watermarkPosition:a,watermarkOffsetX:l,watermarkOffsetY:i}),b()},X=()=>{const t={position:"absolute",width:`${m}%`,opacity:g,height:"auto"};switch(a){case"top-left":t.top=`${i}%`,t.left=`${l}%`;break;case"top-right":t.top=`${i}%`,t.right=`${l}%`;break;case"bottom-left":t.bottom=`${i}%`,t.left=`${l}%`;break;case"bottom-right":t.bottom=`${i}%`,t.right=`${l}%`;break;case"center":t.top="50%",t.left="50%",t.transform=`translate(-50%, -50%) translate(${l}%, ${i}%)`;break}return t};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-xl overflow-hidden max-h-[90vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"text-indigo-600",size:24}),e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s("studioSettings")})]}),e.jsx("button",{onClick:b,className:"p-2 bg-white rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(T,{size:20,className:"text-slate-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:s("studioName")}),e.jsx("input",{type:"text",value:u,onChange:t=>$(t.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-300 bg-white text-slate-900 focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 outline-none transition-all"})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2 flex items-center justify-between",children:[e.jsx("span",{children:s("uploadLogo")}),e.jsx("span",{className:"text-xs font-normal bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded",children:"PNG / Transparent"})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:s("logoDesc")}),x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative w-full aspect-video bg-slate-200 rounded-lg overflow-hidden border border-slate-300 shadow-inner",children:[e.jsx("img",{src:"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&q=60&w=600",className:"w-full h-full object-cover opacity-75 grayscale-[0.2]",alt:"Preview Background"}),e.jsx("img",{src:x,alt:"Watermark Preview",style:X()}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("button",{onClick:()=>h(""),className:"bg-white/80 text-red-600 p-1.5 rounded-full hover:bg-white transition-colors shadow-sm",title:s("removeLogo"),children:e.jsx(D,{size:14})})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-2 flex items-center gap-2",children:[e.jsx(M,{size:14})," ",s("position")]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 w-32 mb-4 mx-auto md:mx-0",children:[e.jsx("button",{onClick:()=>c("top-left"),className:`aspect-square border rounded flex items-start justify-start p-1 hover:bg-indigo-50 ${a==="top-left"?"border-indigo-600 bg-indigo-100":"border-slate-300"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-sm ${a==="top-left"?"bg-indigo-600":"bg-slate-300"}`})}),e.jsx("div",{className:"aspect-square"}),e.jsx("button",{onClick:()=>c("top-right"),className:`aspect-square border rounded flex items-start justify-end p-1 hover:bg-indigo-50 ${a==="top-right"?"border-indigo-600 bg-indigo-100":"border-slate-300"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-sm ${a==="top-right"?"bg-indigo-600":"bg-slate-300"}`})}),e.jsx("div",{className:"aspect-square"}),e.jsx("button",{onClick:()=>c("center"),className:`aspect-square border rounded flex items-center justify-center p-1 hover:bg-indigo-50 ${a==="center"?"border-indigo-600 bg-indigo-100":"border-slate-300"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-sm ${a==="center"?"bg-indigo-600":"bg-slate-300"}`})}),e.jsx("div",{className:"aspect-square"}),e.jsx("button",{onClick:()=>c("bottom-left"),className:`aspect-square border rounded flex items-end justify-start p-1 hover:bg-indigo-50 ${a==="bottom-left"?"border-indigo-600 bg-indigo-100":"border-slate-300"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-sm ${a==="bottom-left"?"bg-indigo-600":"bg-slate-300"}`})}),e.jsx("div",{className:"aspect-square"}),e.jsx("button",{onClick:()=>c("bottom-right"),className:`aspect-square border rounded flex items-end justify-end p-1 hover:bg-indigo-50 ${a==="bottom-right"?"border-indigo-600 bg-indigo-100":"border-slate-300"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-sm ${a==="bottom-right"?"bg-indigo-600":"bg-slate-300"}`})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:[s("opacity"),": ",Math.round(g*100),"%"]}),e.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.05",value:g,onChange:t=>S(parseFloat(t.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:[s("size"),": ",m,"%"]}),e.jsx("input",{type:"range",min:"5",max:"50",step:"1",value:m,onChange:t=>C(parseInt(t.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 bg-slate-100 p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:[s("offsetX"),": ",l,"%"]}),e.jsx("input",{type:"range",min:"0",max:"30",step:"1",value:l,onChange:t=>z(parseInt(t.target.value)),className:"w-full h-2 bg-slate-300 rounded-lg appearance-none cursor-pointer accent-slate-600"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-600 mb-1",children:[s("offsetY"),": ",i,"%"]}),e.jsx("input",{type:"range",min:"0",max:"30",step:"1",value:i,onChange:t=>I(parseInt(t.target.value)),className:"w-full h-2 bg-slate-300 rounded-lg appearance-none cursor-pointer accent-slate-600"})]})]})]}):e.jsxs("button",{onClick:()=>{var t;return(t=p.current)==null?void 0:t.click()},className:"w-full h-32 border-2 border-dashed border-slate-300 rounded-xl flex flex-col items-center justify-center text-slate-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50 transition-all cursor-pointer",children:[e.jsx(Y,{size:32,className:"mb-2"}),e.jsx("span",{className:"text-sm font-bold",children:s("upload")})]}),e.jsx("input",{type:"file",ref:p,className:"hidden",accept:"image/png,image/jpeg",onChange:q})]}),e.jsxs("button",{onClick:O,className:"w-full bg-black text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-slate-800 shadow-lg transition-all",children:[e.jsx(E,{size:18}),s("saveSettings")]})]})]})})};export{W as StudioSettingsModal};
