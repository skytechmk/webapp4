import{_ as p}from"./index-CQ1VtCuz.js";import{r as l}from"./vendor-Bw8Oeg0g.js";function m(d={}){const{immediate:u=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:t}=d;let s,a;const f=async(e=!0)=>{await a};async function c(){if("serviceWorker"in navigator){if(s=await p(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/sw.js",{scope:"/",type:"classic"})).catch(e=>{t==null||t(e)}),!s)return;s.addEventListener("activated",e=>{(e.isUpdate||e.isExternal)&&window.location.reload()}),s.addEventListener("installed",e=>{e.isUpdate||r==null||r()}),s.register({immediate:u}).then(e=>{o?o("/sw.js",e):i==null||i(e)}).catch(e=>{t==null||t(e)})}}return a=c(),f}function S(d={}){const{immediate:u=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:t}=d,[s,a]=l.useState(!1),[f,c]=l.useState(!1),[e]=l.useState(()=>m({immediate:u,onOfflineReady(){c(!0),r==null||r()},onNeedRefresh(){a(!0),n==null||n()},onRegistered:i,onRegisteredSW:o,onRegisterError:t}));return{needRefresh:[s,a],offlineReady:[f,c],updateServiceWorker:e}}export{S as u};
